{
  "{\"filename\":\"/home/pm2user/swap.bot/swapApp.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/swapApp.js",
      "filenameRelative": "/home/pm2user/swap.bot/swapApp.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "swapApp.js",
      "sourceFileName": "swapApp.js",
      "sourceRoot": "/home/pm2user/swap.bot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "swapApp"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst SwapApp = require('./microbot');\n\nmodule.exports = SwapApp;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3YXBBcHAuanMiXSwibmFtZXMiOlsiU3dhcEFwcCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLFVBQVVDLFFBQVEsWUFBUixDQUFoQjs7QUFFQUMsT0FBT0MsT0FBUCxHQUFpQkgsT0FBakIiLCJmaWxlIjoic3dhcEFwcC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90Iiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU3dhcEFwcCA9IHJlcXVpcmUoJy4vbWljcm9ib3QnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN3YXBBcHBcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "swapApp.js"
      ],
      "names": [
        "SwapApp",
        "require",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,MAAMA,UAAUC,QAAQ,YAAR,CAAhB;;AAEAC,OAAOC,OAAP,GAAiBH,OAAjB",
      "file": "swapApp.js",
      "sourceRoot": "/home/pm2user/swap.bot",
      "sourcesContent": [
        "const SwapApp = require('./microbot')\n\nmodule.exports = SwapApp\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nrequire('babel-core/register');\n\nexports = module.exports = require('./app');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxRQUFRLHFCQUFSOztBQUVBQyxVQUFVQyxPQUFPRCxPQUFQLEdBQWlCRCxRQUFRLE9BQVIsQ0FBM0IiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdCIsInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJ2JhYmVsLWNvcmUvcmVnaXN0ZXInKVxuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2FwcCcpXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "require",
        "exports",
        "module"
      ],
      "mappings": ";;AAAAA,QAAQ,qBAAR;;AAEAC,UAAUC,OAAOD,OAAP,GAAiBD,QAAQ,OAAR,CAA3B",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "sourcesContent": [
        "require('babel-core/register')\n\nexports = module.exports = require('./app')\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          },
          {
            "source": "simple.swap.core",
            "imported": [
              "setup",
              "helpers",
              "constants"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "setup",
                "local": "setup"
              },
              {
                "kind": "named",
                "imported": "helpers",
                "local": "helpers"
              },
              {
                "kind": "named",
                "imported": "constants",
                "local": "constants"
              }
            ]
          },
          {
            "source": "./actions",
            "imported": [
              "handleRequest",
              "handleOrder",
              "handleError",
              "fillOrderbook",
              "startSaved"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "handleRequest",
                "local": "handleRequest"
              },
              {
                "kind": "named",
                "imported": "handleOrder",
                "local": "handleOrder"
              },
              {
                "kind": "named",
                "imported": "handleError",
                "local": "handleError"
              },
              {
                "kind": "named",
                "imported": "fillOrderbook",
                "local": "fillOrderbook"
              },
              {
                "kind": "named",
                "imported": "startSaved",
                "local": "startSaved"
              }
            ]
          },
          {
            "source": "../config/constants/TOKENS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TOKENS"
              }
            ]
          },
          {
            "source": "./lineInput",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "lineInput"
              }
            ]
          },
          {
            "source": "swap.app/util",
            "imported": [
              "erc20"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "erc20",
                "local": "erc20"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/app.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nvar _simpleSwap = require('simple.swap.core');\n\nvar _actions = require('./actions');\n\nvar _TOKENS = require('../config/constants/TOKENS');\n\nvar _TOKENS2 = _interopRequireDefault(_TOKENS);\n\nvar _lineInput = require('./lineInput');\n\nvar _lineInput2 = _interopRequireDefault(_lineInput);\n\nvar _util = require('swap.app/util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst debug = (0, _debug3.default)('swap.bot');\nconst network = process.env.NETWORK || 'testnet';\nconst { room: { ready } } = _simpleSwap.helpers;\n\n//register unkronw tokens in core\nconsole.log('Register unkrown tokens', _util.erc20);\nObject.keys(_TOKENS2.default).filter(name => !Object.keys(_simpleSwap.constants.COINS).includes(name)).map(name => {\n  _util.erc20.register(name.toLowerCase(), _TOKENS2.default[name].decimals);\n  console.log('UNKRONW TOKEN:', name);\n});\nconst ERC20TOKENS = Object.keys(_TOKENS2.default).filter(name => Object.keys(_simpleSwap.constants.COINS).includes(name)).map(name => _extends({}, _TOKENS2.default[name], {\n  name: name.toUpperCase(),\n  tokenAddress: _TOKENS2.default[name].address\n}));\n\nlet SwapApp;\n\ntry {\n\n  SwapApp = (0, _simpleSwap.setup)({ network, ERC20TOKENS });\n  const { app, auth, wallet, room, orders } = SwapApp;\n\n  ready(room).then(() => {\n    debug('room ready');\n    debug('swaps', Object.keys(app.swaps).join(','));\n\n    debug(auth.getPublicData());\n\n    _simpleSwap.helpers.history.init(app);\n    (0, _actions.startSaved)(app);\n\n    const update = () => (0, _actions.fillOrderbook)(wallet, orders);\n\n    update();\n    setInterval(update, 10 * 60 * 1000);\n\n    // orders.on('new orders', orders => orders.map(handleOrder(orders)))\n    // orders.on('new order', handleOrder(orders))\n\n    orders.on('new order request', (0, _actions.handleRequest)(app, wallet, orders));\n  });\n} catch (err) {\n  (0, _actions.handleError)(err);\n}\n\nmodule.exports = SwapApp;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJkZWJ1ZyIsIm5ldHdvcmsiLCJwcm9jZXNzIiwiZW52IiwiTkVUV09SSyIsInJvb20iLCJyZWFkeSIsImhlbHBlcnMiLCJjb25zb2xlIiwibG9nIiwiZXJjMjAiLCJPYmplY3QiLCJrZXlzIiwiVE9LRU5TIiwiZmlsdGVyIiwibmFtZSIsImNvbnN0YW50cyIsIkNPSU5TIiwiaW5jbHVkZXMiLCJtYXAiLCJyZWdpc3RlciIsInRvTG93ZXJDYXNlIiwiZGVjaW1hbHMiLCJFUkMyMFRPS0VOUyIsInRvVXBwZXJDYXNlIiwidG9rZW5BZGRyZXNzIiwiYWRkcmVzcyIsIlN3YXBBcHAiLCJhcHAiLCJhdXRoIiwid2FsbGV0Iiwib3JkZXJzIiwidGhlbiIsInN3YXBzIiwiam9pbiIsImdldFB1YmxpY0RhdGEiLCJoaXN0b3J5IiwiaW5pdCIsInVwZGF0ZSIsInNldEludGVydmFsIiwib24iLCJlcnIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFHQSxNQUFNQSxRQUFRLHFCQUFPLFVBQVAsQ0FBZDtBQUNBLE1BQU1DLFVBQVVDLFFBQVFDLEdBQVIsQ0FBWUMsT0FBWixJQUF1QixTQUF2QztBQUNBLE1BQU0sRUFBRUMsTUFBTSxFQUFFQyxLQUFGLEVBQVIsS0FBc0JDLG1CQUE1Qjs7QUFFQTtBQUNBQyxRQUFRQyxHQUFSLENBQVkseUJBQVosRUFBdUNDLFdBQXZDO0FBQ0FDLE9BQU9DLElBQVAsQ0FBWUMsZ0JBQVosRUFBb0JDLE1BQXBCLENBQTRCQyxJQUFELElBQVUsQ0FBQ0osT0FBT0MsSUFBUCxDQUFZSSxzQkFBVUMsS0FBdEIsRUFBNkJDLFFBQTdCLENBQXNDSCxJQUF0QyxDQUF0QyxFQUNHSSxHQURILENBQ1FKLElBQUQsSUFBVTtBQUNiTCxjQUFNVSxRQUFOLENBQWVMLEtBQUtNLFdBQUwsRUFBZixFQUFtQ1IsaUJBQU9FLElBQVAsRUFBYU8sUUFBaEQ7QUFDQWQsVUFBUUMsR0FBUixDQUFZLGdCQUFaLEVBQTZCTSxJQUE3QjtBQUNELENBSkg7QUFLQSxNQUFNUSxjQUFjWixPQUFPQyxJQUFQLENBQVlDLGdCQUFaLEVBQ2pCQyxNQURpQixDQUNUQyxJQUFELElBQVVKLE9BQU9DLElBQVAsQ0FBWUksc0JBQVVDLEtBQXRCLEVBQTZCQyxRQUE3QixDQUFzQ0gsSUFBdEMsQ0FEQSxFQUVqQkksR0FGaUIsQ0FFWkosSUFBRCxpQkFDQUYsaUJBQU9FLElBQVAsQ0FEQTtBQUVIQSxRQUFNQSxLQUFLUyxXQUFMLEVBRkg7QUFHSEMsZ0JBQWNaLGlCQUFPRSxJQUFQLEVBQWFXO0FBSHhCLEVBRmEsQ0FBcEI7O0FBUUEsSUFBSUMsT0FBSjs7QUFFQSxJQUFJOztBQUVGQSxZQUFVLHVCQUFNLEVBQUUxQixPQUFGLEVBQVdzQixXQUFYLEVBQU4sQ0FBVjtBQUNBLFFBQU0sRUFBRUssR0FBRixFQUFPQyxJQUFQLEVBQWFDLE1BQWIsRUFBcUJ6QixJQUFyQixFQUEyQjBCLE1BQTNCLEtBQXNDSixPQUE1Qzs7QUFFQXJCLFFBQU1ELElBQU4sRUFBWTJCLElBQVosQ0FBaUIsTUFBTTtBQUNyQmhDLFVBQU0sWUFBTjtBQUNBQSxVQUFNLE9BQU4sRUFBZVcsT0FBT0MsSUFBUCxDQUFZZ0IsSUFBSUssS0FBaEIsRUFBdUJDLElBQXZCLENBQTRCLEdBQTVCLENBQWY7O0FBRUFsQyxVQUFNNkIsS0FBS00sYUFBTCxFQUFOOztBQUVBNUIsd0JBQVE2QixPQUFSLENBQWdCQyxJQUFoQixDQUFxQlQsR0FBckI7QUFDQSw2QkFBV0EsR0FBWDs7QUFFQSxVQUFNVSxTQUFTLE1BQU0sNEJBQWNSLE1BQWQsRUFBc0JDLE1BQXRCLENBQXJCOztBQUVBTztBQUNBQyxnQkFBWUQsTUFBWixFQUFvQixLQUFLLEVBQUwsR0FBVSxJQUE5Qjs7QUFFQTtBQUNBOztBQUVBUCxXQUFPUyxFQUFQLENBQVUsbUJBQVYsRUFBK0IsNEJBQWNaLEdBQWQsRUFBbUJFLE1BQW5CLEVBQTJCQyxNQUEzQixDQUEvQjtBQUNELEdBbEJEO0FBbUJELENBeEJELENBd0JFLE9BQU9VLEdBQVAsRUFBWTtBQUNaLDRCQUFZQSxHQUFaO0FBQ0Q7O0FBRURDLE9BQU9DLE9BQVAsR0FBaUJoQixPQUFqQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVidWcgZnJvbSAnZGVidWcnXG5pbXBvcnQgeyBzZXR1cCwgaGVscGVycywgY29uc3RhbnRzIH0gZnJvbSAnc2ltcGxlLnN3YXAuY29yZSdcbmltcG9ydCB7IGhhbmRsZVJlcXVlc3QsIGhhbmRsZU9yZGVyLCBoYW5kbGVFcnJvciwgZmlsbE9yZGVyYm9vaywgc3RhcnRTYXZlZCB9IGZyb20gJy4vYWN0aW9ucydcbmltcG9ydCBUT0tFTlMgZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cy9UT0tFTlMnXG5pbXBvcnQgbGluZUlucHV0IGZyb20gJy4vbGluZUlucHV0J1xuXG5pbXBvcnQgeyBlcmMyMCB9IGZyb20gJ3N3YXAuYXBwL3V0aWwnXG5cblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3N3YXAuYm90JylcbmNvbnN0IG5ldHdvcmsgPSBwcm9jZXNzLmVudi5ORVRXT1JLIHx8ICd0ZXN0bmV0J1xuY29uc3QgeyByb29tOiB7IHJlYWR5IH0gfSA9IGhlbHBlcnNcblxuLy9yZWdpc3RlciB1bmtyb253IHRva2VucyBpbiBjb3JlXG5jb25zb2xlLmxvZygnUmVnaXN0ZXIgdW5rcm93biB0b2tlbnMnLCBlcmMyMCApXG5PYmplY3Qua2V5cyhUT0tFTlMpLmZpbHRlcigobmFtZSkgPT4gIU9iamVjdC5rZXlzKGNvbnN0YW50cy5DT0lOUykuaW5jbHVkZXMobmFtZSkpXG4gIC5tYXAoKG5hbWUpID0+IHtcbiAgICBlcmMyMC5yZWdpc3RlcihuYW1lLnRvTG93ZXJDYXNlKCksIFRPS0VOU1tuYW1lXS5kZWNpbWFscylcbiAgICBjb25zb2xlLmxvZygnVU5LUk9OVyBUT0tFTjonLG5hbWUpXG4gIH0pXG5jb25zdCBFUkMyMFRPS0VOUyA9IE9iamVjdC5rZXlzKFRPS0VOUylcbiAgLmZpbHRlcigobmFtZSkgPT4gT2JqZWN0LmtleXMoY29uc3RhbnRzLkNPSU5TKS5pbmNsdWRlcyhuYW1lKSlcbiAgLm1hcCgobmFtZSkgPT4gKHtcbiAgICAuLi5UT0tFTlNbbmFtZV0sXG4gICAgbmFtZTogbmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgIHRva2VuQWRkcmVzczogVE9LRU5TW25hbWVdLmFkZHJlc3MsXG4gIH0pKVxuXG5sZXQgU3dhcEFwcFxuXG50cnkge1xuXG4gIFN3YXBBcHAgPSBzZXR1cCh7IG5ldHdvcmssIEVSQzIwVE9LRU5TIH0pXG4gIGNvbnN0IHsgYXBwLCBhdXRoLCB3YWxsZXQsIHJvb20sIG9yZGVycyB9ID0gU3dhcEFwcFxuXG4gIHJlYWR5KHJvb20pLnRoZW4oKCkgPT4ge1xuICAgIGRlYnVnKCdyb29tIHJlYWR5JylcbiAgICBkZWJ1Zygnc3dhcHMnLCBPYmplY3Qua2V5cyhhcHAuc3dhcHMpLmpvaW4oJywnKSlcblxuICAgIGRlYnVnKGF1dGguZ2V0UHVibGljRGF0YSgpKVxuXG4gICAgaGVscGVycy5oaXN0b3J5LmluaXQoYXBwKVxuICAgIHN0YXJ0U2F2ZWQoYXBwKVxuXG4gICAgY29uc3QgdXBkYXRlID0gKCkgPT4gZmlsbE9yZGVyYm9vayh3YWxsZXQsIG9yZGVycylcblxuICAgIHVwZGF0ZSgpXG4gICAgc2V0SW50ZXJ2YWwodXBkYXRlLCAxMCAqIDYwICogMTAwMClcblxuICAgIC8vIG9yZGVycy5vbignbmV3IG9yZGVycycsIG9yZGVycyA9PiBvcmRlcnMubWFwKGhhbmRsZU9yZGVyKG9yZGVycykpKVxuICAgIC8vIG9yZGVycy5vbignbmV3IG9yZGVyJywgaGFuZGxlT3JkZXIob3JkZXJzKSlcblxuICAgIG9yZGVycy5vbignbmV3IG9yZGVyIHJlcXVlc3QnLCBoYW5kbGVSZXF1ZXN0KGFwcCwgd2FsbGV0LCBvcmRlcnMpKVxuICB9KVxufSBjYXRjaCAoZXJyKSB7XG4gIGhhbmRsZUVycm9yKGVycilcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTd2FwQXBwXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "debug",
        "network",
        "process",
        "env",
        "NETWORK",
        "room",
        "ready",
        "helpers",
        "console",
        "log",
        "erc20",
        "Object",
        "keys",
        "TOKENS",
        "filter",
        "name",
        "constants",
        "COINS",
        "includes",
        "map",
        "register",
        "toLowerCase",
        "decimals",
        "ERC20TOKENS",
        "toUpperCase",
        "tokenAddress",
        "address",
        "SwapApp",
        "app",
        "auth",
        "wallet",
        "orders",
        "then",
        "swaps",
        "join",
        "getPublicData",
        "history",
        "init",
        "update",
        "setInterval",
        "on",
        "err",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA;;;;AACA;;AACA;;AACA;;;;AACA;;;;AAEA;;;;AAGA,MAAMA,QAAQ,qBAAO,UAAP,CAAd;AACA,MAAMC,UAAUC,QAAQC,GAAR,CAAYC,OAAZ,IAAuB,SAAvC;AACA,MAAM,EAAEC,MAAM,EAAEC,KAAF,EAAR,KAAsBC,mBAA5B;;AAEA;AACAC,QAAQC,GAAR,CAAY,yBAAZ,EAAuCC,WAAvC;AACAC,OAAOC,IAAP,CAAYC,gBAAZ,EAAoBC,MAApB,CAA4BC,IAAD,IAAU,CAACJ,OAAOC,IAAP,CAAYI,sBAAUC,KAAtB,EAA6BC,QAA7B,CAAsCH,IAAtC,CAAtC,EACGI,GADH,CACQJ,IAAD,IAAU;AACbL,cAAMU,QAAN,CAAeL,KAAKM,WAAL,EAAf,EAAmCR,iBAAOE,IAAP,EAAaO,QAAhD;AACAd,UAAQC,GAAR,CAAY,gBAAZ,EAA6BM,IAA7B;AACD,CAJH;AAKA,MAAMQ,cAAcZ,OAAOC,IAAP,CAAYC,gBAAZ,EACjBC,MADiB,CACTC,IAAD,IAAUJ,OAAOC,IAAP,CAAYI,sBAAUC,KAAtB,EAA6BC,QAA7B,CAAsCH,IAAtC,CADA,EAEjBI,GAFiB,CAEZJ,IAAD,iBACAF,iBAAOE,IAAP,CADA;AAEHA,QAAMA,KAAKS,WAAL,EAFH;AAGHC,gBAAcZ,iBAAOE,IAAP,EAAaW;AAHxB,EAFa,CAApB;;AAQA,IAAIC,OAAJ;;AAEA,IAAI;;AAEFA,YAAU,uBAAM,EAAE1B,OAAF,EAAWsB,WAAX,EAAN,CAAV;AACA,QAAM,EAAEK,GAAF,EAAOC,IAAP,EAAaC,MAAb,EAAqBzB,IAArB,EAA2B0B,MAA3B,KAAsCJ,OAA5C;;AAEArB,QAAMD,IAAN,EAAY2B,IAAZ,CAAiB,MAAM;AACrBhC,UAAM,YAAN;AACAA,UAAM,OAAN,EAAeW,OAAOC,IAAP,CAAYgB,IAAIK,KAAhB,EAAuBC,IAAvB,CAA4B,GAA5B,CAAf;;AAEAlC,UAAM6B,KAAKM,aAAL,EAAN;;AAEA5B,wBAAQ6B,OAAR,CAAgBC,IAAhB,CAAqBT,GAArB;AACA,6BAAWA,GAAX;;AAEA,UAAMU,SAAS,MAAM,4BAAcR,MAAd,EAAsBC,MAAtB,CAArB;;AAEAO;AACAC,gBAAYD,MAAZ,EAAoB,KAAK,EAAL,GAAU,IAA9B;;AAEA;AACA;;AAEAP,WAAOS,EAAP,CAAU,mBAAV,EAA+B,4BAAcZ,GAAd,EAAmBE,MAAnB,EAA2BC,MAA3B,CAA/B;AACD,GAlBD;AAmBD,CAxBD,CAwBE,OAAOU,GAAP,EAAY;AACZ,4BAAYA,GAAZ;AACD;;AAEDC,OAAOC,OAAP,GAAiBhB,OAAjB",
      "file": "app.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "sourcesContent": [
        "import _debug from 'debug'\nimport { setup, helpers, constants } from 'simple.swap.core'\nimport { handleRequest, handleOrder, handleError, fillOrderbook, startSaved } from './actions'\nimport TOKENS from '../config/constants/TOKENS'\nimport lineInput from './lineInput'\n\nimport { erc20 } from 'swap.app/util'\n\n\nconst debug = _debug('swap.bot')\nconst network = process.env.NETWORK || 'testnet'\nconst { room: { ready } } = helpers\n\n//register unkronw tokens in core\nconsole.log('Register unkrown tokens', erc20 )\nObject.keys(TOKENS).filter((name) => !Object.keys(constants.COINS).includes(name))\n  .map((name) => {\n    erc20.register(name.toLowerCase(), TOKENS[name].decimals)\n    console.log('UNKRONW TOKEN:',name)\n  })\nconst ERC20TOKENS = Object.keys(TOKENS)\n  .filter((name) => Object.keys(constants.COINS).includes(name))\n  .map((name) => ({\n    ...TOKENS[name],\n    name: name.toUpperCase(),\n    tokenAddress: TOKENS[name].address,\n  }))\n\nlet SwapApp\n\ntry {\n\n  SwapApp = setup({ network, ERC20TOKENS })\n  const { app, auth, wallet, room, orders } = SwapApp\n\n  ready(room).then(() => {\n    debug('room ready')\n    debug('swaps', Object.keys(app.swaps).join(','))\n\n    debug(auth.getPublicData())\n\n    helpers.history.init(app)\n    startSaved(app)\n\n    const update = () => fillOrderbook(wallet, orders)\n\n    update()\n    setInterval(update, 10 * 60 * 1000)\n\n    // orders.on('new orders', orders => orders.map(handleOrder(orders)))\n    // orders.on('new order', handleOrder(orders))\n\n    orders.on('new order request', handleRequest(app, wallet, orders))\n  })\n} catch (err) {\n  handleError(err)\n}\n\nmodule.exports = SwapApp\n"
      ]
    },
    "mtime": 1579021505000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "handleError",
            "startSaved",
            "handleKeyboardInput",
            "fillOrderbook",
            "handleRequest",
            "handleOrder"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "handleError",
              "exported": "handleError",
              "source": "../../app/actions/errors/handleError"
            },
            {
              "kind": "external",
              "local": "startSaved",
              "exported": "startSaved",
              "source": "./book/startSaved"
            },
            {
              "kind": "external",
              "local": "handleKeyboardInput",
              "exported": "handleKeyboardInput",
              "source": "./book/handleKeyboardInput"
            },
            {
              "kind": "external",
              "local": "fillOrderbook",
              "exported": "fillOrderbook",
              "source": "./book/fillOrderbook"
            },
            {
              "kind": "external",
              "local": "handleRequest",
              "exported": "handleRequest",
              "source": "./incoming/handleRequest"
            },
            {
              "kind": "external",
              "local": "handleOrder",
              "exported": "handleOrder",
              "source": "./outcoming/handleOrder"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.handleOrder = exports.handleRequest = exports.fillOrderbook = exports.handleKeyboardInput = exports.startSaved = exports.handleError = undefined;\n\nvar _handleError2 = require('../../app/actions/errors/handleError');\n\nvar _handleError3 = _interopRequireDefault(_handleError2);\n\nvar _startSaved2 = require('./book/startSaved');\n\nvar _startSaved3 = _interopRequireDefault(_startSaved2);\n\nvar _handleKeyboardInput2 = require('./book/handleKeyboardInput');\n\nvar _handleKeyboardInput3 = _interopRequireDefault(_handleKeyboardInput2);\n\nvar _fillOrderbook2 = require('./book/fillOrderbook');\n\nvar _fillOrderbook3 = _interopRequireDefault(_fillOrderbook2);\n\nvar _handleRequest2 = require('./incoming/handleRequest');\n\nvar _handleRequest3 = _interopRequireDefault(_handleRequest2);\n\nvar _handleOrder2 = require('./outcoming/handleOrder');\n\nvar _handleOrder3 = _interopRequireDefault(_handleOrder2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.handleError = _handleError3.default;\nexports.startSaved = _startSaved3.default;\nexports.handleKeyboardInput = _handleKeyboardInput3.default;\nexports.fillOrderbook = _fillOrderbook3.default;\nexports.handleRequest = _handleRequest3.default;\nexports.handleOrder = _handleOrder3.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImhhbmRsZUVycm9yIiwic3RhcnRTYXZlZCIsImhhbmRsZUtleWJvYXJkSW5wdXQiLCJmaWxsT3JkZXJib29rIiwiaGFuZGxlUmVxdWVzdCIsImhhbmRsZU9yZGVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7UUFBT0EsVztRQUVBQyxVO1FBQ0FDLG1CO1FBQ0FDLGE7UUFHQUMsYTtRQUNBQyxXIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBoYW5kbGVFcnJvciBmcm9tICcuLi8uLi9hcHAvYWN0aW9ucy9lcnJvcnMvaGFuZGxlRXJyb3InXG5cbmV4cG9ydCBzdGFydFNhdmVkIGZyb20gJy4vYm9vay9zdGFydFNhdmVkJ1xuZXhwb3J0IGhhbmRsZUtleWJvYXJkSW5wdXQgZnJvbSAnLi9ib29rL2hhbmRsZUtleWJvYXJkSW5wdXQnXG5leHBvcnQgZmlsbE9yZGVyYm9vayBmcm9tICcuL2Jvb2svZmlsbE9yZGVyYm9vaydcblxuXG5leHBvcnQgaGFuZGxlUmVxdWVzdCBmcm9tICcuL2luY29taW5nL2hhbmRsZVJlcXVlc3QnXG5leHBvcnQgaGFuZGxlT3JkZXIgZnJvbSAnLi9vdXRjb21pbmcvaGFuZGxlT3JkZXInXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "handleError",
        "startSaved",
        "handleKeyboardInput",
        "fillOrderbook",
        "handleRequest",
        "handleOrder"
      ],
      "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAAOA,W;QAEAC,U;QACAC,mB;QACAC,a;QAGAC,a;QACAC,W",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions",
      "sourcesContent": [
        "export handleError from '../../app/actions/errors/handleError'\n\nexport startSaved from './book/startSaved'\nexport handleKeyboardInput from './book/handleKeyboardInput'\nexport fillOrderbook from './book/fillOrderbook'\n\n\nexport handleRequest from './incoming/handleRequest'\nexport handleOrder from './outcoming/handleOrder'\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/app/actions/errors/handleError.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/app/actions/errors\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "objectWithoutProperties"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/app/actions/errors/handleError.js",
      "filenameRelative": "/home/pm2user/swap.bot/app/actions/errors/handleError.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handleError.js",
      "sourceFileName": "handleError.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handleError"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n// outputs?\n\nexports.default = (_ref) => {\n  let { name, message } = _ref,\n      other = _objectWithoutProperties(_ref, [\"name\", \"message\"]);\n\n  console.error(name, message, other);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZUVycm9yLmpzIl0sIm5hbWVzIjpbIm5hbWUiLCJtZXNzYWdlIiwib3RoZXIiLCJjb25zb2xlIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O2tCQUVlLFVBQWlDO0FBQUEsTUFBaEMsRUFBRUEsSUFBRixFQUFRQyxPQUFSLEVBQWdDO0FBQUEsTUFBWkMsS0FBWTs7QUFDOUNDLFVBQVFDLEtBQVIsQ0FBY0osSUFBZCxFQUFvQkMsT0FBcEIsRUFBNkJDLEtBQTdCO0FBQ0QsQyIsImZpbGUiOiJoYW5kbGVFcnJvci5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L2FwcC9hY3Rpb25zL2Vycm9ycyIsInNvdXJjZXNDb250ZW50IjpbIi8vIG91dHB1dHM/XG5cbmV4cG9ydCBkZWZhdWx0ICh7IG5hbWUsIG1lc3NhZ2UsIC4uLm90aGVyIH0pID0+IHtcbiAgY29uc29sZS5lcnJvcihuYW1lLCBtZXNzYWdlLCBvdGhlcilcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handleError.js"
      ],
      "names": [
        "name",
        "message",
        "other",
        "console",
        "error"
      ],
      "mappings": ";;;;;;;;AAAA;;kBAEe,UAAiC;AAAA,MAAhC,EAAEA,IAAF,EAAQC,OAAR,EAAgC;AAAA,MAAZC,KAAY;;AAC9CC,UAAQC,KAAR,CAAcJ,IAAd,EAAoBC,OAApB,EAA6BC,KAA7B;AACD,C",
      "file": "handleError.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "sourcesContent": [
        "// outputs?\n\nexport default ({ name, message, ...other }) => {\n  console.error(name, message, other)\n}\n"
      ]
    },
    "mtime": 1571923091178
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/book/startSaved.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/book\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          },
          {
            "source": "../../core/history",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "history"
              }
            ]
          },
          {
            "source": "../start/beginSwap",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "beginSwap"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/book/startSaved.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/book/startSaved.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "startSaved.js",
      "sourceFileName": "startSaved.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "startSaved"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nvar _history = require('../../core/history');\n\nvar _history2 = _interopRequireDefault(_history);\n\nvar _beginSwap = require('../start/beginSwap');\n\nvar _beginSwap2 = _interopRequireDefault(_beginSwap);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst debug = (0, _debug3.default)('swap.bot:history');\n\nexports.default = (() => {\n  var _ref = _asyncToGenerator(function* (app) {\n\n    const processing = _history2.default.getAllInProgress();\n\n    debug('[SAVED]: ', processing.join(','));\n\n    const shouldStart = process.env.START_SAVED != \"disable\";\n    debug('[SAVED]: will start all =', shouldStart);\n    const beginSwaps = (shouldStart ? processing : []).map(function (id) {\n      return new Promise(function (resolve) {\n        return (0, _beginSwap2.default)(app, { id }, resolve);\n      });\n    });\n\n    const swaps = Promise.all(beginSwaps);\n\n    return swaps;\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXJ0U2F2ZWQuanMiXSwibmFtZXMiOlsiZGVidWciLCJhcHAiLCJwcm9jZXNzaW5nIiwiaGlzdG9yeSIsImdldEFsbEluUHJvZ3Jlc3MiLCJqb2luIiwic2hvdWxkU3RhcnQiLCJwcm9jZXNzIiwiZW52IiwiU1RBUlRfU0FWRUQiLCJiZWdpblN3YXBzIiwibWFwIiwiUHJvbWlzZSIsImlkIiwicmVzb2x2ZSIsInN3YXBzIiwiYWxsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUVBOzs7O0FBQ0E7Ozs7Ozs7O0FBRUEsTUFBTUEsUUFBUSxxQkFBTyxrQkFBUCxDQUFkOzs7K0JBRWUsV0FBT0MsR0FBUCxFQUFlOztBQUU1QixVQUFNQyxhQUFhQyxrQkFBUUMsZ0JBQVIsRUFBbkI7O0FBRUFKLFVBQU0sV0FBTixFQUFtQkUsV0FBV0csSUFBWCxDQUFnQixHQUFoQixDQUFuQjs7QUFFQSxVQUFNQyxjQUFjQyxRQUFRQyxHQUFSLENBQVlDLFdBQVosSUFBMkIsU0FBL0M7QUFDQVQsVUFBTSwyQkFBTixFQUFtQ00sV0FBbkM7QUFDQSxVQUFNSSxhQUFhLENBQUNKLGNBQWNKLFVBQWQsR0FBMkIsRUFBNUIsRUFDaEJTLEdBRGdCLENBQ1o7QUFBQSxhQUFNLElBQUlDLE9BQUosQ0FBWTtBQUFBLGVBQVcseUJBQVVYLEdBQVYsRUFBZSxFQUFFWSxFQUFGLEVBQWYsRUFBdUJDLE9BQXZCLENBQVg7QUFBQSxPQUFaLENBQU47QUFBQSxLQURZLENBQW5COztBQUdBLFVBQU1DLFFBQVFILFFBQVFJLEdBQVIsQ0FBWU4sVUFBWixDQUFkOztBQUVBLFdBQU9LLEtBQVA7QUFDRCxHIiwiZmlsZSI6InN0YXJ0U2F2ZWQuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9hY3Rpb25zL2Jvb2siLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgX2RlYnVnIGZyb20gJ2RlYnVnJ1xuXG5pbXBvcnQgaGlzdG9yeSBmcm9tICcuLi8uLi9jb3JlL2hpc3RvcnknXG5pbXBvcnQgYmVnaW5Td2FwIGZyb20gJy4uL3N0YXJ0L2JlZ2luU3dhcCdcblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3N3YXAuYm90Omhpc3RvcnknKVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAoYXBwKSA9PiB7XG5cbiAgY29uc3QgcHJvY2Vzc2luZyA9IGhpc3RvcnkuZ2V0QWxsSW5Qcm9ncmVzcygpXG5cbiAgZGVidWcoJ1tTQVZFRF06ICcsIHByb2Nlc3Npbmcuam9pbignLCcpKVxuXG4gIGNvbnN0IHNob3VsZFN0YXJ0ID0gcHJvY2Vzcy5lbnYuU1RBUlRfU0FWRUQgIT0gXCJkaXNhYmxlXCJcbiAgZGVidWcoJ1tTQVZFRF06IHdpbGwgc3RhcnQgYWxsID0nLCBzaG91bGRTdGFydClcbiAgY29uc3QgYmVnaW5Td2FwcyA9IChzaG91bGRTdGFydCA/IHByb2Nlc3NpbmcgOiBbXSlcbiAgICAubWFwKGlkID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gYmVnaW5Td2FwKGFwcCwgeyBpZCB9LCByZXNvbHZlKSkpXG5cbiAgY29uc3Qgc3dhcHMgPSBQcm9taXNlLmFsbChiZWdpblN3YXBzKVxuXG4gIHJldHVybiBzd2Fwc1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "startSaved.js"
      ],
      "names": [
        "debug",
        "app",
        "processing",
        "history",
        "getAllInProgress",
        "join",
        "shouldStart",
        "process",
        "env",
        "START_SAVED",
        "beginSwaps",
        "map",
        "Promise",
        "id",
        "resolve",
        "swaps",
        "all"
      ],
      "mappings": ";;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;;;AAEA,MAAMA,QAAQ,qBAAO,kBAAP,CAAd;;;+BAEe,WAAOC,GAAP,EAAe;;AAE5B,UAAMC,aAAaC,kBAAQC,gBAAR,EAAnB;;AAEAJ,UAAM,WAAN,EAAmBE,WAAWG,IAAX,CAAgB,GAAhB,CAAnB;;AAEA,UAAMC,cAAcC,QAAQC,GAAR,CAAYC,WAAZ,IAA2B,SAA/C;AACAT,UAAM,2BAAN,EAAmCM,WAAnC;AACA,UAAMI,aAAa,CAACJ,cAAcJ,UAAd,GAA2B,EAA5B,EAChBS,GADgB,CACZ;AAAA,aAAM,IAAIC,OAAJ,CAAY;AAAA,eAAW,yBAAUX,GAAV,EAAe,EAAEY,EAAF,EAAf,EAAuBC,OAAvB,CAAX;AAAA,OAAZ,CAAN;AAAA,KADY,CAAnB;;AAGA,UAAMC,QAAQH,QAAQI,GAAR,CAAYN,UAAZ,CAAd;;AAEA,WAAOK,KAAP;AACD,G",
      "file": "startSaved.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "sourcesContent": [
        "import _debug from 'debug'\n\nimport history from '../../core/history'\nimport beginSwap from '../start/beginSwap'\n\nconst debug = _debug('swap.bot:history')\n\nexport default async (app) => {\n\n  const processing = history.getAllInProgress()\n\n  debug('[SAVED]: ', processing.join(','))\n\n  const shouldStart = process.env.START_SAVED != \"disable\"\n  debug('[SAVED]: will start all =', shouldStart)\n  const beginSwaps = (shouldStart ? processing : [])\n    .map(id => new Promise(resolve => beginSwap(app, { id }, resolve)))\n\n  const swaps = Promise.all(beginSwaps)\n\n  return swaps\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/history.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "simple.swap.core",
            "imported": [
              "helpers"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "helpers",
                "local": "helpers"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/history.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/history.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "history.js",
      "sourceFileName": "history.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "history"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _simpleSwap = require('simple.swap.core');\n\nconst { history } = _simpleSwap.helpers;\n\nexports.default = history;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhpc3RvcnkuanMiXSwibmFtZXMiOlsiaGlzdG9yeSIsImhlbHBlcnMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUVBLE1BQU0sRUFBRUEsT0FBRixLQUFjQyxtQkFBcEI7O2tCQUVlRCxPIiwiZmlsZSI6Imhpc3RvcnkuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9jb3JlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGVscGVycyB9IGZyb20gJ3NpbXBsZS5zd2FwLmNvcmUnXG5cbmNvbnN0IHsgaGlzdG9yeSB9ID0gaGVscGVyc1xuXG5leHBvcnQgZGVmYXVsdCBoaXN0b3J5XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "history.js"
      ],
      "names": [
        "history",
        "helpers"
      ],
      "mappings": ";;;;;;AAAA;;AAEA,MAAM,EAAEA,OAAF,KAAcC,mBAApB;;kBAEeD,O",
      "file": "history.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "import { helpers } from 'simple.swap.core'\n\nconst { history } = helpers\n\nexport default history\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/start/beginSwap.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/start\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../core/beginSwap",
            "imported": [
              "get",
              "start"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "start",
                "local": "start"
              }
            ]
          },
          {
            "source": "../../core/history",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "history"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleSwapError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleSwapError"
              }
            ]
          },
          {
            "source": "../../../services/instances/kraken",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "kraken"
              }
            ]
          },
          {
            "source": "../../Pair",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Pair"
              }
            ]
          },
          {
            "source": "./swapStatus",
            "imported": [
              "canBeDeleted",
              "needsRefund"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "canBeDeleted",
                "local": "canBeDeleted"
              },
              {
                "kind": "named",
                "imported": "needsRefund",
                "local": "needsRefund"
              }
            ]
          },
          {
            "source": "../swap-flow",
            "imported": [
              "BTC2ETHFlow",
              "ETH2BTCFlow"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "BTC2ETHFlow",
                "local": "BTC2ETHFlow"
              },
              {
                "kind": "named",
                "imported": "ETH2BTCFlow",
                "local": "ETH2BTCFlow"
              }
            ]
          },
          {
            "source": "request-promise-cache",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "request"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/start/beginSwap.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/start/beginSwap.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "beginSwap.js",
      "sourceFileName": "beginSwap.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "beginSwap"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _beginSwap = require('../../core/beginSwap');\n\nvar _history = require('../../core/history');\n\nvar _history2 = _interopRequireDefault(_history);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _handleSwapError = require('../../../app/actions/errors/handleSwapError');\n\nvar _handleSwapError2 = _interopRequireDefault(_handleSwapError);\n\nvar _kraken = require('../../../services/instances/kraken');\n\nvar _kraken2 = _interopRequireDefault(_kraken);\n\nvar _Pair = require('../../Pair');\n\nvar _Pair2 = _interopRequireDefault(_Pair);\n\nvar _swapStatus = require('./swapStatus');\n\nvar _swapFlow = require('../swap-flow');\n\nvar _requestPromiseCache = require('request-promise-cache');\n\nvar _requestPromiseCache2 = _interopRequireDefault(_requestPromiseCache);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; } // import Error from './error'\n// import ReportState from './state'\n\nexports.default = (app, { id }, callback) => {\n  let swap;\n  console.log(new Date().toISOString(), `begin swap ${id}`);\n  try {\n    swap = (0, _beginSwap.get)(app, id);\n\n    _history2.default.saveInProgress(swap.id);\n\n    callback(swap);\n\n    const flowName = swap.flow._flowName;\n\n    console.log(swap.flow._flowName);\n    //    const main = swap.flow.getFromName()\n    //    const base = swap.flow.getToName()\n\n    //    console.log(new Date().toISOString(), `Swap type: ${main} to ${base}`)\n    const [main, base] = flowName.split('2');\n\n    //console.log(swap.flow.getToName(),swap.flow.getFromName())\n    if (!main || !base) {\n      throw new Error(`Cannot parse flow: ${flowName} ?= ${main}2${base}`);\n    }\n\n    const goFlow = main === 'BTC' || main === 'BCH' ? _swapFlow.BTC2ETHFlow : _swapFlow.ETH2BTCFlow;\n\n    console.log(new Date().toISOString(), `started ${main}2${base} ${swap.id} ${goFlow.name}`);\n\n    swap.on('enter step', step => {\n      console.log(new Date().toISOString(), '[SWAP ' + swap.id + '] enter step', step);\n\n      if (step >= 2) {\n        const swapInfo = 'swap step ' + step + ' buy ' + swap.buyCurrency + ' ' + swap.buyAmount.toString() + ' sell ' + swap.sellCurrency + ' ' + swap.sellAmount.toString();\n        const infoURL = 'https://api.telegram.org/bot549901307:AAESgRxDwq9hl0f-rh0SVp0HvXjh3Njvgqs/sendmessage?parse_mode=HTML&chat_id=29165285&text=' + encodeURIComponent(swapInfo);\n\n        (0, _requestPromiseCache2.default)(infoURL).then(ret => console.log(ret));\n      }\n      // https://api.telegram.org/bot549901307:AAESgRxDwq9hl0f-rh0SVp0HvXjh3Njvgqs/sendmessage?parse_mode=HTML&chat_id=29165285&text=urlencode(\"swap step 2, 0.001 BTC\")\n      const { ticker } = _Pair2.default.fromOrder(swap);\n\n      if (step === 2) {\n        if (ticker === 'GHOST2BTC') {\n          // set destination wallet\n          swap.setDestinationBuyAddress('16BZguAz5U6QVxu1Nan6adWRoPxzQfG464');\n        }\n      }\n\n      if (swap.flow.state.isFinished) {\n        if (ticker === 'ETH-BTC') {\n          _kraken2.default.createOrder(pair.amount.div(pair.price).toNumber(), pair.isBid() ? 'sell' : 'buy');\n        }\n      }\n    });\n\n    const update = (() => {\n      var _ref = _asyncToGenerator(function* () {\n\n        if (yield (0, _swapStatus.canBeDeleted)(swap)) {\n          console.log(new Date().toISOString(), `swap finished! remove ${swap.id}`);\n          _history2.default.removeInProgress(swap.id);\n          _history2.default.saveFinished(swap.id);\n          return clearInterval(update);\n        }\n\n        if ((0, _swapStatus.needsRefund)(swap)) {\n          console.log(new Date().toISOString(), `swap needs refund: ${swap.id}, trying...`);\n          const result = yield swap.flow.tryRefund();\n          console.log(new Date().toISOString(), `swap refund:`, result);\n          return setTimeout(update, 5000);\n        } else {\n          console.log(new Date().toISOString(), `swap does not need refund: ${swap.id}`);\n        }\n\n        try {\n          goFlow(swap);\n        } catch (error) {\n          (0, _handleSwapError2.default)(swap, error);\n\n          const { name, message } = error;\n          console.error(new Date().toISOString(), `[${swap.id}]: `, name, message);\n        } finally {\n          setTimeout(update, 5000);\n        }\n      });\n\n      return function update() {\n        return _ref.apply(this, arguments);\n      };\n    })();\n\n    setTimeout(update, 0);\n  } catch (err) {\n    console.error(new Date().toISOString(), `[ERROR] swap id=${swap && swap.id} step=${swap && swap.flow.state.step}`);\n\n    return (0, _handleError2.default)(err);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJlZ2luU3dhcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJpZCIsImNhbGxiYWNrIiwic3dhcCIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJoaXN0b3J5Iiwic2F2ZUluUHJvZ3Jlc3MiLCJmbG93TmFtZSIsImZsb3ciLCJfZmxvd05hbWUiLCJtYWluIiwiYmFzZSIsInNwbGl0IiwiRXJyb3IiLCJnb0Zsb3ciLCJCVEMyRVRIRmxvdyIsIkVUSDJCVENGbG93IiwibmFtZSIsIm9uIiwic3RlcCIsInN3YXBJbmZvIiwiYnV5Q3VycmVuY3kiLCJidXlBbW91bnQiLCJ0b1N0cmluZyIsInNlbGxDdXJyZW5jeSIsInNlbGxBbW91bnQiLCJpbmZvVVJMIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGhlbiIsInJldCIsInRpY2tlciIsIlBhaXIiLCJmcm9tT3JkZXIiLCJzZXREZXN0aW5hdGlvbkJ1eUFkZHJlc3MiLCJzdGF0ZSIsImlzRmluaXNoZWQiLCJrcmFrZW4iLCJjcmVhdGVPcmRlciIsInBhaXIiLCJhbW91bnQiLCJkaXYiLCJwcmljZSIsInRvTnVtYmVyIiwiaXNCaWQiLCJ1cGRhdGUiLCJyZW1vdmVJblByb2dyZXNzIiwic2F2ZUZpbmlzaGVkIiwiY2xlYXJJbnRlcnZhbCIsInJlc3VsdCIsInRyeVJlZnVuZCIsInNldFRpbWVvdXQiLCJlcnJvciIsIm1lc3NhZ2UiLCJlcnIiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFFQTs7QUFDQTs7Ozs7OzJjQVpBO0FBQ0E7O2tCQWNlLENBQUNBLEdBQUQsRUFBTSxFQUFFQyxFQUFGLEVBQU4sRUFBY0MsUUFBZCxLQUEyQjtBQUN4QyxNQUFJQyxJQUFKO0FBQ0FDLFVBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxjQUFhTixFQUFHLEVBQXZEO0FBQ0EsTUFBSTtBQUNGRSxXQUFPLG9CQUFJSCxHQUFKLEVBQVNDLEVBQVQsQ0FBUDs7QUFFQU8sc0JBQVFDLGNBQVIsQ0FBdUJOLEtBQUtGLEVBQTVCOztBQUVBQyxhQUFTQyxJQUFUOztBQUVBLFVBQU1PLFdBQVdQLEtBQUtRLElBQUwsQ0FBVUMsU0FBM0I7O0FBRUpSLFlBQVFDLEdBQVIsQ0FBWUYsS0FBS1EsSUFBTCxDQUFVQyxTQUF0QjtBQUNBO0FBQ0E7O0FBRUE7QUFDSSxVQUFNLENBQUVDLElBQUYsRUFBUUMsSUFBUixJQUFpQkosU0FBU0ssS0FBVCxDQUFlLEdBQWYsQ0FBdkI7O0FBRUo7QUFDSSxRQUFJLENBQUNGLElBQUQsSUFBUyxDQUFDQyxJQUFkLEVBQW9CO0FBQ2xCLFlBQU0sSUFBSUUsS0FBSixDQUFXLHNCQUFxQk4sUUFBUyxPQUFNRyxJQUFLLElBQUdDLElBQUssRUFBNUQsQ0FBTjtBQUNEOztBQUVELFVBQU1HLFNBQVVKLFNBQVMsS0FBVCxJQUFrQkEsU0FBUyxLQUE1QixHQUFxQ0sscUJBQXJDLEdBQW1EQyxxQkFBbEU7O0FBRUFmLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxXQUFVTSxJQUFLLElBQUdDLElBQUssSUFBR1gsS0FBS0YsRUFBRyxJQUFHZ0IsT0FBT0csSUFBSyxFQUF4Rjs7QUFHQWpCLFNBQUtrQixFQUFMLENBQVEsWUFBUixFQUFzQkMsUUFBUTtBQUM1QmxCLGNBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxXQUFXSixLQUFLRixFQUFoQixHQUFxQixjQUEzRCxFQUEyRXFCLElBQTNFOztBQUVBLFVBQUlBLFFBQVEsQ0FBWixFQUFlO0FBQ2IsY0FBTUMsV0FBVyxlQUFhRCxJQUFiLEdBQWtCLE9BQWxCLEdBQTBCbkIsS0FBS3FCLFdBQS9CLEdBQTJDLEdBQTNDLEdBQStDckIsS0FBS3NCLFNBQUwsQ0FBZUMsUUFBZixFQUEvQyxHQUEwRSxRQUExRSxHQUFtRnZCLEtBQUt3QixZQUF4RixHQUFxRyxHQUFyRyxHQUEyR3hCLEtBQUt5QixVQUFMLENBQWdCRixRQUFoQixFQUE1SDtBQUNBLGNBQU1HLFVBQVUsaUlBQStIQyxtQkFBbUJQLFFBQW5CLENBQS9JOztBQUVBLDJDQUFRTSxPQUFSLEVBQWlCRSxJQUFqQixDQUF1QkMsT0FBTzVCLFFBQVFDLEdBQVIsQ0FBWTJCLEdBQVosQ0FBOUI7QUFDRDtBQUNQO0FBQ00sWUFBTSxFQUFFQyxNQUFGLEtBQWFDLGVBQUtDLFNBQUwsQ0FBZWhDLElBQWYsQ0FBbkI7O0FBRUEsVUFBSW1CLFNBQVMsQ0FBYixFQUFnQjtBQUNkLFlBQUlXLFdBQVcsV0FBZixFQUE0QjtBQUMxQjtBQUNBOUIsZUFBS2lDLHdCQUFMLENBQThCLG9DQUE5QjtBQUNEO0FBQ0Y7O0FBRUQsVUFBSWpDLEtBQUtRLElBQUwsQ0FBVTBCLEtBQVYsQ0FBZ0JDLFVBQXBCLEVBQWdDO0FBQzlCLFlBQUlMLFdBQVcsU0FBZixFQUEwQjtBQUN4Qk0sMkJBQU9DLFdBQVAsQ0FBbUJDLEtBQUtDLE1BQUwsQ0FBWUMsR0FBWixDQUFnQkYsS0FBS0csS0FBckIsRUFBNEJDLFFBQTVCLEVBQW5CLEVBQTJESixLQUFLSyxLQUFMLEtBQWUsTUFBZixHQUF3QixLQUFuRjtBQUNEO0FBQ0Y7QUFFRixLQXpCRDs7QUEyQkEsVUFBTUM7QUFBQSxtQ0FBUyxhQUFZOztBQUV6QixZQUFJLE1BQU0sOEJBQWE1QyxJQUFiLENBQVYsRUFBOEI7QUFDNUJDLGtCQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBdUMseUJBQXdCSixLQUFLRixFQUFHLEVBQXZFO0FBQ0FPLDRCQUFRd0MsZ0JBQVIsQ0FBeUI3QyxLQUFLRixFQUE5QjtBQUNBTyw0QkFBUXlDLFlBQVIsQ0FBcUI5QyxLQUFLRixFQUExQjtBQUNBLGlCQUFPaUQsY0FBY0gsTUFBZCxDQUFQO0FBQ0Q7O0FBRUQsWUFBSSw2QkFBWTVDLElBQVosQ0FBSixFQUF1QjtBQUNyQkMsa0JBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxzQkFBcUJKLEtBQUtGLEVBQUcsYUFBcEU7QUFDQSxnQkFBTWtELFNBQVMsTUFBTWhELEtBQUtRLElBQUwsQ0FBVXlDLFNBQVYsRUFBckI7QUFDQWhELGtCQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBdUMsY0FBdkMsRUFBc0Q0QyxNQUF0RDtBQUNBLGlCQUFPRSxXQUFXTixNQUFYLEVBQW1CLElBQW5CLENBQVA7QUFDRCxTQUxELE1BS087QUFDTDNDLGtCQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBdUMsOEJBQTZCSixLQUFLRixFQUFHLEVBQTVFO0FBQ0Q7O0FBRUQsWUFBSTtBQUNGZ0IsaUJBQU9kLElBQVA7QUFDRCxTQUZELENBRUUsT0FBT21ELEtBQVAsRUFBYztBQUNkLHlDQUFnQm5ELElBQWhCLEVBQXNCbUQsS0FBdEI7O0FBRUEsZ0JBQU0sRUFBRWxDLElBQUYsRUFBUW1DLE9BQVIsS0FBb0JELEtBQTFCO0FBQ0FsRCxrQkFBUWtELEtBQVIsQ0FBYyxJQUFJaEQsSUFBSixHQUFXQyxXQUFYLEVBQWQsRUFBeUMsSUFBR0osS0FBS0YsRUFBRyxLQUFwRCxFQUEwRG1CLElBQTFELEVBQWdFbUMsT0FBaEU7QUFDRCxTQVBELFNBT1U7QUFDUkYscUJBQVdOLE1BQVgsRUFBbUIsSUFBbkI7QUFDRDtBQUVGLE9BN0JLOztBQUFBO0FBQUE7QUFBQTtBQUFBLFFBQU47O0FBK0JBTSxlQUFXTixNQUFYLEVBQW1CLENBQW5CO0FBRUQsR0F0RkQsQ0FzRkUsT0FBT1MsR0FBUCxFQUFZO0FBQ1pwRCxZQUFRa0QsS0FBUixDQUFjLElBQUloRCxJQUFKLEdBQVdDLFdBQVgsRUFBZCxFQUF5QyxtQkFBa0JKLFFBQVFBLEtBQUtGLEVBQUcsU0FBUUUsUUFBUUEsS0FBS1EsSUFBTCxDQUFVMEIsS0FBVixDQUFnQmYsSUFBSyxFQUFoSDs7QUFFQSxXQUFPLDJCQUFZa0MsR0FBWixDQUFQO0FBQ0Q7QUFDRixDIiwiZmlsZSI6ImJlZ2luU3dhcC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90L2FjdGlvbnMvc3RhcnQiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgRXJyb3IgZnJvbSAnLi9lcnJvcidcbi8vIGltcG9ydCBSZXBvcnRTdGF0ZSBmcm9tICcuL3N0YXRlJ1xuXG5pbXBvcnQgeyBnZXQsIHN0YXJ0IH0gZnJvbSAnLi4vLi4vY29yZS9iZWdpblN3YXAnXG5pbXBvcnQgaGlzdG9yeSBmcm9tICcuLi8uLi9jb3JlL2hpc3RvcnknXG5pbXBvcnQgaGFuZGxlRXJyb3IgZnJvbSAnLi4vLi4vLi4vYXBwL2FjdGlvbnMvZXJyb3JzL2hhbmRsZUVycm9yJ1xuaW1wb3J0IGhhbmRsZVN3YXBFcnJvciBmcm9tICcuLi8uLi8uLi9hcHAvYWN0aW9ucy9lcnJvcnMvaGFuZGxlU3dhcEVycm9yJ1xuaW1wb3J0IGtyYWtlbiBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9pbnN0YW5jZXMva3Jha2VuJ1xuaW1wb3J0IFBhaXIgZnJvbSAnLi4vLi4vUGFpcidcbmltcG9ydCB7IGNhbkJlRGVsZXRlZCwgbmVlZHNSZWZ1bmQgfSBmcm9tICcuL3N3YXBTdGF0dXMnXG5cbmltcG9ydCB7IEJUQzJFVEhGbG93LCBFVEgyQlRDRmxvdyB9IGZyb20gJy4uL3N3YXAtZmxvdydcbmltcG9ydCByZXF1ZXN0IGZyb20gJ3JlcXVlc3QtcHJvbWlzZS1jYWNoZSdcblxuXG5leHBvcnQgZGVmYXVsdCAoYXBwLCB7IGlkIH0sIGNhbGxiYWNrKSA9PiB7XG4gIGxldCBzd2FwXG4gIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYGJlZ2luIHN3YXAgJHtpZH1gKVxuICB0cnkge1xuICAgIHN3YXAgPSBnZXQoYXBwLCBpZClcblxuICAgIGhpc3Rvcnkuc2F2ZUluUHJvZ3Jlc3Moc3dhcC5pZClcblxuICAgIGNhbGxiYWNrKHN3YXApXG5cbiAgICBjb25zdCBmbG93TmFtZSA9IHN3YXAuZmxvdy5fZmxvd05hbWVcblxuY29uc29sZS5sb2coc3dhcC5mbG93Ll9mbG93TmFtZSlcbi8vICAgIGNvbnN0IG1haW4gPSBzd2FwLmZsb3cuZ2V0RnJvbU5hbWUoKVxuLy8gICAgY29uc3QgYmFzZSA9IHN3YXAuZmxvdy5nZXRUb05hbWUoKVxuXG4vLyAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBTd2FwIHR5cGU6ICR7bWFpbn0gdG8gJHtiYXNlfWApXG4gICAgY29uc3QgWyBtYWluLCBiYXNlIF0gPSBmbG93TmFtZS5zcGxpdCgnMicpXG5cbi8vY29uc29sZS5sb2coc3dhcC5mbG93LmdldFRvTmFtZSgpLHN3YXAuZmxvdy5nZXRGcm9tTmFtZSgpKVxuICAgIGlmICghbWFpbiB8fCAhYmFzZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcGFyc2UgZmxvdzogJHtmbG93TmFtZX0gPz0gJHttYWlufTIke2Jhc2V9YClcbiAgICB9XG5cbiAgICBjb25zdCBnb0Zsb3cgPSAobWFpbiA9PT0gJ0JUQycgfHwgbWFpbiA9PT0gJ0JDSCcpID8gQlRDMkVUSEZsb3cgOiBFVEgyQlRDRmxvd1xuXG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgc3RhcnRlZCAke21haW59MiR7YmFzZX0gJHtzd2FwLmlkfSAke2dvRmxvdy5uYW1lfWApXG5cblxuICAgIHN3YXAub24oJ2VudGVyIHN0ZXAnLCBzdGVwID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgJ1tTV0FQICcgKyBzd2FwLmlkICsgJ10gZW50ZXIgc3RlcCcsIHN0ZXApXG5cbiAgICAgIGlmIChzdGVwID49IDIpIHtcbiAgICAgICAgY29uc3Qgc3dhcEluZm8gPSAnc3dhcCBzdGVwICcrc3RlcCsnIGJ1eSAnK3N3YXAuYnV5Q3VycmVuY3krJyAnK3N3YXAuYnV5QW1vdW50LnRvU3RyaW5nKCkrICcgc2VsbCAnK3N3YXAuc2VsbEN1cnJlbmN5KycgJyArIHN3YXAuc2VsbEFtb3VudC50b1N0cmluZygpXG4gICAgICAgIGNvbnN0IGluZm9VUkwgPSAnaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2JvdDU0OTkwMTMwNzpBQUVTZ1J4RHdxOWhsMGYtcmgwU1ZwMEh2WGpoM05qdmdxcy9zZW5kbWVzc2FnZT9wYXJzZV9tb2RlPUhUTUwmY2hhdF9pZD0yOTE2NTI4NSZ0ZXh0PScrZW5jb2RlVVJJQ29tcG9uZW50KHN3YXBJbmZvKVxuXG4gICAgICAgIHJlcXVlc3QoaW5mb1VSTCkudGhlbiggcmV0ID0+IGNvbnNvbGUubG9nKHJldCkgKVxuICAgICAgfVxuLy8gaHR0cHM6Ly9hcGkudGVsZWdyYW0ub3JnL2JvdDU0OTkwMTMwNzpBQUVTZ1J4RHdxOWhsMGYtcmgwU1ZwMEh2WGpoM05qdmdxcy9zZW5kbWVzc2FnZT9wYXJzZV9tb2RlPUhUTUwmY2hhdF9pZD0yOTE2NTI4NSZ0ZXh0PXVybGVuY29kZShcInN3YXAgc3RlcCAyLCAwLjAwMSBCVENcIilcbiAgICAgIGNvbnN0IHsgdGlja2VyIH0gPSBQYWlyLmZyb21PcmRlcihzd2FwKVxuXG4gICAgICBpZiAoc3RlcCA9PT0gMikge1xuICAgICAgICBpZiAodGlja2VyID09PSAnR0hPU1QyQlRDJykge1xuICAgICAgICAgIC8vIHNldCBkZXN0aW5hdGlvbiB3YWxsZXRcbiAgICAgICAgICBzd2FwLnNldERlc3RpbmF0aW9uQnV5QWRkcmVzcygnMTZCWmd1QXo1VTZRVnh1MU5hbjZhZFdSb1B4elFmRzQ2NCcpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHN3YXAuZmxvdy5zdGF0ZS5pc0ZpbmlzaGVkKSB7XG4gICAgICAgIGlmICh0aWNrZXIgPT09ICdFVEgtQlRDJykge1xuICAgICAgICAgIGtyYWtlbi5jcmVhdGVPcmRlcihwYWlyLmFtb3VudC5kaXYocGFpci5wcmljZSkudG9OdW1iZXIoKSwgcGFpci5pc0JpZCgpID8gJ3NlbGwnIDogJ2J1eScpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0pXG5cbiAgICBjb25zdCB1cGRhdGUgPSBhc3luYyAoKSA9PiB7XG5cbiAgICAgIGlmIChhd2FpdCBjYW5CZURlbGV0ZWQoc3dhcCkpIHtcbiAgICAgICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgc3dhcCBmaW5pc2hlZCEgcmVtb3ZlICR7c3dhcC5pZH1gKVxuICAgICAgICBoaXN0b3J5LnJlbW92ZUluUHJvZ3Jlc3Moc3dhcC5pZClcbiAgICAgICAgaGlzdG9yeS5zYXZlRmluaXNoZWQoc3dhcC5pZClcbiAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodXBkYXRlKVxuICAgICAgfVxuXG4gICAgICBpZiAobmVlZHNSZWZ1bmQoc3dhcCkpIHtcbiAgICAgICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgc3dhcCBuZWVkcyByZWZ1bmQ6ICR7c3dhcC5pZH0sIHRyeWluZy4uLmApXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN3YXAuZmxvdy50cnlSZWZ1bmQoKVxuICAgICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBzd2FwIHJlZnVuZDpgLCByZXN1bHQpXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHVwZGF0ZSwgNTAwMClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYHN3YXAgZG9lcyBub3QgbmVlZCByZWZ1bmQ6ICR7c3dhcC5pZH1gKVxuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICBnb0Zsb3coc3dhcClcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZVN3YXBFcnJvcihzd2FwLCBlcnJvcilcblxuICAgICAgICBjb25zdCB7IG5hbWUsIG1lc3NhZ2UgfSA9IGVycm9yXG4gICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgWyR7c3dhcC5pZH1dOiBgLCBuYW1lLCBtZXNzYWdlKVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgc2V0VGltZW91dCh1cGRhdGUsIDUwMDApXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBzZXRUaW1lb3V0KHVwZGF0ZSwgMClcblxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYFtFUlJPUl0gc3dhcCBpZD0ke3N3YXAgJiYgc3dhcC5pZH0gc3RlcD0ke3N3YXAgJiYgc3dhcC5mbG93LnN0YXRlLnN0ZXB9YClcblxuICAgIHJldHVybiBoYW5kbGVFcnJvcihlcnIpXG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "beginSwap.js"
      ],
      "names": [
        "app",
        "id",
        "callback",
        "swap",
        "console",
        "log",
        "Date",
        "toISOString",
        "history",
        "saveInProgress",
        "flowName",
        "flow",
        "_flowName",
        "main",
        "base",
        "split",
        "Error",
        "goFlow",
        "BTC2ETHFlow",
        "ETH2BTCFlow",
        "name",
        "on",
        "step",
        "swapInfo",
        "buyCurrency",
        "buyAmount",
        "toString",
        "sellCurrency",
        "sellAmount",
        "infoURL",
        "encodeURIComponent",
        "then",
        "ret",
        "ticker",
        "Pair",
        "fromOrder",
        "setDestinationBuyAddress",
        "state",
        "isFinished",
        "kraken",
        "createOrder",
        "pair",
        "amount",
        "div",
        "price",
        "toNumber",
        "isBid",
        "update",
        "removeInProgress",
        "saveFinished",
        "clearInterval",
        "result",
        "tryRefund",
        "setTimeout",
        "error",
        "message",
        "err"
      ],
      "mappings": "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",
      "file": "beginSwap.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "sourcesContent": [
        "// import Error from './error'\n// import ReportState from './state'\n\nimport { get, start } from '../../core/beginSwap'\nimport history from '../../core/history'\nimport handleError from '../../../app/actions/errors/handleError'\nimport handleSwapError from '../../../app/actions/errors/handleSwapError'\nimport kraken from '../../../services/instances/kraken'\nimport Pair from '../../Pair'\nimport { canBeDeleted, needsRefund } from './swapStatus'\n\nimport { BTC2ETHFlow, ETH2BTCFlow } from '../swap-flow'\nimport request from 'request-promise-cache'\n\n\nexport default (app, { id }, callback) => {\n  let swap\n  console.log(new Date().toISOString(), `begin swap ${id}`)\n  try {\n    swap = get(app, id)\n\n    history.saveInProgress(swap.id)\n\n    callback(swap)\n\n    const flowName = swap.flow._flowName\n\nconsole.log(swap.flow._flowName)\n//    const main = swap.flow.getFromName()\n//    const base = swap.flow.getToName()\n\n//    console.log(new Date().toISOString(), `Swap type: ${main} to ${base}`)\n    const [ main, base ] = flowName.split('2')\n\n//console.log(swap.flow.getToName(),swap.flow.getFromName())\n    if (!main || !base) {\n      throw new Error(`Cannot parse flow: ${flowName} ?= ${main}2${base}`)\n    }\n\n    const goFlow = (main === 'BTC' || main === 'BCH') ? BTC2ETHFlow : ETH2BTCFlow\n\n    console.log(new Date().toISOString(), `started ${main}2${base} ${swap.id} ${goFlow.name}`)\n\n\n    swap.on('enter step', step => {\n      console.log(new Date().toISOString(), '[SWAP ' + swap.id + '] enter step', step)\n\n      if (step >= 2) {\n        const swapInfo = 'swap step '+step+' buy '+swap.buyCurrency+' '+swap.buyAmount.toString()+ ' sell '+swap.sellCurrency+' ' + swap.sellAmount.toString()\n        const infoURL = 'https://api.telegram.org/bot549901307:AAESgRxDwq9hl0f-rh0SVp0HvXjh3Njvgqs/sendmessage?parse_mode=HTML&chat_id=29165285&text='+encodeURIComponent(swapInfo)\n\n        request(infoURL).then( ret => console.log(ret) )\n      }\n// https://api.telegram.org/bot549901307:AAESgRxDwq9hl0f-rh0SVp0HvXjh3Njvgqs/sendmessage?parse_mode=HTML&chat_id=29165285&text=urlencode(\"swap step 2, 0.001 BTC\")\n      const { ticker } = Pair.fromOrder(swap)\n\n      if (step === 2) {\n        if (ticker === 'GHOST2BTC') {\n          // set destination wallet\n          swap.setDestinationBuyAddress('16BZguAz5U6QVxu1Nan6adWRoPxzQfG464')\n        }\n      }\n\n      if (swap.flow.state.isFinished) {\n        if (ticker === 'ETH-BTC') {\n          kraken.createOrder(pair.amount.div(pair.price).toNumber(), pair.isBid() ? 'sell' : 'buy')\n        }\n      }\n\n    })\n\n    const update = async () => {\n\n      if (await canBeDeleted(swap)) {\n        console.log(new Date().toISOString(), `swap finished! remove ${swap.id}`)\n        history.removeInProgress(swap.id)\n        history.saveFinished(swap.id)\n        return clearInterval(update)\n      }\n\n      if (needsRefund(swap)) {\n        console.log(new Date().toISOString(), `swap needs refund: ${swap.id}, trying...`)\n        const result = await swap.flow.tryRefund()\n        console.log(new Date().toISOString(), `swap refund:`, result)\n        return setTimeout(update, 5000)\n      } else {\n        console.log(new Date().toISOString(), `swap does not need refund: ${swap.id}`)\n      }\n\n      try {\n        goFlow(swap)\n      } catch (error) {\n        handleSwapError(swap, error)\n\n        const { name, message } = error\n        console.error(new Date().toISOString(), `[${swap.id}]: `, name, message)\n      } finally {\n        setTimeout(update, 5000)\n      }\n\n    }\n\n    setTimeout(update, 0)\n\n  } catch (err) {\n    console.error(new Date().toISOString(), `[ERROR] swap id=${swap && swap.id} step=${swap && swap.flow.state.step}`)\n\n    return handleError(err)\n  }\n}\n"
      ]
    },
    "mtime": 1593084562000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/beginSwap.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "simple.swap.core",
            "imported": [
              "helpers"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "helpers",
                "local": "helpers"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "get",
            "start"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "get",
              "exported": "get"
            },
            {
              "kind": "local",
              "local": "start",
              "exported": "start"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/beginSwap.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/beginSwap.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "beginSwap.js",
      "sourceFileName": "beginSwap.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "beginSwap"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.start = exports.get = undefined;\n\nvar _simpleSwap = require('simple.swap.core');\n\nconst { swap: { get, start } } = _simpleSwap.helpers;\n\nexports.default = (app, orderId) => get(app, orderId);\n\nexports.get = get;\nexports.start = start;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJlZ2luU3dhcC5qcyJdLCJuYW1lcyI6WyJzd2FwIiwiZ2V0Iiwic3RhcnQiLCJoZWxwZXJzIiwiYXBwIiwib3JkZXJJZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLE1BQU0sRUFBRUEsTUFBTSxFQUFFQyxHQUFGLEVBQU9DLEtBQVAsRUFBUixLQUEyQkMsbUJBQWpDOztrQkFFZSxDQUFDQyxHQUFELEVBQU1DLE9BQU4sS0FBa0JKLElBQUlHLEdBQUosRUFBU0MsT0FBVCxDOztRQUN4QkosRyxHQUFBQSxHO1FBQUtDLEssR0FBQUEsSyIsImZpbGUiOiJiZWdpblN3YXAuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9jb3JlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGVscGVycyB9IGZyb20gJ3NpbXBsZS5zd2FwLmNvcmUnXG5cbmNvbnN0IHsgc3dhcDogeyBnZXQsIHN0YXJ0IH0gfSA9IGhlbHBlcnNcblxuZXhwb3J0IGRlZmF1bHQgKGFwcCwgb3JkZXJJZCkgPT4gZ2V0KGFwcCwgb3JkZXJJZClcbmV4cG9ydCB7IGdldCwgc3RhcnQgfVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "beginSwap.js"
      ],
      "names": [
        "swap",
        "get",
        "start",
        "helpers",
        "app",
        "orderId"
      ],
      "mappings": ";;;;;;;AAAA;;AAEA,MAAM,EAAEA,MAAM,EAAEC,GAAF,EAAOC,KAAP,EAAR,KAA2BC,mBAAjC;;kBAEe,CAACC,GAAD,EAAMC,OAAN,KAAkBJ,IAAIG,GAAJ,EAASC,OAAT,C;;QACxBJ,G,GAAAA,G;QAAKC,K,GAAAA,K",
      "file": "beginSwap.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "import { helpers } from 'simple.swap.core'\n\nconst { swap: { get, start } } = helpers\n\nexport default (app, orderId) => get(app, orderId)\nexport { get, start }\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/app/actions/errors/handleSwapError.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/app/actions/errors\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "objectWithoutProperties"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/app/actions/errors/handleSwapError.js",
      "filenameRelative": "/home/pm2user/swap.bot/app/actions/errors/handleSwapError.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handleSwapError.js",
      "sourceFileName": "handleSwapError.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handleSwapError"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nexports.default = (swap, _ref) => {\n  let { name, message } = _ref,\n      other = _objectWithoutProperties(_ref, [\"name\", \"message\"]);\n\n  if (/exists/.test(message)) {\n    const { owner, participant } = swap;\n    console.log(new Date().toISOString(), `[${swap.id}]: swap {${participant.eth.address}, ${owner.eth.address}} exists`);\n\n    if (!swap.flow.state.isRefunded) {\n      swap.flow.tryRefund();\n    }\n  }\n\n  console.error(name, message, other);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZVN3YXBFcnJvci5qcyJdLCJuYW1lcyI6WyJzd2FwIiwibmFtZSIsIm1lc3NhZ2UiLCJvdGhlciIsInRlc3QiLCJvd25lciIsInBhcnRpY2lwYW50IiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlkIiwiZXRoIiwiYWRkcmVzcyIsImZsb3ciLCJzdGF0ZSIsImlzUmVmdW5kZWQiLCJ0cnlSZWZ1bmQiLCJlcnJvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7a0JBQWUsQ0FBQ0EsSUFBRCxXQUF1QztBQUFBLE1BQWhDLEVBQUVDLElBQUYsRUFBUUMsT0FBUixFQUFnQztBQUFBLE1BQVpDLEtBQVk7O0FBQ3BELE1BQUksU0FBU0MsSUFBVCxDQUFjRixPQUFkLENBQUosRUFBNEI7QUFDMUIsVUFBTSxFQUFFRyxLQUFGLEVBQVNDLFdBQVQsS0FBeUJOLElBQS9CO0FBQ0FPLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxJQUFHVixLQUFLVyxFQUFHLFlBQVdMLFlBQVlNLEdBQVosQ0FBZ0JDLE9BQVEsS0FBSVIsTUFBTU8sR0FBTixDQUFVQyxPQUFRLFVBQTNHOztBQUVBLFFBQUksQ0FBQ2IsS0FBS2MsSUFBTCxDQUFVQyxLQUFWLENBQWdCQyxVQUFyQixFQUFpQztBQUMvQmhCLFdBQUtjLElBQUwsQ0FBVUcsU0FBVjtBQUNEO0FBQ0Y7O0FBRURWLFVBQVFXLEtBQVIsQ0FBY2pCLElBQWQsRUFBb0JDLE9BQXBCLEVBQTZCQyxLQUE3QjtBQUNELEMiLCJmaWxlIjoiaGFuZGxlU3dhcEVycm9yLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvYXBwL2FjdGlvbnMvZXJyb3JzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKHN3YXAsIHsgbmFtZSwgbWVzc2FnZSwgLi4ub3RoZXIgfSkgPT4ge1xuICBpZiAoL2V4aXN0cy8udGVzdChtZXNzYWdlKSkge1xuICAgIGNvbnN0IHsgb3duZXIsIHBhcnRpY2lwYW50IH0gPSBzd2FwXG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgWyR7c3dhcC5pZH1dOiBzd2FwIHske3BhcnRpY2lwYW50LmV0aC5hZGRyZXNzfSwgJHtvd25lci5ldGguYWRkcmVzc319IGV4aXN0c2ApXG5cbiAgICBpZiAoIXN3YXAuZmxvdy5zdGF0ZS5pc1JlZnVuZGVkKSB7XG4gICAgICBzd2FwLmZsb3cudHJ5UmVmdW5kKClcbiAgICB9XG4gIH1cblxuICBjb25zb2xlLmVycm9yKG5hbWUsIG1lc3NhZ2UsIG90aGVyKVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handleSwapError.js"
      ],
      "names": [
        "swap",
        "name",
        "message",
        "other",
        "test",
        "owner",
        "participant",
        "console",
        "log",
        "Date",
        "toISOString",
        "id",
        "eth",
        "address",
        "flow",
        "state",
        "isRefunded",
        "tryRefund",
        "error"
      ],
      "mappings": ";;;;;;;;kBAAe,CAACA,IAAD,WAAuC;AAAA,MAAhC,EAAEC,IAAF,EAAQC,OAAR,EAAgC;AAAA,MAAZC,KAAY;;AACpD,MAAI,SAASC,IAAT,CAAcF,OAAd,CAAJ,EAA4B;AAC1B,UAAM,EAAEG,KAAF,EAASC,WAAT,KAAyBN,IAA/B;AACAO,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,IAAGV,KAAKW,EAAG,YAAWL,YAAYM,GAAZ,CAAgBC,OAAQ,KAAIR,MAAMO,GAAN,CAAUC,OAAQ,UAA3G;;AAEA,QAAI,CAACb,KAAKc,IAAL,CAAUC,KAAV,CAAgBC,UAArB,EAAiC;AAC/BhB,WAAKc,IAAL,CAAUG,SAAV;AACD;AACF;;AAEDV,UAAQW,KAAR,CAAcjB,IAAd,EAAoBC,OAApB,EAA6BC,KAA7B;AACD,C",
      "file": "handleSwapError.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions/errors",
      "sourcesContent": [
        "export default (swap, { name, message, ...other }) => {\n  if (/exists/.test(message)) {\n    const { owner, participant } = swap\n    console.log(new Date().toISOString(), `[${swap.id}]: swap {${participant.eth.address}, ${owner.eth.address}} exists`)\n\n    if (!swap.flow.state.isRefunded) {\n      swap.flow.tryRefund()\n    }\n  }\n\n  console.error(name, message, other)\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/services/instances/kraken.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/services/instances\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/services/instances/kraken.js",
      "filenameRelative": "/home/pm2user/swap.bot/services/instances/kraken.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "kraken.js",
      "sourceFileName": "kraken.js",
      "sourceRoot": "/home/pm2user/swap.bot/services/instances",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/services/instances",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "kraken"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst KrakenClient = require('kraken-api');\n//const { wallet } = require('../services')\nconst wallet = '';\n\nclass KrakenApi {\n\n  constructor() {\n\n    const secret = process.env.KRAKEN_API_SECRET;\n    this.key = process.env.KRAKEN_API_KEY;\n    this.core = new KrakenClient(this.key, secret, { dev: true });\n    this.pair = 'XETHXXBT';\n    this.isMainnet = process.env.NETWORK === 'mainnet';\n  }\n\n  getBalance() {\n\n    return this.core.api('Balance');\n  }\n\n  getPairs() {\n\n    return this.core.api('AssetPairs');\n  }\n\n  deposit() {\n\n    wallet.withdraw(amount);\n  }\n\n  run(amount, type) {\n\n    this.deposit(type, '', amount);\n  }\n\n  /*\n  * @ToDo check */\n  createOrder(amount, type) {\n\n    if (!this.key) {\n      return;\n    }\n\n    return this.core.api('AddOrder', {\n      'pair': 'ETHXBT', //XBTUSD & ETHUSD\n      'type': type, //sell & buy\n      'volume': amount,\n      'ordertype': 'market'\n      //  'validate': !this.isMainnet,\n      //  'pair' : '',\n    }) //\n    // .then(this.returnMoney(amount))\n    .then(console.log).catch(console.log);\n  }\n\n  returnMoney(amount) {\n\n    let result = this.core.api('Withdraw', {\n      'key': type, //sell & buy\n      'amount': amount,\n      'asset': 'ETH' //@ToDo переделать XBT\n      //  'pair' : '',\n    }).then(this.returnMoney(amount)).catch(console.log);\n  }\n\n  /*\n  * get all orders\n  * */\n  getTrades() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let that = _this;\n      return new Promise((() => {\n        var _ref = _asyncToGenerator(function* (resolve, reject) {\n          that.core.api('Trades', { pair: that.pair }).then(function (r) {\n            resolve(r.result[that.pair]);\n          }).catch(reject);\n        });\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      })());\n    })();\n  }\n\n}\n\nmodule.exports = new KrakenApi();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtyYWtlbi5qcyJdLCJuYW1lcyI6WyJLcmFrZW5DbGllbnQiLCJyZXF1aXJlIiwid2FsbGV0IiwiS3Jha2VuQXBpIiwiY29uc3RydWN0b3IiLCJzZWNyZXQiLCJwcm9jZXNzIiwiZW52IiwiS1JBS0VOX0FQSV9TRUNSRVQiLCJrZXkiLCJLUkFLRU5fQVBJX0tFWSIsImNvcmUiLCJkZXYiLCJwYWlyIiwiaXNNYWlubmV0IiwiTkVUV09SSyIsImdldEJhbGFuY2UiLCJhcGkiLCJnZXRQYWlycyIsImRlcG9zaXQiLCJ3aXRoZHJhdyIsImFtb3VudCIsInJ1biIsInR5cGUiLCJjcmVhdGVPcmRlciIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiY2F0Y2giLCJyZXR1cm5Nb25leSIsInJlc3VsdCIsImdldFRyYWRlcyIsInRoYXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsZUFBZUMsUUFBUSxZQUFSLENBQXJCO0FBQ0E7QUFDQSxNQUFNQyxTQUFTLEVBQWY7O0FBRUEsTUFBTUMsU0FBTixDQUFnQjs7QUFFZEMsZ0JBQWM7O0FBRVosVUFBTUMsU0FBU0MsUUFBUUMsR0FBUixDQUFZQyxpQkFBM0I7QUFDQSxTQUFLQyxHQUFMLEdBQVdILFFBQVFDLEdBQVIsQ0FBWUcsY0FBdkI7QUFDQSxTQUFLQyxJQUFMLEdBQVksSUFBSVgsWUFBSixDQUFpQixLQUFLUyxHQUF0QixFQUEyQkosTUFBM0IsRUFBbUMsRUFBQ08sS0FBSyxJQUFOLEVBQW5DLENBQVo7QUFDQSxTQUFLQyxJQUFMLEdBQVksVUFBWjtBQUNBLFNBQUtDLFNBQUwsR0FBaUJSLFFBQVFDLEdBQVIsQ0FBWVEsT0FBWixLQUF3QixTQUF6QztBQUNEOztBQUVEQyxlQUFhOztBQUVYLFdBQU8sS0FBS0wsSUFBTCxDQUFVTSxHQUFWLENBQWMsU0FBZCxDQUFQO0FBQ0Q7O0FBRURDLGFBQVc7O0FBRVQsV0FBTyxLQUFLUCxJQUFMLENBQVVNLEdBQVYsQ0FBYyxZQUFkLENBQVA7QUFDRDs7QUFFREUsWUFBVTs7QUFFUmpCLFdBQU9rQixRQUFQLENBQWdCQyxNQUFoQjtBQUVEOztBQUVEQyxNQUFJRCxNQUFKLEVBQVlFLElBQVosRUFBa0I7O0FBRWhCLFNBQUtKLE9BQUwsQ0FBYUksSUFBYixFQUFtQixFQUFuQixFQUF1QkYsTUFBdkI7QUFDRDs7QUFFRDs7QUFFQUcsY0FBWUgsTUFBWixFQUFvQkUsSUFBcEIsRUFBMEI7O0FBRXhCLFFBQUksQ0FBQyxLQUFLZCxHQUFWLEVBQWU7QUFDYjtBQUNEOztBQUVELFdBQU8sS0FBS0UsSUFBTCxDQUFVTSxHQUFWLENBQWMsVUFBZCxFQUEwQjtBQUMvQixjQUFRLFFBRHVCLEVBQ2I7QUFDbEIsY0FBUU0sSUFGdUIsRUFFakI7QUFDZCxnQkFBVUYsTUFIcUI7QUFJL0IsbUJBQWE7QUFDYjtBQUNBO0FBTitCLEtBQTFCLEVBT0w7QUFDRjtBQVJPLEtBU0pJLElBVEksQ0FTQ0MsUUFBUUMsR0FUVCxFQVVKQyxLQVZJLENBVUVGLFFBQVFDLEdBVlYsQ0FBUDtBQVdEOztBQUVERSxjQUFZUixNQUFaLEVBQW9COztBQUVsQixRQUFJUyxTQUFTLEtBQUtuQixJQUFMLENBQVVNLEdBQVYsQ0FBYyxVQUFkLEVBQTBCO0FBQ3JDLGFBQU9NLElBRDhCLEVBQ3hCO0FBQ2IsZ0JBQVVGLE1BRjJCO0FBR3JDLGVBQVMsS0FINEIsQ0FHdEI7QUFDZjtBQUpxQyxLQUExQixFQUtWSSxJQUxVLENBS0wsS0FBS0ksV0FBTCxDQUFpQlIsTUFBakIsQ0FMSyxFQU1WTyxLQU5VLENBTUpGLFFBQVFDLEdBTkosQ0FBYjtBQU9EOztBQUVEOzs7QUFHTUksV0FBTixHQUFrQjtBQUFBOztBQUFBO0FBQ2hCLFVBQUlDLE9BQU8sS0FBWDtBQUNBLGFBQU8sSUFBSUMsT0FBSjtBQUFBLHFDQUFZLFdBQWdCQyxPQUFoQixFQUF5QkMsTUFBekIsRUFBaUM7QUFDbERILGVBQUtyQixJQUFMLENBQVVNLEdBQVYsQ0FBYyxRQUFkLEVBQXdCLEVBQUNKLE1BQU1tQixLQUFLbkIsSUFBWixFQUF4QixFQUEyQ1ksSUFBM0MsQ0FBZ0QsVUFBQ1csQ0FBRCxFQUFPO0FBQ3JERixvQkFBUUUsRUFBRU4sTUFBRixDQUFTRSxLQUFLbkIsSUFBZCxDQUFSO0FBQ0QsV0FGRCxFQUVHZSxLQUZILENBRVNPLE1BRlQ7QUFJRCxTQUxNOztBQUFBO0FBQUE7QUFBQTtBQUFBLFdBQVA7QUFGZ0I7QUFRakI7O0FBM0VhOztBQStFaEJFLE9BQU9DLE9BQVAsR0FBaUIsSUFBSW5DLFNBQUosRUFBakIiLCJmaWxlIjoia3Jha2VuLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3Qvc2VydmljZXMvaW5zdGFuY2VzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgS3Jha2VuQ2xpZW50ID0gcmVxdWlyZSgna3Jha2VuLWFwaScpO1xuLy9jb25zdCB7IHdhbGxldCB9ID0gcmVxdWlyZSgnLi4vc2VydmljZXMnKVxuY29uc3Qgd2FsbGV0ID0gJydcblxuY2xhc3MgS3Jha2VuQXBpIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LktSQUtFTl9BUElfU0VDUkVUO1xuICAgIHRoaXMua2V5ID0gcHJvY2Vzcy5lbnYuS1JBS0VOX0FQSV9LRVk7XG4gICAgdGhpcy5jb3JlID0gbmV3IEtyYWtlbkNsaWVudCh0aGlzLmtleSwgc2VjcmV0LCB7ZGV2OiB0cnVlfSk7XG4gICAgdGhpcy5wYWlyID0gJ1hFVEhYWEJUJztcbiAgICB0aGlzLmlzTWFpbm5ldCA9IHByb2Nlc3MuZW52Lk5FVFdPUksgPT09ICdtYWlubmV0JztcbiAgfVxuXG4gIGdldEJhbGFuY2UoKSB7XG5cbiAgICByZXR1cm4gdGhpcy5jb3JlLmFwaSgnQmFsYW5jZScpO1xuICB9XG5cbiAgZ2V0UGFpcnMoKSB7XG5cbiAgICByZXR1cm4gdGhpcy5jb3JlLmFwaSgnQXNzZXRQYWlycycpO1xuICB9XG5cbiAgZGVwb3NpdCgpIHtcblxuICAgIHdhbGxldC53aXRoZHJhdyhhbW91bnQsKVxuXG4gIH1cblxuICBydW4oYW1vdW50LCB0eXBlKSB7XG5cbiAgICB0aGlzLmRlcG9zaXQodHlwZSwgJycsIGFtb3VudCk7XG4gIH1cblxuICAvKlxuICAqIEBUb0RvIGNoZWNrICovXG4gIGNyZWF0ZU9yZGVyKGFtb3VudCwgdHlwZSkge1xuXG4gICAgaWYgKCF0aGlzLmtleSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29yZS5hcGkoJ0FkZE9yZGVyJywge1xuICAgICAgJ3BhaXInOiAnRVRIWEJUJywgLy9YQlRVU0QgJiBFVEhVU0RcbiAgICAgICd0eXBlJzogdHlwZSwgLy9zZWxsICYgYnV5XG4gICAgICAndm9sdW1lJzogYW1vdW50LFxuICAgICAgJ29yZGVydHlwZSc6ICdtYXJrZXQnLFxuICAgICAgLy8gICd2YWxpZGF0ZSc6ICF0aGlzLmlzTWFpbm5ldCxcbiAgICAgIC8vICAncGFpcicgOiAnJyxcbiAgICB9KS8vXG4gICAgLy8gLnRoZW4odGhpcy5yZXR1cm5Nb25leShhbW91bnQpKVxuICAgICAgLnRoZW4oY29uc29sZS5sb2cpXG4gICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xuICB9XG5cbiAgcmV0dXJuTW9uZXkoYW1vdW50KSB7XG5cbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5jb3JlLmFwaSgnV2l0aGRyYXcnLCB7XG4gICAgICAna2V5JzogdHlwZSwgLy9zZWxsICYgYnV5XG4gICAgICAnYW1vdW50JzogYW1vdW50LFxuICAgICAgJ2Fzc2V0JzogJ0VUSCcgLy9AVG9EbyDQv9C10YDQtdC00LXQu9Cw0YLRjCBYQlRcbiAgICAgIC8vICAncGFpcicgOiAnJyxcbiAgICB9KS50aGVuKHRoaXMucmV0dXJuTW9uZXkoYW1vdW50KSlcbiAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XG4gIH1cblxuICAvKlxuICAqIGdldCBhbGwgb3JkZXJzXG4gICogKi9cbiAgYXN5bmMgZ2V0VHJhZGVzKCkge1xuICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdGhhdC5jb3JlLmFwaSgnVHJhZGVzJywge3BhaXI6IHRoYXQucGFpcn0pLnRoZW4oKHIpID0+IHtcbiAgICAgICAgcmVzb2x2ZShyLnJlc3VsdFt0aGF0LnBhaXJdKVxuICAgICAgfSkuY2F0Y2gocmVqZWN0KVxuXG4gICAgfSk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBLcmFrZW5BcGkoKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "kraken.js"
      ],
      "names": [
        "KrakenClient",
        "require",
        "wallet",
        "KrakenApi",
        "constructor",
        "secret",
        "process",
        "env",
        "KRAKEN_API_SECRET",
        "key",
        "KRAKEN_API_KEY",
        "core",
        "dev",
        "pair",
        "isMainnet",
        "NETWORK",
        "getBalance",
        "api",
        "getPairs",
        "deposit",
        "withdraw",
        "amount",
        "run",
        "type",
        "createOrder",
        "then",
        "console",
        "log",
        "catch",
        "returnMoney",
        "result",
        "getTrades",
        "that",
        "Promise",
        "resolve",
        "reject",
        "r",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,MAAMA,eAAeC,QAAQ,YAAR,CAArB;AACA;AACA,MAAMC,SAAS,EAAf;;AAEA,MAAMC,SAAN,CAAgB;;AAEdC,gBAAc;;AAEZ,UAAMC,SAASC,QAAQC,GAAR,CAAYC,iBAA3B;AACA,SAAKC,GAAL,GAAWH,QAAQC,GAAR,CAAYG,cAAvB;AACA,SAAKC,IAAL,GAAY,IAAIX,YAAJ,CAAiB,KAAKS,GAAtB,EAA2BJ,MAA3B,EAAmC,EAACO,KAAK,IAAN,EAAnC,CAAZ;AACA,SAAKC,IAAL,GAAY,UAAZ;AACA,SAAKC,SAAL,GAAiBR,QAAQC,GAAR,CAAYQ,OAAZ,KAAwB,SAAzC;AACD;;AAEDC,eAAa;;AAEX,WAAO,KAAKL,IAAL,CAAUM,GAAV,CAAc,SAAd,CAAP;AACD;;AAEDC,aAAW;;AAET,WAAO,KAAKP,IAAL,CAAUM,GAAV,CAAc,YAAd,CAAP;AACD;;AAEDE,YAAU;;AAERjB,WAAOkB,QAAP,CAAgBC,MAAhB;AAED;;AAEDC,MAAID,MAAJ,EAAYE,IAAZ,EAAkB;;AAEhB,SAAKJ,OAAL,CAAaI,IAAb,EAAmB,EAAnB,EAAuBF,MAAvB;AACD;;AAED;;AAEAG,cAAYH,MAAZ,EAAoBE,IAApB,EAA0B;;AAExB,QAAI,CAAC,KAAKd,GAAV,EAAe;AACb;AACD;;AAED,WAAO,KAAKE,IAAL,CAAUM,GAAV,CAAc,UAAd,EAA0B;AAC/B,cAAQ,QADuB,EACb;AAClB,cAAQM,IAFuB,EAEjB;AACd,gBAAUF,MAHqB;AAI/B,mBAAa;AACb;AACA;AAN+B,KAA1B,EAOL;AACF;AARO,KASJI,IATI,CASCC,QAAQC,GATT,EAUJC,KAVI,CAUEF,QAAQC,GAVV,CAAP;AAWD;;AAEDE,cAAYR,MAAZ,EAAoB;;AAElB,QAAIS,SAAS,KAAKnB,IAAL,CAAUM,GAAV,CAAc,UAAd,EAA0B;AACrC,aAAOM,IAD8B,EACxB;AACb,gBAAUF,MAF2B;AAGrC,eAAS,KAH4B,CAGtB;AACf;AAJqC,KAA1B,EAKVI,IALU,CAKL,KAAKI,WAAL,CAAiBR,MAAjB,CALK,EAMVO,KANU,CAMJF,QAAQC,GANJ,CAAb;AAOD;;AAED;;;AAGMI,WAAN,GAAkB;AAAA;;AAAA;AAChB,UAAIC,OAAO,KAAX;AACA,aAAO,IAAIC,OAAJ;AAAA,qCAAY,WAAgBC,OAAhB,EAAyBC,MAAzB,EAAiC;AAClDH,eAAKrB,IAAL,CAAUM,GAAV,CAAc,QAAd,EAAwB,EAACJ,MAAMmB,KAAKnB,IAAZ,EAAxB,EAA2CY,IAA3C,CAAgD,UAACW,CAAD,EAAO;AACrDF,oBAAQE,EAAEN,MAAF,CAASE,KAAKnB,IAAd,CAAR;AACD,WAFD,EAEGe,KAFH,CAESO,MAFT;AAID,SALM;;AAAA;AAAA;AAAA;AAAA,WAAP;AAFgB;AAQjB;;AA3Ea;;AA+EhBE,OAAOC,OAAP,GAAiB,IAAInC,SAAJ,EAAjB",
      "file": "kraken.js",
      "sourceRoot": "/home/pm2user/swap.bot/services/instances",
      "sourcesContent": [
        "const KrakenClient = require('kraken-api');\n//const { wallet } = require('../services')\nconst wallet = ''\n\nclass KrakenApi {\n\n  constructor() {\n\n    const secret = process.env.KRAKEN_API_SECRET;\n    this.key = process.env.KRAKEN_API_KEY;\n    this.core = new KrakenClient(this.key, secret, {dev: true});\n    this.pair = 'XETHXXBT';\n    this.isMainnet = process.env.NETWORK === 'mainnet';\n  }\n\n  getBalance() {\n\n    return this.core.api('Balance');\n  }\n\n  getPairs() {\n\n    return this.core.api('AssetPairs');\n  }\n\n  deposit() {\n\n    wallet.withdraw(amount,)\n\n  }\n\n  run(amount, type) {\n\n    this.deposit(type, '', amount);\n  }\n\n  /*\n  * @ToDo check */\n  createOrder(amount, type) {\n\n    if (!this.key) {\n      return\n    }\n\n    return this.core.api('AddOrder', {\n      'pair': 'ETHXBT', //XBTUSD & ETHUSD\n      'type': type, //sell & buy\n      'volume': amount,\n      'ordertype': 'market',\n      //  'validate': !this.isMainnet,\n      //  'pair' : '',\n    })//\n    // .then(this.returnMoney(amount))\n      .then(console.log)\n      .catch(console.log);\n  }\n\n  returnMoney(amount) {\n\n    let result = this.core.api('Withdraw', {\n      'key': type, //sell & buy\n      'amount': amount,\n      'asset': 'ETH' //@ToDo переделать XBT\n      //  'pair' : '',\n    }).then(this.returnMoney(amount))\n      .catch(console.log);\n  }\n\n  /*\n  * get all orders\n  * */\n  async getTrades() {\n    let that = this;\n    return new Promise(async function (resolve, reject) {\n      that.core.api('Trades', {pair: that.pair}).then((r) => {\n        resolve(r.result[that.pair])\n      }).catch(reject)\n\n    });\n  }\n\n}\n\nmodule.exports = new KrakenApi();\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/Pair.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "../config/constants/TOKEN_DECIMALS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TOKEN_DECIMALS"
              }
            ]
          },
          {
            "source": "../config/constants/TRADE_TICKERS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_TICKERS"
              }
            ]
          },
          {
            "source": "../config/constants/PAIR_TYPES",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PAIR_TYPES"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Pair"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Pair",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/Pair.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/Pair.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Pair.js",
      "sourceFileName": "Pair.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Pair"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _TOKEN_DECIMALS = require('../config/constants/TOKEN_DECIMALS');\n\nvar _TOKEN_DECIMALS2 = _interopRequireDefault(_TOKEN_DECIMALS);\n\nvar _TRADE_TICKERS = require('../config/constants/TRADE_TICKERS');\n\nvar _TRADE_TICKERS2 = _interopRequireDefault(_TRADE_TICKERS);\n\nvar _PAIR_TYPES = require('../config/constants/PAIR_TYPES');\n\nvar _PAIR_TYPES2 = _interopRequireDefault(_PAIR_TYPES);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst PAIR_BID = _PAIR_TYPES2.default.BID;\nconst PAIR_ASK = _PAIR_TYPES2.default.ASK;\n\nconst isAsk = type => type === _PAIR_TYPES2.default.ASK;\nconst isBid = type => type === _PAIR_TYPES2.default.BID;\n\nconst filteredDecimals = ({ amount, currency }) => (0, _bignumber2.default)(amount).decimalPlaces(_TOKEN_DECIMALS2.default[currency] || _TOKEN_DECIMALS2.default.default).toString();\n\nconst parseTicker = order => {\n  const { buyCurrency: buy, sellCurrency: sell } = order;\n\n  const BS = `${buy}-${sell}`.toUpperCase(); // buys ETH, sells BTC, BID\n  const SB = `${sell}-${buy}`.toUpperCase(); // sells ETH = ASK\n\n  if (_TRADE_TICKERS2.default.includes(BS)) return { ticker: BS, type: PAIR_BID };\n  if (_TRADE_TICKERS2.default.includes(SB)) return { ticker: SB, type: PAIR_ASK };\n\n  throw new Error(`ParseTickerError: No such tickers: ${BS},${SB}`);\n};\n//@ToDo move to outside\nconst parsePair = str => {\n  if (!str) throw new Error(`Empty string: ${str}`);\n  if (typeof str !== 'string') throw new Error(`ParseTickerError: Not a string: ${str}`);\n\n  const tokens = str.split('-');\n  if (!tokens.length == 2) throw new Error(`ParseTickerError: Wrong tokens: ${str}`);\n\n  if (_TRADE_TICKERS2.default.includes(str)) {\n    str = str;\n  } else {\n    str = tokens.reverse().join('-');\n  }\n\n  if (!_TRADE_TICKERS2.default.includes(str)) throw new Error(`ParseTickerError: Ticker not found: ${str}`);\n\n  const MAIN = tokens[0].toUpperCase();\n  const BASE = tokens[1].toUpperCase();\n\n  return {\n    MAIN,\n    BASE\n  };\n};\n\nclass Pair {\n  constructor({ price, amount, ticker, type }) {\n    this.price = (0, _bignumber2.default)(price);\n    this.amount = (0, _bignumber2.default)(amount);\n\n    const { MAIN, BASE } = parsePair(ticker);\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${main}-${base}`);\n\n    this.ticker = ticker;\n    this.main = MAIN;\n    this.base = BASE;\n    this.type = type === _PAIR_TYPES2.default.BID ? _PAIR_TYPES2.default.BID : _PAIR_TYPES2.default.ASK;\n  }\n\n  /*\n  * 10 ETH -> 1 BTC\n  *\n  * ticker: ETH-BTC\n  *\n  * So we are on ETH market, thus:\n  *   - ASK orders are SELL ETH (for BTC),\n  *   - BID orders are BUY ETH (for BTC)\n  *\n  * This order is SELLING ETH, to it's ASK\n  * type: BID = true, ASK = false\n  *\n  * Price is also calculated in BTC, while amount in ETH\n  * price: 0.1\n  * amount: 10\n  *\n  *\n  * So, for type = ASK\n  *\n  * buyCurrency: BTC = base\n  * sellCurrency: ETH = main\n  * buyAmount: 1 BTC = (0.1 BTC/ETH) * 10 ETH = price * amount\n  * sellAmount: 10 ETH = 10 ETH = amount\n  *\n  */\n  toOrder() {\n    const { ticker, type, price, amount } = this;\n\n    console.log(new Date().toISOString(), `create order ${this}`);\n    const { MAIN, BASE } = parsePair(ticker);\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${main}-${base}`);\n\n    if (![PAIR_ASK, PAIR_BID].includes(type)) throw new Error(`CreateOrderError: Wrong order type: ${type}`);\n\n    const base = { currency: BASE, amount: amount };\n    const main = { currency: MAIN, amount: amount.div(price) };\n\n    const buy = type == PAIR_ASK ? base : main;\n    const sell = type == PAIR_ASK ? main : base;\n\n    return {\n      buyCurrency: buy.currency,\n      sellCurrency: sell.currency,\n      buyAmount: filteredDecimals(buy),\n      sellAmount: filteredDecimals(sell),\n      exchangeRate: price // isAsk(type) ? price : 1/price\n    };\n  }\n\n  static fromOrder(order) {\n    const { buyCurrency: buy, sellCurrency: sell, buyAmount, sellAmount } = order;\n\n    const { ticker, type } = parseTicker(order);\n\n    // ASK means sellCurrency is ETH, then sell is main\n    const main_amount = (0, _bignumber2.default)(type == PAIR_ASK ? sellAmount : buyAmount);\n    const base_amount = (0, _bignumber2.default)(type == PAIR_ASK ? buyAmount : sellAmount);\n\n    return new Pair({\n      ticker,\n      type,\n      price: base_amount.div(main_amount),\n      amount: base_amount\n    });\n  }\n\n  toString() {\n    const type = this.type === _PAIR_TYPES2.default.BID ? 'bid' : 'ask';\n    return `${type} \\t${this.ticker} \\t${this.price.dp(8)} \\t${this.amount}`;\n  }\n\n  isBid() {\n    return isBid(this.type);\n  }\n\n  isAsk() {\n    return isAsk(this.type);\n  }\n}\nexports.default = Pair;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhaXIuanMiXSwibmFtZXMiOlsiUEFJUl9CSUQiLCJQQUlSX1RZUEVTIiwiQklEIiwiUEFJUl9BU0siLCJBU0siLCJpc0FzayIsInR5cGUiLCJpc0JpZCIsImZpbHRlcmVkRGVjaW1hbHMiLCJhbW91bnQiLCJjdXJyZW5jeSIsImRlY2ltYWxQbGFjZXMiLCJUT0tFTl9ERUNJTUFMUyIsImRlZmF1bHQiLCJ0b1N0cmluZyIsInBhcnNlVGlja2VyIiwib3JkZXIiLCJidXlDdXJyZW5jeSIsImJ1eSIsInNlbGxDdXJyZW5jeSIsInNlbGwiLCJCUyIsInRvVXBwZXJDYXNlIiwiU0IiLCJUUkFERV9USUNLRVJTIiwiaW5jbHVkZXMiLCJ0aWNrZXIiLCJFcnJvciIsInBhcnNlUGFpciIsInN0ciIsInRva2VucyIsInNwbGl0IiwibGVuZ3RoIiwicmV2ZXJzZSIsImpvaW4iLCJNQUlOIiwiQkFTRSIsIlBhaXIiLCJjb25zdHJ1Y3RvciIsInByaWNlIiwibWFpbiIsImJhc2UiLCJ0b09yZGVyIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRpdiIsImJ1eUFtb3VudCIsInNlbGxBbW91bnQiLCJleGNoYW5nZVJhdGUiLCJmcm9tT3JkZXIiLCJtYWluX2Ftb3VudCIsImJhc2VfYW1vdW50IiwiZHAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxXQUFXQyxxQkFBV0MsR0FBNUI7QUFDQSxNQUFNQyxXQUFXRixxQkFBV0csR0FBNUI7O0FBRUEsTUFBTUMsUUFBU0MsSUFBRCxJQUFXQSxTQUFTTCxxQkFBV0csR0FBN0M7QUFDQSxNQUFNRyxRQUFTRCxJQUFELElBQVdBLFNBQVNMLHFCQUFXQyxHQUE3Qzs7QUFFQSxNQUFNTSxtQkFBbUIsQ0FBQyxFQUFFQyxNQUFGLEVBQVVDLFFBQVYsRUFBRCxLQUN2Qix5QkFBVUQsTUFBVixFQUFrQkUsYUFBbEIsQ0FBZ0NDLHlCQUFlRixR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YUMsR0FBZixFQUFvQkMsY0FBY0MsSUFBbEMsRUFBd0M0QixTQUF4QyxFQUFtREMsVUFBbkQsS0FBa0VqQyxLQUF4RTs7QUFFQSxVQUFNLEVBQUVVLE1BQUYsRUFBVXBCLElBQVYsS0FBbUJTLFlBQVlDLEtBQVosQ0FBekI7O0FBRUE7QUFDQSxVQUFNb0MsY0FBYyx5QkFBVTlDLFFBQVFILFFBQVIsR0FBbUI4QyxVQUFuQixHQUFnQ0QsU0FBMUMsQ0FBcEI7QUFDQSxVQUFNSyxjQUFjLHlCQUFVL0MsUUFBUUgsUUFBUixHQUFtQjZDLFNBQW5CLEdBQStCQyxVQUF6QyxDQUFwQjs7QUFFQSxXQUFPLElBQUlaLElBQUosQ0FBUztBQUNkWCxZQURjO0FBRWRwQixVQUZjO0FBR2RpQyxhQUFPYyxZQUFZTixHQUFaLENBQWdCSyxXQUFoQixDQUhPO0FBSWQzQyxjQUFRNEM7QUFKTSxLQUFULENBQVA7QUFNRDs7QUFFRHZDLGFBQVc7QUFDVCxVQUFNUixPQUFPLEtBQUtBLElBQUwsS0FBY0wscUJBQVdDLEdBQXpCLEdBQStCLEtBQS9CLEdBQXVDLEtBQXBEO0FBQ0EsV0FBUSxHQUFFSSxJQUFLLE1BQUssS0FBS29CLE1BQU8sTUFBSyxLQUFLYSxLQUFMLENBQVdlLEVBQVgsQ0FBYyxDQUFkLENBQWlCLE1BQUssS0FBSzdDLE1BQU8sRUFBdkU7QUFDRDs7QUFFREYsVUFBUTtBQUNOLFdBQU9BLE1BQU0sS0FBS0QsSUFBWCxDQUFQO0FBQ0Q7O0FBRURELFVBQVE7QUFDTixXQUFPQSxNQUFNLEtBQUtDLElBQVgsQ0FBUDtBQUNEO0FBM0Z1QjtrQkFBTCtCLEkiLCJmaWxlIjoiUGFpci5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnXG5cbmltcG9ydCBUT0tFTl9ERUNJTUFMUyBmcm9tICcuLi9jb25maWcvY29uc3RhbnRzL1RPS0VOX0RFQ0lNQUxTJ1xuaW1wb3J0IFRSQURFX1RJQ0tFUlMgZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cy9UUkFERV9USUNLRVJTJ1xuaW1wb3J0IFBBSVJfVFlQRVMgZnJvbSAnLi4vY29uZmlnL2NvbnN0YW50cy9QQUlSX1RZUEVTJ1xuXG5jb25zdCBQQUlSX0JJRCA9IFBBSVJfVFlQRVMuQklEXG5jb25zdCBQQUlSX0FTSyA9IFBBSVJfVFlQRVMuQVNLXG5cbmNvbnN0IGlzQXNrID0gKHR5cGUpID0+ICh0eXBlID09PSBQQUlSX1RZUEVTLkFTSylcbmNvbnN0IGlzQmlkID0gKHR5cGUpID0+ICh0eXBlID09PSBQQUlSX1RZUEVTLkJJRClcblxuY29uc3QgZmlsdGVyZWREZWNpbWFscyA9ICh7IGFtb3VudCwgY3VycmVuY3kgfSkgPT5cbiAgQmlnTnVtYmVyKGFtb3VudCkuZGVjaW1hbFBsYWNlcyhUT0tFTl9ERUNJTUFMU1tjdXJyZW5jeV0gfHwgVE9LRU5fREVDSU1BTFMuZGVmYXVsdCkudG9TdHJpbmcoKVxuXG5jb25zdCBwYXJzZVRpY2tlciA9IChvcmRlcikgPT4ge1xuICBjb25zdCB7IGJ1eUN1cnJlbmN5OiBidXksIHNlbGxDdXJyZW5jeTogc2VsbCB9ID0gb3JkZXJcblxuICBjb25zdCBCUyA9IGAke2J1eX0tJHtzZWxsfWAudG9VcHBlckNhc2UoKSAvLyBidXlzIEVUSCwgc2VsbHMgQlRDLCBCSURcbiAgY29uc3QgU0IgPSBgJHtzZWxsfS0ke2J1eX1gLnRvVXBwZXJDYXNlKCkgLy8gc2VsbHMgRVRIID0gQVNLXG5cbiAgaWYgKFRSQURFX1RJQ0tFUlMuaW5jbHVkZXMoQlMpKSByZXR1cm4geyB0aWNrZXI6IEJTLCB0eXBlOiBQQUlSX0JJRCB9XG4gIGlmIChUUkFERV9USUNLRVJTLmluY2x1ZGVzKFNCKSkgcmV0dXJuIHsgdGlja2VyOiBTQiwgdHlwZTogUEFJUl9BU0sgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgUGFyc2VUaWNrZXJFcnJvcjogTm8gc3VjaCB0aWNrZXJzOiAke0JTfSwke1NCfWApXG59XG4vL0BUb0RvIG1vdmUgdG8gb3V0c2lkZVxuY29uc3QgcGFyc2VQYWlyID0gKHN0cikgPT4ge1xuICBpZiAoIXN0cikgdGhyb3cgbmV3IEVycm9yKGBFbXB0eSBzdHJpbmc6ICR7c3RyfWApXG4gIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKGBQYXJzZVRpY2tlckVycm9yOiBOb3QgYSBzdHJpbmc6ICR7c3RyfWApXG5cbiAgY29uc3QgdG9rZW5zID0gc3RyLnNwbGl0KCctJylcbiAgaWYgKCF0b2tlbnMubGVuZ3RoID09IDIpIHRocm93IG5ldyBFcnJvcihgUGFyc2VUaWNrZXJFcnJvcjogV3JvbmcgdG9rZW5zOiAke3N0cn1gKVxuXG4gIGlmIChUUkFERV9USUNLRVJTLmluY2x1ZGVzKHN0cikpIHsgc3RyID0gc3RyIH0gZWxzZSB7IHN0ciA9IHRva2Vucy5yZXZlcnNlKCkuam9pbignLScpIH1cblxuICBpZiAoIVRSQURFX1RJQ0tFUlMuaW5jbHVkZXMoc3RyKSkgdGhyb3cgbmV3IEVycm9yKGBQYXJzZVRpY2tlckVycm9yOiBUaWNrZXIgbm90IGZvdW5kOiAke3N0cn1gKVxuXG4gIGNvbnN0IE1BSU4gPSB0b2tlbnNbMF0udG9VcHBlckNhc2UoKVxuICBjb25zdCBCQVNFID0gdG9rZW5zWzFdLnRvVXBwZXJDYXNlKClcblxuICByZXR1cm4ge1xuICAgIE1BSU4sXG4gICAgQkFTRSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYWlyIHtcbiAgY29uc3RydWN0b3IgKHsgcHJpY2UsIGFtb3VudCwgdGlja2VyLCB0eXBlIH0pIHtcbiAgICB0aGlzLnByaWNlID0gQmlnTnVtYmVyKHByaWNlKVxuICAgIHRoaXMuYW1vdW50ID0gQmlnTnVtYmVyKGFtb3VudClcblxuICAgIGNvbnN0IHsgTUFJTiwgQkFTRSB9ID0gcGFyc2VQYWlyKHRpY2tlcilcbiAgICBpZiAoIU1BSU4gfHwgIUJBU0UpIHRocm93IG5ldyBFcnJvcihgQ3JlYXRlT3JkZXJFcnJvcjogTm8gY3VycmVuY3k6ICR7bWFpbn0tJHtiYXNlfWApXG5cbiAgICB0aGlzLnRpY2tlciA9IHRpY2tlclxuICAgIHRoaXMubWFpbiA9IE1BSU5cbiAgICB0aGlzLmJhc2UgPSBCQVNFXG4gICAgdGhpcy50eXBlID0gdHlwZSA9PT0gUEFJUl9UWVBFUy5CSUQgPyBQQUlSX1RZUEVTLkJJRCA6IFBBSVJfVFlQRVMuQVNLXG4gIH1cblxuICAvKlxuICAqIDEwIEVUSCAtPiAxIEJUQ1xuICAqXG4gICogdGlja2VyOiBFVEgtQlRDXG4gICpcbiAgKiBTbyB3ZSBhcmUgb24gRVRIIG1hcmtldCwgdGh1czpcbiAgKiAgIC0gQVNLIG9yZGVycyBhcmUgU0VMTCBFVEggKGZvciBCVEMpLFxuICAqICAgLSBCSUQgb3JkZXJzIGFyZSBCVVkgRVRIIChmb3IgQlRDKVxuICAqXG4gICogVGhpcyBvcmRlciBpcyBTRUxMSU5HIEVUSCwgdG8gaXQncyBBU0tcbiAgKiB0eXBlOiBCSUQgPSB0cnVlLCBBU0sgPSBmYWxzZVxuICAqXG4gICogUHJpY2UgaXMgYWxzbyBjYWxjdWxhdGVkIGluIEJUQywgd2hpbGUgYW1vdW50IGluIEVUSFxuICAqIHByaWNlOiAwLjFcbiAgKiBhbW91bnQ6IDEwXG4gICpcbiAgKlxuICAqIFNvLCBmb3IgdHlwZSA9IEFTS1xuICAqXG4gICogYnV5Q3VycmVuY3k6IEJUQyA9IGJhc2VcbiAgKiBzZWxsQ3VycmVuY3k6IEVUSCA9IG1haW5cbiAgKiBidXlBbW91bnQ6IDEgQlRDID0gKDAuMSBCVEMvRVRIKSAqIDEwIEVUSCA9IHByaWNlICogYW1vdW50XG4gICogc2VsbEFtb3VudDogMTAgRVRIID0gMTAgRVRIID0gYW1vdW50XG4gICpcbiAgKi9cbiAgdG9PcmRlciAoKSB7XG4gICAgY29uc3QgeyB0aWNrZXIsIHR5cGUsIHByaWNlLCBhbW91bnQgfSA9IHRoaXNcblxuICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYGNyZWF0ZSBvcmRlciAke3RoaXN9YClcbiAgICBjb25zdCB7IE1BSU4sIEJBU0UgfSA9IHBhcnNlUGFpcih0aWNrZXIpXG4gICAgaWYgKCFNQUlOIHx8ICFCQVNFKSB0aHJvdyBuZXcgRXJyb3IoYENyZWF0ZU9yZGVyRXJyb3I6IE5vIGN1cnJlbmN5OiAke21haW59LSR7YmFzZX1gKVxuXG4gICAgaWYgKCFbUEFJUl9BU0ssIFBBSVJfQklEXS5pbmNsdWRlcyh0eXBlKSkgdGhyb3cgbmV3IEVycm9yKGBDcmVhdGVPcmRlckVycm9yOiBXcm9uZyBvcmRlciB0eXBlOiAke3R5cGV9YClcblxuICAgIGNvbnN0IGJhc2UgPSB7IGN1cnJlbmN5OiBCQVNFLCBhbW91bnQ6IGFtb3VudCB9XG4gICAgY29uc3QgbWFpbiA9IHsgY3VycmVuY3k6IE1BSU4sIGFtb3VudDogYW1vdW50LmRpdihwcmljZSkgfVxuXG4gICAgY29uc3QgYnV5ID0gKHR5cGUgPT0gUEFJUl9BU0spID8gYmFzZSA6IG1haW5cbiAgICBjb25zdCBzZWxsID0gKHR5cGUgPT0gUEFJUl9BU0spID8gbWFpbiA6IGJhc2VcblxuICAgIHJldHVybiB7XG4gICAgICBidXlDdXJyZW5jeTogYnV5LmN1cnJlbmN5LFxuICAgICAgc2VsbEN1cnJlbmN5OiBzZWxsLmN1cnJlbmN5LFxuICAgICAgYnV5QW1vdW50OiBmaWx0ZXJlZERlY2ltYWxzKGJ1eSksXG4gICAgICBzZWxsQW1vdW50OiBmaWx0ZXJlZERlY2ltYWxzKHNlbGwpLFxuICAgICAgZXhjaGFuZ2VSYXRlOiBwcmljZSwgLy8gaXNBc2sodHlwZSkgPyBwcmljZSA6IDEvcHJpY2VcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZnJvbU9yZGVyIChvcmRlcikge1xuICAgIGNvbnN0IHsgYnV5Q3VycmVuY3k6IGJ1eSwgc2VsbEN1cnJlbmN5OiBzZWxsLCBidXlBbW91bnQsIHNlbGxBbW91bnQgfSA9IG9yZGVyXG5cbiAgICBjb25zdCB7IHRpY2tlciwgdHlwZSB9ID0gcGFyc2VUaWNrZXIob3JkZXIpXG5cbiAgICAvLyBBU0sgbWVhbnMgc2VsbEN1cnJlbmN5IGlzIEVUSCwgdGhlbiBzZWxsIGlzIG1haW5cbiAgICBjb25zdCBtYWluX2Ftb3VudCA9IEJpZ051bWJlcih0eXBlID09IFBBSVJfQVNLID8gc2VsbEFtb3VudCA6IGJ1eUFtb3VudClcbiAgICBjb25zdCBiYXNlX2Ftb3VudCA9IEJpZ051bWJlcih0eXBlID09IFBBSVJfQVNLID8gYnV5QW1vdW50IDogc2VsbEFtb3VudClcblxuICAgIHJldHVybiBuZXcgUGFpcih7XG4gICAgICB0aWNrZXIsXG4gICAgICB0eXBlLFxuICAgICAgcHJpY2U6IGJhc2VfYW1vdW50LmRpdihtYWluX2Ftb3VudCksXG4gICAgICBhbW91bnQ6IGJhc2VfYW1vdW50LFxuICAgIH0pXG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCB0eXBlID0gdGhpcy50eXBlID09PSBQQUlSX1RZUEVTLkJJRCA/ICdiaWQnIDogJ2FzaydcbiAgICByZXR1cm4gYCR7dHlwZX0gXFx0JHt0aGlzLnRpY2tlcn0gXFx0JHt0aGlzLnByaWNlLmRwKDgpfSBcXHQke3RoaXMuYW1vdW50fWBcbiAgfVxuXG4gIGlzQmlkKCkge1xuICAgIHJldHVybiBpc0JpZCh0aGlzLnR5cGUpXG4gIH1cblxuICBpc0FzaygpIHtcbiAgICByZXR1cm4gaXNBc2sodGhpcy50eXBlKVxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Pair.js"
      ],
      "names": [
        "PAIR_BID",
        "PAIR_TYPES",
        "BID",
        "PAIR_ASK",
        "ASK",
        "isAsk",
        "type",
        "isBid",
        "filteredDecimals",
        "amount",
        "currency",
        "decimalPlaces",
        "TOKEN_DECIMALS",
        "default",
        "toString",
        "parseTicker",
        "order",
        "buyCurrency",
        "buy",
        "sellCurrency",
        "sell",
        "BS",
        "toUpperCase",
        "SB",
        "TRADE_TICKERS",
        "includes",
        "ticker",
        "Error",
        "parsePair",
        "str",
        "tokens",
        "split",
        "length",
        "reverse",
        "join",
        "MAIN",
        "BASE",
        "Pair",
        "constructor",
        "price",
        "main",
        "base",
        "toOrder",
        "console",
        "log",
        "Date",
        "toISOString",
        "div",
        "buyAmount",
        "sellAmount",
        "exchangeRate",
        "fromOrder",
        "main_amount",
        "base_amount",
        "dp"
      ],
      "mappings": "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",
      "file": "Pair.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\n\nimport TOKEN_DECIMALS from '../config/constants/TOKEN_DECIMALS'\nimport TRADE_TICKERS from '../config/constants/TRADE_TICKERS'\nimport PAIR_TYPES from '../config/constants/PAIR_TYPES'\n\nconst PAIR_BID = PAIR_TYPES.BID\nconst PAIR_ASK = PAIR_TYPES.ASK\n\nconst isAsk = (type) => (type === PAIR_TYPES.ASK)\nconst isBid = (type) => (type === PAIR_TYPES.BID)\n\nconst filteredDecimals = ({ amount, currency }) =>\n  BigNumber(amount).decimalPlaces(TOKEN_DECIMALS[currency] || TOKEN_DECIMALS.default).toString()\n\nconst parseTicker = (order) => {\n  const { buyCurrency: buy, sellCurrency: sell } = order\n\n  const BS = `${buy}-${sell}`.toUpperCase() // buys ETH, sells BTC, BID\n  const SB = `${sell}-${buy}`.toUpperCase() // sells ETH = ASK\n\n  if (TRADE_TICKERS.includes(BS)) return { ticker: BS, type: PAIR_BID }\n  if (TRADE_TICKERS.includes(SB)) return { ticker: SB, type: PAIR_ASK }\n\n  throw new Error(`ParseTickerError: No such tickers: ${BS},${SB}`)\n}\n//@ToDo move to outside\nconst parsePair = (str) => {\n  if (!str) throw new Error(`Empty string: ${str}`)\n  if (typeof str !== 'string') throw new Error(`ParseTickerError: Not a string: ${str}`)\n\n  const tokens = str.split('-')\n  if (!tokens.length == 2) throw new Error(`ParseTickerError: Wrong tokens: ${str}`)\n\n  if (TRADE_TICKERS.includes(str)) { str = str } else { str = tokens.reverse().join('-') }\n\n  if (!TRADE_TICKERS.includes(str)) throw new Error(`ParseTickerError: Ticker not found: ${str}`)\n\n  const MAIN = tokens[0].toUpperCase()\n  const BASE = tokens[1].toUpperCase()\n\n  return {\n    MAIN,\n    BASE,\n  }\n}\n\nexport default class Pair {\n  constructor ({ price, amount, ticker, type }) {\n    this.price = BigNumber(price)\n    this.amount = BigNumber(amount)\n\n    const { MAIN, BASE } = parsePair(ticker)\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${main}-${base}`)\n\n    this.ticker = ticker\n    this.main = MAIN\n    this.base = BASE\n    this.type = type === PAIR_TYPES.BID ? PAIR_TYPES.BID : PAIR_TYPES.ASK\n  }\n\n  /*\n  * 10 ETH -> 1 BTC\n  *\n  * ticker: ETH-BTC\n  *\n  * So we are on ETH market, thus:\n  *   - ASK orders are SELL ETH (for BTC),\n  *   - BID orders are BUY ETH (for BTC)\n  *\n  * This order is SELLING ETH, to it's ASK\n  * type: BID = true, ASK = false\n  *\n  * Price is also calculated in BTC, while amount in ETH\n  * price: 0.1\n  * amount: 10\n  *\n  *\n  * So, for type = ASK\n  *\n  * buyCurrency: BTC = base\n  * sellCurrency: ETH = main\n  * buyAmount: 1 BTC = (0.1 BTC/ETH) * 10 ETH = price * amount\n  * sellAmount: 10 ETH = 10 ETH = amount\n  *\n  */\n  toOrder () {\n    const { ticker, type, price, amount } = this\n\n    console.log(new Date().toISOString(), `create order ${this}`)\n    const { MAIN, BASE } = parsePair(ticker)\n    if (!MAIN || !BASE) throw new Error(`CreateOrderError: No currency: ${main}-${base}`)\n\n    if (![PAIR_ASK, PAIR_BID].includes(type)) throw new Error(`CreateOrderError: Wrong order type: ${type}`)\n\n    const base = { currency: BASE, amount: amount }\n    const main = { currency: MAIN, amount: amount.div(price) }\n\n    const buy = (type == PAIR_ASK) ? base : main\n    const sell = (type == PAIR_ASK) ? main : base\n\n    return {\n      buyCurrency: buy.currency,\n      sellCurrency: sell.currency,\n      buyAmount: filteredDecimals(buy),\n      sellAmount: filteredDecimals(sell),\n      exchangeRate: price, // isAsk(type) ? price : 1/price\n    }\n  }\n\n  static fromOrder (order) {\n    const { buyCurrency: buy, sellCurrency: sell, buyAmount, sellAmount } = order\n\n    const { ticker, type } = parseTicker(order)\n\n    // ASK means sellCurrency is ETH, then sell is main\n    const main_amount = BigNumber(type == PAIR_ASK ? sellAmount : buyAmount)\n    const base_amount = BigNumber(type == PAIR_ASK ? buyAmount : sellAmount)\n\n    return new Pair({\n      ticker,\n      type,\n      price: base_amount.div(main_amount),\n      amount: base_amount,\n    })\n  }\n\n  toString() {\n    const type = this.type === PAIR_TYPES.BID ? 'bid' : 'ask'\n    return `${type} \\t${this.ticker} \\t${this.price.dp(8)} \\t${this.amount}`\n  }\n\n  isBid() {\n    return isBid(this.type)\n  }\n\n  isAsk() {\n    return isAsk(this.type)\n  }\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TOKEN_DECIMALS.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TOKEN_DECIMALS.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TOKEN_DECIMALS.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TOKEN_DECIMALS.js",
      "sourceFileName": "TOKEN_DECIMALS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TOKEN_DECIMALS"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  BTC: 8,\n  ETH: 18,\n  SWAP: 18,\n  XSAT: 18,\n  HDP: 4,\n  BTRM: 18,\n  NOXON: 0,\n  USDT: 6,\n  SNM: 18,\n  default: 18\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRPS0VOX0RFQ0lNQUxTLmpzIl0sIm5hbWVzIjpbIkJUQyIsIkVUSCIsIlNXQVAiLCJYU0FUIiwiSERQIiwiQlRSTSIsIk5PWE9OIiwiVVNEVCIsIlNOTSIsImRlZmF1bHQiXSwibWFwcGluZ3MiOiI7Ozs7O2tCQUFlO0FBQ2JBLE9BQUssQ0FEUTtBQUViQyxPQUFLLEVBRlE7QUFHYkMsUUFBTSxFQUhPO0FBSWJDLFFBQU0sRUFKTztBQUtiQyxPQUFLLENBTFE7QUFNYkMsUUFBTSxFQU5PO0FBT2JDLFNBQU8sQ0FQTTtBQVFiQyxRQUFNLENBUk87QUFTYkMsT0FBSyxFQVRRO0FBVWJDLFdBQVM7QUFWSSxDIiwiZmlsZSI6IlRPS0VOX0RFQ0lNQUxTLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvY29uZmlnL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHtcbiAgQlRDOiA4LFxuICBFVEg6IDE4LFxuICBTV0FQOiAxOCxcbiAgWFNBVDogMTgsXG4gIEhEUDogNCxcbiAgQlRSTTogMTgsXG4gIE5PWE9OOiAwLFxuICBVU0RUOiA2LFxuICBTTk06IDE4LFxuICBkZWZhdWx0OiAxOCxcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TOKEN_DECIMALS.js"
      ],
      "names": [
        "BTC",
        "ETH",
        "SWAP",
        "XSAT",
        "HDP",
        "BTRM",
        "NOXON",
        "USDT",
        "SNM",
        "default"
      ],
      "mappings": ";;;;;kBAAe;AACbA,OAAK,CADQ;AAEbC,OAAK,EAFQ;AAGbC,QAAM,EAHO;AAIbC,QAAM,EAJO;AAKbC,OAAK,CALQ;AAMbC,QAAM,EANO;AAObC,SAAO,CAPM;AAQbC,QAAM,CARO;AASbC,OAAK,EATQ;AAUbC,WAAS;AAVI,C",
      "file": "TOKEN_DECIMALS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "export default {\n  BTC: 8,\n  ETH: 18,\n  SWAP: 18,\n  XSAT: 18,\n  HDP: 4,\n  BTRM: 18,\n  NOXON: 0,\n  USDT: 6,\n  SNM: 18,\n  default: 18,\n}\n"
      ]
    },
    "mtime": 1571219460000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TRADE_TICKERS.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TRADE_TICKERS.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TRADE_TICKERS.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TRADE_TICKERS.js",
      "sourceFileName": "TRADE_TICKERS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TRADE_TICKERS"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// constants, no other orders are allowed\n\nexports.default = ['ETH-BTC', 'SWAP-BTC', 'DAI-BTC', 'DAI-USDT', 'BTRM-BTC', 'LEV-BTC', 'DRT-BTC', 'ARN-BTC', 'DEB-BTC', 'GUSD-BTC', 'YUP-BTC', 'JOT-BTC', 'DCN-BTC', 'MBRS-BTC', 'SCT-BTC', 'NEXO-BTC', 'BNTY-BTC', 'PBL-BTC', 'SENC-BTC', 'MTH-BTC', 'STAR-BTC', 'XYO-BTC', 'XNK-BTC', 'LOC-BTC', 'KEY-BTC', 'DAI-BTC', 'TNT-BTC', 'AVT-BTC', 'HBT-BTC', 'CS-BTC', 'PIX-BTC', 'DAX-BTC', 'DATA-BTC', 'SYC2-BTC', 'WBTC-BTC', 'XSAT-BTC', 'HDP-BTC', 'USDT-BTC', 'SNM-BTC', 'JACK-BTC', 'GHOST-BTC'];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRSQURFX1RJQ0tFUlMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7a0JBRWUsQ0FDYixTQURhLEVBRWIsVUFGYSxFQUdiLFNBSGEsRUFJYixVQUphLEVBS2IsVUFMYSxFQU1iLFNBTmEsRUFPYixTQVBhLEVBUWIsU0FSYSxFQVNiLFNBVGEsRUFVYixVQVZhLEVBV2IsU0FYYSxFQVliLFNBWmEsRUFhYixTQWJhLEVBY2IsVUFkYSxFQWViLFNBZmEsRUFnQmIsVUFoQmEsRUFpQmIsVUFqQmEsRUFrQmIsU0FsQmEsRUFtQmIsVUFuQmEsRUFvQmIsU0FwQmEsRUFxQmIsVUFyQmEsRUFzQmIsU0F0QmEsRUF1QmIsU0F2QmEsRUF3QmIsU0F4QmEsRUF5QmIsU0F6QmEsRUEwQmIsU0ExQmEsRUEyQmIsU0EzQmEsRUE0QmIsU0E1QmEsRUE2QmIsU0E3QmEsRUE4QmIsUUE5QmEsRUErQmIsU0EvQmEsRUFnQ2IsU0FoQ2EsRUFpQ2IsVUFqQ2EsRUFrQ2IsVUFsQ2EsRUFtQ2IsVUFuQ2EsRUFvQ2IsVUFwQ2EsRUFxQ2IsU0FyQ2EsRUFzQ2IsVUF0Q2EsRUF1Q2IsU0F2Q2EsRUF3Q2IsVUF4Q2EsRUF5Q2IsV0F6Q2EsQyIsImZpbGUiOiJUUkFERV9USUNLRVJTLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvY29uZmlnL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbnN0YW50cywgbm8gb3RoZXIgb3JkZXJzIGFyZSBhbGxvd2VkXG5cbmV4cG9ydCBkZWZhdWx0IFtcbiAgJ0VUSC1CVEMnLFxuICAnU1dBUC1CVEMnLFxuICAnREFJLUJUQycsXG4gICdEQUktVVNEVCcsXG4gICdCVFJNLUJUQycsXG4gICdMRVYtQlRDJyxcbiAgJ0RSVC1CVEMnLFxuICAnQVJOLUJUQycsXG4gICdERUItQlRDJyxcbiAgJ0dVU0QtQlRDJyxcbiAgJ1lVUC1CVEMnLFxuICAnSk9ULUJUQycsXG4gICdEQ04tQlRDJyxcbiAgJ01CUlMtQlRDJyxcbiAgJ1NDVC1CVEMnLFxuICAnTkVYTy1CVEMnLFxuICAnQk5UWS1CVEMnLFxuICAnUEJMLUJUQycsXG4gICdTRU5DLUJUQycsXG4gICdNVEgtQlRDJyxcbiAgJ1NUQVItQlRDJyxcbiAgJ1hZTy1CVEMnLFxuICAnWE5LLUJUQycsXG4gICdMT0MtQlRDJyxcbiAgJ0tFWS1CVEMnLFxuICAnREFJLUJUQycsXG4gICdUTlQtQlRDJyxcbiAgJ0FWVC1CVEMnLFxuICAnSEJULUJUQycsXG4gICdDUy1CVEMnLFxuICAnUElYLUJUQycsXG4gICdEQVgtQlRDJyxcbiAgJ0RBVEEtQlRDJyxcbiAgJ1NZQzItQlRDJyxcbiAgJ1dCVEMtQlRDJyxcbiAgJ1hTQVQtQlRDJyxcbiAgJ0hEUC1CVEMnLFxuICAnVVNEVC1CVEMnLFxuICAnU05NLUJUQycsXG4gICdKQUNLLUJUQycsXG4gICdHSE9TVC1CVEMnLFxuXVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TRADE_TICKERS.js"
      ],
      "names": [],
      "mappings": ";;;;;AAAA;;kBAEe,CACb,SADa,EAEb,UAFa,EAGb,SAHa,EAIb,UAJa,EAKb,UALa,EAMb,SANa,EAOb,SAPa,EAQb,SARa,EASb,SATa,EAUb,UAVa,EAWb,SAXa,EAYb,SAZa,EAab,SAba,EAcb,UAda,EAeb,SAfa,EAgBb,UAhBa,EAiBb,UAjBa,EAkBb,SAlBa,EAmBb,UAnBa,EAoBb,SApBa,EAqBb,UArBa,EAsBb,SAtBa,EAuBb,SAvBa,EAwBb,SAxBa,EAyBb,SAzBa,EA0Bb,SA1Ba,EA2Bb,SA3Ba,EA4Bb,SA5Ba,EA6Bb,SA7Ba,EA8Bb,QA9Ba,EA+Bb,SA/Ba,EAgCb,SAhCa,EAiCb,UAjCa,EAkCb,UAlCa,EAmCb,UAnCa,EAoCb,UApCa,EAqCb,SArCa,EAsCb,UAtCa,EAuCb,SAvCa,EAwCb,UAxCa,EAyCb,WAzCa,C",
      "file": "TRADE_TICKERS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "// constants, no other orders are allowed\n\nexport default [\n  'ETH-BTC',\n  'SWAP-BTC',\n  'DAI-BTC',\n  'DAI-USDT',\n  'BTRM-BTC',\n  'LEV-BTC',\n  'DRT-BTC',\n  'ARN-BTC',\n  'DEB-BTC',\n  'GUSD-BTC',\n  'YUP-BTC',\n  'JOT-BTC',\n  'DCN-BTC',\n  'MBRS-BTC',\n  'SCT-BTC',\n  'NEXO-BTC',\n  'BNTY-BTC',\n  'PBL-BTC',\n  'SENC-BTC',\n  'MTH-BTC',\n  'STAR-BTC',\n  'XYO-BTC',\n  'XNK-BTC',\n  'LOC-BTC',\n  'KEY-BTC',\n  'DAI-BTC',\n  'TNT-BTC',\n  'AVT-BTC',\n  'HBT-BTC',\n  'CS-BTC',\n  'PIX-BTC',\n  'DAX-BTC',\n  'DATA-BTC',\n  'SYC2-BTC',\n  'WBTC-BTC',\n  'XSAT-BTC',\n  'HDP-BTC',\n  'USDT-BTC',\n  'SNM-BTC',\n  'JACK-BTC',\n  'GHOST-BTC',\n]\n"
      ]
    },
    "mtime": 1592861765000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/PAIR_TYPES.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/PAIR_TYPES.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/PAIR_TYPES.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "PAIR_TYPES.js",
      "sourceFileName": "PAIR_TYPES.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "PAIR_TYPES"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Object.freeze({\n  BID: 'bid',\n  ASK: 'ask'\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBBSVJfVFlQRVMuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZnJlZXplIiwiQklEIiwiQVNLIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFBZUEsT0FBT0MsTUFBUCxDQUFjO0FBQzNCQyxPQUFLLEtBRHNCO0FBRTNCQyxPQUFLO0FBRnNCLENBQWQsQyIsImZpbGUiOiJQQUlSX1RZUEVTLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvY29uZmlnL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBCSUQ6ICdiaWQnLFxuICBBU0s6ICdhc2snLFxufSlcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "PAIR_TYPES.js"
      ],
      "names": [
        "Object",
        "freeze",
        "BID",
        "ASK"
      ],
      "mappings": ";;;;;kBAAeA,OAAOC,MAAP,CAAc;AAC3BC,OAAK,KADsB;AAE3BC,OAAK;AAFsB,CAAd,C",
      "file": "PAIR_TYPES.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "export default Object.freeze({\n  BID: 'bid',\n  ASK: 'ask',\n})\n"
      ]
    },
    "mtime": 1544526360000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/start/swapStatus.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/start\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "needsRefund",
            "canBeDeleted",
            "smartRefund"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "needsRefund",
              "exported": "needsRefund"
            },
            {
              "kind": "local",
              "local": "canBeDeleted",
              "exported": "canBeDeleted"
            },
            {
              "kind": "local",
              "local": "smartRefund",
              "exported": "smartRefund"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/start/swapStatus.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/start/swapStatus.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "swapStatus.js",
      "sourceFileName": "swapStatus.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "swapStatus"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst defaultLockTime = 60 * 60 * 3;\n\n// Date.now() gives ms\nconst utcNow = () => Math.floor(Date.now() / 1000);\n\nconst lockTimePassed = (btcLockTime, period = defaultLockTime) => {\n  //     |     --- 3 hours ---    BTC locktime\n  //   created                           |\n  //     |  + period ------|             |\n  //     |                 |             |\n  //     |                 |             |\n  //     |         now     |             |\n  //     v          v      v             v\n  // –––––––––––––––––––––––––––––––––––––––––––––––\n\n  const created = btcLockTime - defaultLockTime;\n  const now = utcNow();\n\n  return now > created + period;\n};\n\nconst needsRefund = exports.needsRefund = swap => {\n  const { id } = swap;\n\n  const { state } = swap.flow;\n\n  const { step, btcScriptValues, isFinished, isRefunded, isStoppedSwap } = state;\n\n  console.log(new Date().toISOString(), `swap`, id, `step`, step);\n\n  if (step <= 2) {\n    return false;\n  }\n\n  if (!btcScriptValues) {\n    return false;\n  }\n\n  if (isFinished) {\n    return false;\n  }\n\n  if (isRefunded) {\n    return false;\n  }\n\n  if (isStoppedSwap) {\n    return false;\n  }\n\n  const { lockTime } = btcScriptValues;\n  const [head, base] = swap.flow._flowName.split('2');\n\n  if (head === 'BTC') {\n    // ['BTC','BCH','USDT'].includes(head)) {\n    // BTC to _ETH_\n\n    const { btcScriptCreatingTransactionHash } = state;\n\n    if (!btcScriptCreatingTransactionHash) {\n      console.error(new Date().toISOString(), `Unknown creating tx hash`);\n    } else {\n      console.error(new Date().toISOString(), `Found tx hash: ${btcScriptCreatingTransactionHash}`);\n    }\n\n    const { scriptAddress } = state;\n\n    if (scriptAddress) {\n      console.error(new Date().toISOString(), `Found script address: ${scriptAddress}`);\n    }\n\n    return lockTimePassed(lockTime, defaultLockTime);\n  }\n\n  if (base === 'BTC') {\n    // (['BTC','BCH','USDT'].includes(base)) {\n    //  _ETH_ to BTC\n\n    const { ethSwapCreationTransactionHash } = state;\n\n    if (!ethSwapCreationTransactionHash) {\n      console.error(new Date().toISOString(), `Unknown creating tx hash`);\n    } else {\n      console.error(new Date().toISOString(), `Found tx hash: ${ethSwapCreationTransactionHash}`);\n    }\n\n    // ETH locktime is 1 hour.\n\n    return lockTimePassed(lockTime, defaultLockTime);\n  }\n\n  throw new Error(`Unknown flow type: ${swap.flow._flowName}`);\n};\n\nconst canBeDeleted = exports.canBeDeleted = (() => {\n  var _ref = _asyncToGenerator(function* (swap) {\n    const { state } = swap.flow;\n\n    const isParticipantOnline = swap.room.getOnlineParticipant();\n\n    const { step, btcScriptValues, isFinished, isRefunded, isStoppedSwap } = state;\n\n    const lifeTimeout = swap.checkTimeout(defaultLockTime);\n\n    const neverStarted = step <= 2 && !isParticipantOnline && lifeTimeout;\n\n    if (isRefunded) {\n      const RefundIsSuccess = yield swap.flow.isRefundSuccess();\n      if (!RefundIsSuccess) {\n        console.log(new Date().toISOString(), `[SWAP ${swap.id}]: isRefunded=true, but TX id is not correct.`);\n        return false;\n      } else {\n        console.log(new Date().toISOString(), `[SWAP ${swap.id}]: isRefunded=true, probably can be deleted, needs manual interference`);\n      }\n    }\n\n    return isFinished || neverStarted || isRefunded || isStoppedSwap;\n  });\n\n  return function canBeDeleted(_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nconst smartRefund = exports.smartRefund = swap => {\n  if (needsRefund(swap)) {\n    return swap.flow.tryRefund();\n  }\n};\n\nexports.default = swap => {\n  return needsRefund(swap);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3YXBTdGF0dXMuanMiXSwibmFtZXMiOlsiZGVmYXVsdExvY2tUaW1lIiwidXRjTm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsIm5vdyIsImxvY2tUaW1lUGFzc2VkIiwiYnRjTG9ja1RpbWUiLCJwZXJpb2QiLCJjcmVhdGVkIiwibmVlZHNSZWZ1bmQiLCJzd2FwIiwiaWQiLCJzdGF0ZSIsImZsb3ciLCJzdGVwIiwiYnRjU2NyaXB0VmFsdWVzIiwiaXNGaW5pc2hlZCIsImlzUmVmdW5kZWQiLCJpc1N0b3BwZWRTd2FwIiwiY29uc29sZSIsImxvZyIsInRvSVNPU3RyaW5nIiwibG9ja1RpbWUiLCJoZWFkIiwiYmFzZSIsIl9mbG93TmFtZSIsInNwbGl0IiwiYnRjU2NyaXB0Q3JlYXRpbmdUcmFuc2FjdGlvbkhhc2giLCJlcnJvciIsInNjcmlwdEFkZHJlc3MiLCJldGhTd2FwQ3JlYXRpb25UcmFuc2FjdGlvbkhhc2giLCJFcnJvciIsImNhbkJlRGVsZXRlZCIsImlzUGFydGljaXBhbnRPbmxpbmUiLCJyb29tIiwiZ2V0T25saW5lUGFydGljaXBhbnQiLCJsaWZlVGltZW91dCIsImNoZWNrVGltZW91dCIsIm5ldmVyU3RhcnRlZCIsIlJlZnVuZElzU3VjY2VzcyIsImlzUmVmdW5kU3VjY2VzcyIsInNtYXJ0UmVmdW5kIiwidHJ5UmVmdW5kIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU1BLGtCQUFrQixLQUFLLEVBQUwsR0FBVSxDQUFsQzs7QUFFQTtBQUNBLE1BQU1DLFNBQVMsTUFBTUMsS0FBS0MsS0FBTCxDQUFXQyxLQUFLQyxHQUFMLEtBQWEsSUFBeEIsQ0FBckI7O0FBRUEsTUFBTUMsaUJBQWlCLENBQUNDLFdBQUQsRUFBY0MsU0FBU1IsZUFBdkIsS0FBMkM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFNUyxVQUFVRixjQUFjUCxlQUE5QjtBQUNBLFFBQU1LLE1BQU1KLFFBQVo7O0FBRUEsU0FB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QixDQUFwQjs7QUFFQSxVQUFNdUMsZUFBZXhCLFFBQVEsQ0FBUixJQUFhLENBQUNtQixtQkFBZCxJQUFxQ0csV0FBMUQ7O0FBRUEsUUFBSW5CLFVBQUosRUFBZ0I7QUFDZCxZQUFNc0Isa0JBQWtCLE1BQU03QixLQUFLRyxJQUFMLENBQVUyQixlQUFWLEVBQTlCO0FBQ0EsVUFBSSxDQUFDRCxlQUFMLEVBQXNCO0FBQ3BCcEIsZ0JBQVFDLEdBQVIsQ0FBWSxJQUFJakIsSUFBSixHQUFXa0IsV0FBWCxFQUFaLEVBQXVDLFNBQVFYLEtBQUtDLEVBQUcsK0NBQXZEO0FBQ0EsZUFBTyxLQUFQO0FBQ0QsT0FIRCxNQUdPO0FBQ0xRLGdCQUFRQyxHQUFSLENBQVksSUFBSWpCLElBQUosR0FBV2tCLFdBQVgsRUFBWixFQUF1QyxTQUFRWCxLQUFLQyxFQUFHLHdFQUF2RDtBQUNEO0FBQ0Y7O0FBRUQsV0FBT0ssY0FBY3NCLFlBQWQsSUFBOEJyQixVQUE5QixJQUE0Q0MsYUFBbkQ7QUFDRCxHQXRCWTs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFOOztBQXdCQSxNQUFNdUIsb0NBQWUvQixJQUFELElBQVU7QUFDbkMsTUFBSUQsWUFBWUMsSUFBWixDQUFKLEVBQXVCO0FBQ3JCLFdBQU9BLEtBQUtHLElBQUwsQ0FBVTZCLFNBQVYsRUFBUDtBQUNEO0FBQ0YsQ0FKTTs7a0JBTVNoQyxJQUFELElBQVU7QUFDdkIsU0FBT0QsWUFBWUMsSUFBWixDQUFQO0FBQ0QsQyIsImZpbGUiOiJzd2FwU3RhdHVzLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucy9zdGFydCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGRlZmF1bHRMb2NrVGltZSA9IDYwICogNjAgKiAzO1xuXG4vLyBEYXRlLm5vdygpIGdpdmVzIG1zXG5jb25zdCB1dGNOb3cgPSAoKSA9PiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKVxuXG5jb25zdCBsb2NrVGltZVBhc3NlZCA9IChidGNMb2NrVGltZSwgcGVyaW9kID0gZGVmYXVsdExvY2tUaW1lKSA9PiB7XG4gIC8vICAgICB8ICAgICAtLS0gMyBob3VycyAtLS0gICAgQlRDIGxvY2t0aW1lXG4gIC8vICAgY3JlYXRlZCAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgLy8gICAgIHwgICsgcGVyaW9kIC0tLS0tLXwgICAgICAgICAgICAgfFxuICAvLyAgICAgfCAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICB8XG4gIC8vICAgICB8ICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgIHxcbiAgLy8gICAgIHwgICAgICAgICBub3cgICAgIHwgICAgICAgICAgICAgfFxuICAvLyAgICAgdiAgICAgICAgICB2ICAgICAgdiAgICAgICAgICAgICB2XG4gIC8vIOKAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk1xuXG4gIGNvbnN0IGNyZWF0ZWQgPSBidGNMb2NrVGltZSAtIGRlZmF1bHRMb2NrVGltZVxuICBjb25zdCBub3cgPSB1dGNOb3coKVxuXG4gIHJldHVybiBub3cgPiBjcmVhdGVkICsgcGVyaW9kXG59XG5cbmV4cG9ydCBjb25zdCBuZWVkc1JlZnVuZCA9IChzd2FwKSA9PiB7XG4gIGNvbnN0IHsgaWQgfSA9IHN3YXBcblxuICBjb25zdCB7IHN0YXRlIH0gPSBzd2FwLmZsb3dcblxuICBjb25zdCB7IHN0ZXAsIGJ0Y1NjcmlwdFZhbHVlcywgaXNGaW5pc2hlZCwgaXNSZWZ1bmRlZCwgaXNTdG9wcGVkU3dhcCB9ID0gc3RhdGVcblxuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBzd2FwYCwgaWQsIGBzdGVwYCwgc3RlcClcblxuICBpZiAoc3RlcCA8PSAyKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoIWJ0Y1NjcmlwdFZhbHVlcykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKGlzRmluaXNoZWQpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGlmIChpc1JlZnVuZGVkKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBpZiAoaXNTdG9wcGVkU3dhcCkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgY29uc3QgeyBsb2NrVGltZSB9ID0gYnRjU2NyaXB0VmFsdWVzXG4gIGNvbnN0IFsgaGVhZCwgYmFzZSBdID0gc3dhcC5mbG93Ll9mbG93TmFtZS5zcGxpdCgnMicpXG5cbiAgaWYgKGhlYWQgPT09ICdCVEMnKSB7IC8vIFsnQlRDJywnQkNIJywnVVNEVCddLmluY2x1ZGVzKGhlYWQpKSB7XG4gICAgLy8gQlRDIHRvIF9FVEhfXG5cbiAgICBjb25zdCB7IGJ0Y1NjcmlwdENyZWF0aW5nVHJhbnNhY3Rpb25IYXNoIH0gPSBzdGF0ZVxuXG4gICAgaWYgKCFidGNTY3JpcHRDcmVhdGluZ1RyYW5zYWN0aW9uSGFzaCkge1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBVbmtub3duIGNyZWF0aW5nIHR4IGhhc2hgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYEZvdW5kIHR4IGhhc2g6ICR7YnRjU2NyaXB0Q3JlYXRpbmdUcmFuc2FjdGlvbkhhc2h9YClcbiAgICB9XG5cbiAgICBjb25zdCB7IHNjcmlwdEFkZHJlc3MgfSA9IHN0YXRlXG5cbiAgICBpZiAoc2NyaXB0QWRkcmVzcykge1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBGb3VuZCBzY3JpcHQgYWRkcmVzczogJHtzY3JpcHRBZGRyZXNzfWApXG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2tUaW1lUGFzc2VkKGxvY2tUaW1lLCBkZWZhdWx0TG9ja1RpbWUpXG4gIH1cblxuICBpZiAoYmFzZSA9PT0gJ0JUQycpIHsgLy8gKFsnQlRDJywnQkNIJywnVVNEVCddLmluY2x1ZGVzKGJhc2UpKSB7XG4gICAgLy8gIF9FVEhfIHRvIEJUQ1xuXG4gICAgY29uc3QgeyBldGhTd2FwQ3JlYXRpb25UcmFuc2FjdGlvbkhhc2ggfSA9IHN0YXRlXG5cbiAgICBpZiAoIWV0aFN3YXBDcmVhdGlvblRyYW5zYWN0aW9uSGFzaCkge1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBVbmtub3duIGNyZWF0aW5nIHR4IGhhc2hgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYEZvdW5kIHR4IGhhc2g6ICR7ZXRoU3dhcENyZWF0aW9uVHJhbnNhY3Rpb25IYXNofWApXG4gICAgfVxuXG4gICAgLy8gRVRIIGxvY2t0aW1lIGlzIDEgaG91ci5cblxuICAgIHJldHVybiBsb2NrVGltZVBhc3NlZChsb2NrVGltZSwgZGVmYXVsdExvY2tUaW1lKVxuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGZsb3cgdHlwZTogJHtzd2FwLmZsb3cuX2Zsb3dOYW1lfWApXG5cbn1cblxuZXhwb3J0IGNvbnN0IGNhbkJlRGVsZXRlZCA9IGFzeW5jIHN3YXAgPT4ge1xuICBjb25zdCB7IHN0YXRlIH0gPSBzd2FwLmZsb3dcblxuICBjb25zdCBpc1BhcnRpY2lwYW50T25saW5lID0gc3dhcC5yb29tLmdldE9ubGluZVBhcnRpY2lwYW50KClcblxuICBjb25zdCB7IHN0ZXAsIGJ0Y1NjcmlwdFZhbHVlcywgaXNGaW5pc2hlZCwgaXNSZWZ1bmRlZCwgaXNTdG9wcGVkU3dhcCB9ID0gc3RhdGVcblxuICBjb25zdCBsaWZlVGltZW91dCA9IHN3YXAuY2hlY2tUaW1lb3V0KGRlZmF1bHRMb2NrVGltZSlcblxuICBjb25zdCBuZXZlclN0YXJ0ZWQgPSBzdGVwIDw9IDIgJiYgIWlzUGFydGljaXBhbnRPbmxpbmUgJiYgbGlmZVRpbWVvdXRcblxuICBpZiAoaXNSZWZ1bmRlZCkge1xuICAgIGNvbnN0IFJlZnVuZElzU3VjY2VzcyA9IGF3YWl0IHN3YXAuZmxvdy5pc1JlZnVuZFN1Y2Nlc3MoKVxuICAgIGlmICghUmVmdW5kSXNTdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBbU1dBUCAke3N3YXAuaWR9XTogaXNSZWZ1bmRlZD10cnVlLCBidXQgVFggaWQgaXMgbm90IGNvcnJlY3QuYClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBbU1dBUCAke3N3YXAuaWR9XTogaXNSZWZ1bmRlZD10cnVlLCBwcm9iYWJseSBjYW4gYmUgZGVsZXRlZCwgbmVlZHMgbWFudWFsIGludGVyZmVyZW5jZWApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlzRmluaXNoZWQgfHwgbmV2ZXJTdGFydGVkIHx8IGlzUmVmdW5kZWQgfHwgaXNTdG9wcGVkU3dhcFxufVxuXG5leHBvcnQgY29uc3Qgc21hcnRSZWZ1bmQgPSAoc3dhcCkgPT4ge1xuICBpZiAobmVlZHNSZWZ1bmQoc3dhcCkpIHtcbiAgICByZXR1cm4gc3dhcC5mbG93LnRyeVJlZnVuZCgpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgKHN3YXApID0+IHtcbiAgcmV0dXJuIG5lZWRzUmVmdW5kKHN3YXApXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "swapStatus.js"
      ],
      "names": [
        "defaultLockTime",
        "utcNow",
        "Math",
        "floor",
        "Date",
        "now",
        "lockTimePassed",
        "btcLockTime",
        "period",
        "created",
        "needsRefund",
        "swap",
        "id",
        "state",
        "flow",
        "step",
        "btcScriptValues",
        "isFinished",
        "isRefunded",
        "isStoppedSwap",
        "console",
        "log",
        "toISOString",
        "lockTime",
        "head",
        "base",
        "_flowName",
        "split",
        "btcScriptCreatingTransactionHash",
        "error",
        "scriptAddress",
        "ethSwapCreationTransactionHash",
        "Error",
        "canBeDeleted",
        "isParticipantOnline",
        "room",
        "getOnlineParticipant",
        "lifeTimeout",
        "checkTimeout",
        "neverStarted",
        "RefundIsSuccess",
        "isRefundSuccess",
        "smartRefund",
        "tryRefund"
      ],
      "mappings": "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",
      "file": "swapStatus.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/start",
      "sourcesContent": [
        "const defaultLockTime = 60 * 60 * 3;\n\n// Date.now() gives ms\nconst utcNow = () => Math.floor(Date.now() / 1000)\n\nconst lockTimePassed = (btcLockTime, period = defaultLockTime) => {\n  //     |     --- 3 hours ---    BTC locktime\n  //   created                           |\n  //     |  + period ------|             |\n  //     |                 |             |\n  //     |                 |             |\n  //     |         now     |             |\n  //     v          v      v             v\n  // –––––––––––––––––––––––––––––––––––––––––––––––\n\n  const created = btcLockTime - defaultLockTime\n  const now = utcNow()\n\n  return now > created + period\n}\n\nexport const needsRefund = (swap) => {\n  const { id } = swap\n\n  const { state } = swap.flow\n\n  const { step, btcScriptValues, isFinished, isRefunded, isStoppedSwap } = state\n\n  console.log(new Date().toISOString(), `swap`, id, `step`, step)\n\n  if (step <= 2) {\n    return false\n  }\n\n  if (!btcScriptValues) {\n    return false\n  }\n\n  if (isFinished) {\n    return false\n  }\n\n  if (isRefunded) {\n    return false\n  }\n\n  if (isStoppedSwap) {\n    return false\n  }\n\n  const { lockTime } = btcScriptValues\n  const [ head, base ] = swap.flow._flowName.split('2')\n\n  if (head === 'BTC') { // ['BTC','BCH','USDT'].includes(head)) {\n    // BTC to _ETH_\n\n    const { btcScriptCreatingTransactionHash } = state\n\n    if (!btcScriptCreatingTransactionHash) {\n      console.error(new Date().toISOString(), `Unknown creating tx hash`)\n    } else {\n      console.error(new Date().toISOString(), `Found tx hash: ${btcScriptCreatingTransactionHash}`)\n    }\n\n    const { scriptAddress } = state\n\n    if (scriptAddress) {\n      console.error(new Date().toISOString(), `Found script address: ${scriptAddress}`)\n    }\n\n    return lockTimePassed(lockTime, defaultLockTime)\n  }\n\n  if (base === 'BTC') { // (['BTC','BCH','USDT'].includes(base)) {\n    //  _ETH_ to BTC\n\n    const { ethSwapCreationTransactionHash } = state\n\n    if (!ethSwapCreationTransactionHash) {\n      console.error(new Date().toISOString(), `Unknown creating tx hash`)\n    } else {\n      console.error(new Date().toISOString(), `Found tx hash: ${ethSwapCreationTransactionHash}`)\n    }\n\n    // ETH locktime is 1 hour.\n\n    return lockTimePassed(lockTime, defaultLockTime)\n  }\n\n  throw new Error(`Unknown flow type: ${swap.flow._flowName}`)\n\n}\n\nexport const canBeDeleted = async swap => {\n  const { state } = swap.flow\n\n  const isParticipantOnline = swap.room.getOnlineParticipant()\n\n  const { step, btcScriptValues, isFinished, isRefunded, isStoppedSwap } = state\n\n  const lifeTimeout = swap.checkTimeout(defaultLockTime)\n\n  const neverStarted = step <= 2 && !isParticipantOnline && lifeTimeout\n\n  if (isRefunded) {\n    const RefundIsSuccess = await swap.flow.isRefundSuccess()\n    if (!RefundIsSuccess) {\n      console.log(new Date().toISOString(), `[SWAP ${swap.id}]: isRefunded=true, but TX id is not correct.`)\n      return false\n    } else {\n      console.log(new Date().toISOString(), `[SWAP ${swap.id}]: isRefunded=true, probably can be deleted, needs manual interference`)\n    }\n  }\n\n  return isFinished || neverStarted || isRefunded || isStoppedSwap\n}\n\nexport const smartRefund = (swap) => {\n  if (needsRefund(swap)) {\n    return swap.flow.tryRefund()\n  }\n}\n\nexport default (swap) => {\n  return needsRefund(swap)\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "BTC2ETHFlow",
            "ETH2BTCFlow"
          ],
          "specifiers": [
            {
              "kind": "external",
              "local": "BTC2ETHFlow",
              "exported": "BTC2ETHFlow",
              "source": "./BTC2ETHFlow"
            },
            {
              "kind": "external",
              "local": "ETH2BTCFlow",
              "exported": "ETH2BTCFlow",
              "source": "./ETH2BTCFlow"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/swap-flow/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/swap-flow/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ETH2BTCFlow = exports.BTC2ETHFlow = undefined;\n\nvar _BTC2ETHFlow2 = require('./BTC2ETHFlow');\n\nvar _BTC2ETHFlow3 = _interopRequireDefault(_BTC2ETHFlow2);\n\nvar _ETH2BTCFlow2 = require('./ETH2BTCFlow');\n\nvar _ETH2BTCFlow3 = _interopRequireDefault(_ETH2BTCFlow2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.BTC2ETHFlow = _BTC2ETHFlow3.default;\nexports.ETH2BTCFlow = _ETH2BTCFlow3.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJUQzJFVEhGbG93IiwiRVRIMkJUQ0Zsb3ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBQU9BLFc7UUFDQUMsVyIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90L2FjdGlvbnMvc3dhcC1mbG93Iiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IEJUQzJFVEhGbG93IGZyb20gJy4vQlRDMkVUSEZsb3cnXG5leHBvcnQgRVRIMkJUQ0Zsb3cgZnJvbSAnLi9FVEgyQlRDRmxvdydcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "BTC2ETHFlow",
        "ETH2BTCFlow"
      ],
      "mappings": ";;;;;;;;;;;;;;;;;QAAOA,W;QACAC,W",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "sourcesContent": [
        "export BTC2ETHFlow from './BTC2ETHFlow'\nexport ETH2BTCFlow from './ETH2BTCFlow'\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow/BTC2ETHFlow.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "./genSecret",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getSecret"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/swap-flow/BTC2ETHFlow.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/swap-flow/BTC2ETHFlow.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "BTC2ETHFlow.js",
      "sourceFileName": "BTC2ETHFlow.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "BTC2ETHFlow"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _genSecret = require('./genSecret');\n\nvar _genSecret2 = _interopRequireDefault(_genSecret);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = swap => {\n  switch (swap.flow.state.step) {\n    case 2:\n      const _secret = (0, _genSecret2.default)();\n      return swap.flow.submitSecret(_secret);\n    case 3:\n      swap.flow.syncBalance();\n      return;\n  }\n\n  return swap;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJUQzJFVEhGbG93LmpzIl0sIm5hbWVzIjpbInN3YXAiLCJmbG93Iiwic3RhdGUiLCJzdGVwIiwiX3NlY3JldCIsInN1Ym1pdFNlY3JldCIsInN5bmNCYWxhbmNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7a0JBRWdCQSxJQUFELElBQVU7QUFDdkIsVUFBUUEsS0FBS0MsSUFBTCxDQUFVQyxLQUFWLENBQWdCQyxJQUF4QjtBQUNFLFNBQUssQ0FBTDtBQUNFLFlBQU1DLFVBQVUsMEJBQWhCO0FBQ0EsYUFBT0osS0FBS0MsSUFBTCxDQUFVSSxZQUFWLENBQXVCRCxPQUF2QixDQUFQO0FBQ0YsU0FBSyxDQUFMO0FBQ0VKLFdBQUtDLElBQUwsQ0FBVUssV0FBVjtBQUNBO0FBTko7O0FBU0EsU0FBT04sSUFBUDtBQUNELEMiLCJmaWxlIjoiQlRDMkVUSEZsb3cuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9hY3Rpb25zL3N3YXAtZmxvdyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBoYW5kbGVFcnJvciBmcm9tICcuLi8uLi8uLi9hcHAvYWN0aW9ucy9lcnJvcnMvaGFuZGxlRXJyb3InXG5pbXBvcnQgZ2V0U2VjcmV0IGZyb20gJy4vZ2VuU2VjcmV0J1xuXG5leHBvcnQgZGVmYXVsdCAoc3dhcCkgPT4ge1xuICBzd2l0Y2ggKHN3YXAuZmxvdy5zdGF0ZS5zdGVwKSB7XG4gICAgY2FzZSAyOlxuICAgICAgY29uc3QgX3NlY3JldCA9IGdldFNlY3JldCgpXG4gICAgICByZXR1cm4gc3dhcC5mbG93LnN1Ym1pdFNlY3JldChfc2VjcmV0KVxuICAgIGNhc2UgMzpcbiAgICAgIHN3YXAuZmxvdy5zeW5jQmFsYW5jZSgpXG4gICAgICByZXR1cm5cbiAgfVxuXG4gIHJldHVybiBzd2FwXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "BTC2ETHFlow.js"
      ],
      "names": [
        "swap",
        "flow",
        "state",
        "step",
        "_secret",
        "submitSecret",
        "syncBalance"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;;;kBAEgBA,IAAD,IAAU;AACvB,UAAQA,KAAKC,IAAL,CAAUC,KAAV,CAAgBC,IAAxB;AACE,SAAK,CAAL;AACE,YAAMC,UAAU,0BAAhB;AACA,aAAOJ,KAAKC,IAAL,CAAUI,YAAV,CAAuBD,OAAvB,CAAP;AACF,SAAK,CAAL;AACEJ,WAAKC,IAAL,CAAUK,WAAV;AACA;AANJ;;AASA,SAAON,IAAP;AACD,C",
      "file": "BTC2ETHFlow.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "sourcesContent": [
        "import handleError from '../../../app/actions/errors/handleError'\nimport getSecret from './genSecret'\n\nexport default (swap) => {\n  switch (swap.flow.state.step) {\n    case 2:\n      const _secret = getSecret()\n      return swap.flow.submitSecret(_secret)\n    case 3:\n      swap.flow.syncBalance()\n      return\n  }\n\n  return swap\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow/genSecret.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "crypto",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "crypto"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/swap-flow/genSecret.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/swap-flow/genSecret.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "genSecret.js",
      "sourceFileName": "genSecret.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "genSecret"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _crypto = require('crypto');\n\nvar _crypto2 = _interopRequireDefault(_crypto);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = () => _crypto2.default.randomBytes(32).toString('hex');\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdlblNlY3JldC5qcyJdLCJuYW1lcyI6WyJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O2tCQUVlLE1BQU1BLGlCQUFPQyxXQUFQLENBQW1CLEVBQW5CLEVBQXVCQyxRQUF2QixDQUFnQyxLQUFoQyxDIiwiZmlsZSI6ImdlblNlY3JldC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90L2FjdGlvbnMvc3dhcC1mbG93Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5cbmV4cG9ydCBkZWZhdWx0ICgpID0+IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoJ2hleCcpXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "genSecret.js"
      ],
      "names": [
        "crypto",
        "randomBytes",
        "toString"
      ],
      "mappings": ";;;;;;AAAA;;;;;;kBAEe,MAAMA,iBAAOC,WAAP,CAAmB,EAAnB,EAAuBC,QAAvB,CAAgC,KAAhC,C",
      "file": "genSecret.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "sourcesContent": [
        "import crypto from 'crypto'\n\nexport default () => crypto.randomBytes(32).toString('hex')\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow/ETH2BTCFlow.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/swap-flow\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/swap-flow/ETH2BTCFlow.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/swap-flow/ETH2BTCFlow.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "ETH2BTCFlow.js",
      "sourceFileName": "ETH2BTCFlow.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "ETH2BTCFlow"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst debug = (0, _debug3.default)('swap.bot');\n\nconst tryAcceptWithdrawRequest = swap => {\n  const { withdrawRequestIncoming, withdrawRequestAccepted } = swap.flow.state;\n\n  if (withdrawRequestIncoming && !withdrawRequestAccepted) {\n    debug('accept withdraw request');\n\n    swap.flow.acceptWithdrawRequest();\n  }\n};\n\nexports.default = swap => {\n  const { step } = swap.flow.state;\n\n  switch (swap.flow.state.step) {\n    case 1:\n      swap.flow.sign();\n      return;\n    case 3:\n      swap.flow.verifyBtcScript();\n      return;\n    case 4:\n      swap.flow.syncBalance();\n      return;\n    default:\n      tryAcceptWithdrawRequest(swap);\n  }\n\n  return swap;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVUSDJCVENGbG93LmpzIl0sIm5hbWVzIjpbImRlYnVnIiwidHJ5QWNjZXB0V2l0aGRyYXdSZXF1ZXN0Iiwic3dhcCIsIndpdGhkcmF3UmVxdWVzdEluY29taW5nIiwid2l0aGRyYXdSZXF1ZXN0QWNjZXB0ZWQiLCJmbG93Iiwic3RhdGUiLCJhY2NlcHRXaXRoZHJhd1JlcXVlc3QiLCJzdGVwIiwic2lnbiIsInZlcmlmeUJ0Y1NjcmlwdCIsInN5bmNCYWxhbmNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O0FBR0EsTUFBTUEsUUFBUSxxQkFBTyxVQUFQLENBQWQ7O0FBRUEsTUFBTUMsMkJBQTRCQyxJQUFELElBQVU7QUFDekMsUUFBTSxFQUFFQyx1QkFBRixFQUEyQkMsdUJBQTNCLEtBQXVERixLQUFLRyxJQUFMLENBQVVDLEtBQXZFOztBQUVBLE1BQUlILDJCQUEyQixDQUFDQyx1QkFBaEMsRUFBeUQ7QUFDdkRKLFVBQU0seUJBQU47O0FBRUFFLFNBQUtHLElBQUwsQ0FBVUUscUJBQVY7QUFDRDtBQUNGLENBUkQ7O2tCQVVnQkwsSUFBRCxJQUFVO0FBQ3ZCLFFBQU0sRUFBRU0sSUFBRixLQUFXTixLQUFLRyxJQUFMLENBQVVDLEtBQTNCOztBQUVBLFVBQVFKLEtBQUtHLElBQUwsQ0FBVUMsS0FBVixDQUFnQkUsSUFBeEI7QUFDRSxTQUFLLENBQUw7QUFDRU4sV0FBS0csSUFBTCxDQUFVSSxJQUFWO0FBQ0E7QUFDRixTQUFLLENBQUw7QUFDRVAsV0FBS0csSUFBTCxDQUFVSyxlQUFWO0FBQ0E7QUFDRixTQUFLLENBQUw7QUFDRVIsV0FBS0csSUFBTCxDQUFVTSxXQUFWO0FBQ0E7QUFDRjtBQUNFViwrQkFBeUJDLElBQXpCO0FBWEo7O0FBY0EsU0FBT0EsSUFBUDtBQUNELEMiLCJmaWxlIjoiRVRIMkJUQ0Zsb3cuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9hY3Rpb25zL3N3YXAtZmxvdyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfZGVidWcgZnJvbSAnZGVidWcnXG5cblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3N3YXAuYm90JylcblxuY29uc3QgdHJ5QWNjZXB0V2l0aGRyYXdSZXF1ZXN0ID0gKHN3YXApID0+IHtcbiAgY29uc3QgeyB3aXRoZHJhd1JlcXVlc3RJbmNvbWluZywgd2l0aGRyYXdSZXF1ZXN0QWNjZXB0ZWQgfSA9IHN3YXAuZmxvdy5zdGF0ZVxuXG4gIGlmICh3aXRoZHJhd1JlcXVlc3RJbmNvbWluZyAmJiAhd2l0aGRyYXdSZXF1ZXN0QWNjZXB0ZWQpIHtcbiAgICBkZWJ1ZygnYWNjZXB0IHdpdGhkcmF3IHJlcXVlc3QnKVxuXG4gICAgc3dhcC5mbG93LmFjY2VwdFdpdGhkcmF3UmVxdWVzdCgpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgKHN3YXApID0+IHtcbiAgY29uc3QgeyBzdGVwIH0gPSBzd2FwLmZsb3cuc3RhdGVcblxuICBzd2l0Y2ggKHN3YXAuZmxvdy5zdGF0ZS5zdGVwKSB7XG4gICAgY2FzZSAxOlxuICAgICAgc3dhcC5mbG93LnNpZ24oKVxuICAgICAgcmV0dXJuXG4gICAgY2FzZSAzOlxuICAgICAgc3dhcC5mbG93LnZlcmlmeUJ0Y1NjcmlwdCgpXG4gICAgICByZXR1cm5cbiAgICBjYXNlIDQ6XG4gICAgICBzd2FwLmZsb3cuc3luY0JhbGFuY2UoKVxuICAgICAgcmV0dXJuXG4gICAgZGVmYXVsdDpcbiAgICAgIHRyeUFjY2VwdFdpdGhkcmF3UmVxdWVzdChzd2FwKVxuICB9XG5cbiAgcmV0dXJuIHN3YXBcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "ETH2BTCFlow.js"
      ],
      "names": [
        "debug",
        "tryAcceptWithdrawRequest",
        "swap",
        "withdrawRequestIncoming",
        "withdrawRequestAccepted",
        "flow",
        "state",
        "acceptWithdrawRequest",
        "step",
        "sign",
        "verifyBtcScript",
        "syncBalance"
      ],
      "mappings": ";;;;;;AAAA;;;;;;AAGA,MAAMA,QAAQ,qBAAO,UAAP,CAAd;;AAEA,MAAMC,2BAA4BC,IAAD,IAAU;AACzC,QAAM,EAAEC,uBAAF,EAA2BC,uBAA3B,KAAuDF,KAAKG,IAAL,CAAUC,KAAvE;;AAEA,MAAIH,2BAA2B,CAACC,uBAAhC,EAAyD;AACvDJ,UAAM,yBAAN;;AAEAE,SAAKG,IAAL,CAAUE,qBAAV;AACD;AACF,CARD;;kBAUgBL,IAAD,IAAU;AACvB,QAAM,EAAEM,IAAF,KAAWN,KAAKG,IAAL,CAAUC,KAA3B;;AAEA,UAAQJ,KAAKG,IAAL,CAAUC,KAAV,CAAgBE,IAAxB;AACE,SAAK,CAAL;AACEN,WAAKG,IAAL,CAAUI,IAAV;AACA;AACF,SAAK,CAAL;AACEP,WAAKG,IAAL,CAAUK,eAAV;AACA;AACF,SAAK,CAAL;AACER,WAAKG,IAAL,CAAUM,WAAV;AACA;AACF;AACEV,+BAAyBC,IAAzB;AAXJ;;AAcA,SAAOA,IAAP;AACD,C",
      "file": "ETH2BTCFlow.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/swap-flow",
      "sourcesContent": [
        "import _debug from 'debug'\n\n\nconst debug = _debug('swap.bot')\n\nconst tryAcceptWithdrawRequest = (swap) => {\n  const { withdrawRequestIncoming, withdrawRequestAccepted } = swap.flow.state\n\n  if (withdrawRequestIncoming && !withdrawRequestAccepted) {\n    debug('accept withdraw request')\n\n    swap.flow.acceptWithdrawRequest()\n  }\n}\n\nexport default (swap) => {\n  const { step } = swap.flow.state\n\n  switch (swap.flow.state.step) {\n    case 1:\n      swap.flow.sign()\n      return\n    case 3:\n      swap.flow.verifyBtcScript()\n      return\n    case 4:\n      swap.flow.syncBalance()\n      return\n    default:\n      tryAcceptWithdrawRequest(swap)\n  }\n\n  return swap\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/book/handleKeyboardInput.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/book\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "./fillOrderbook",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fillOrderbook"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/book/handleKeyboardInput.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/book/handleKeyboardInput.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handleKeyboardInput.js",
      "sourceFileName": "handleKeyboardInput.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handleKeyboardInput"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _fillOrderbook = require('./fillOrderbook');\n\nvar _fillOrderbook2 = _interopRequireDefault(_fillOrderbook);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = orders => input => {\n  const num = (0, _bignumber2.default)(input);\n\n  if (!input || num === 0) return;\n  if (!_bignumber2.default.isBigNumber(num)) return (0, _handleError2.default)(new Error(`wrong number ${input}`));\n\n  (0, _fillOrderbook2.default)(num, orders);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZUtleWJvYXJkSW5wdXQuanMiXSwibmFtZXMiOlsib3JkZXJzIiwiaW5wdXQiLCJudW0iLCJCaWdOdW1iZXIiLCJpc0JpZ051bWJlciIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUVBOzs7O0FBQ0E7Ozs7OztrQkFFZ0JBLE1BQUQsSUFBWUMsU0FBUztBQUNsQyxRQUFNQyxNQUFNLHlCQUFVRCxLQUFWLENBQVo7O0FBRUEsTUFBSSxDQUFDQSxLQUFELElBQVVDLFFBQVEsQ0FBdEIsRUFBeUI7QUFDekIsTUFBSSxDQUFDQyxvQkFBVUMsV0FBVixDQUFzQkYsR0FBdEIsQ0FBTCxFQUFpQyxPQUFPLDJCQUFZLElBQUlHLEtBQUosQ0FBVyxnQkFBZUosS0FBTSxFQUFoQyxDQUFaLENBQVA7O0FBRWpDLCtCQUFjQyxHQUFkLEVBQW1CRixNQUFuQjtBQUNELEMiLCJmaWxlIjoiaGFuZGxlS2V5Ym9hcmRJbnB1dC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90L2FjdGlvbnMvYm9vayIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCaWdOdW1iZXIgZnJvbSAnYmlnbnVtYmVyLmpzJ1xuXG5pbXBvcnQgaGFuZGxlRXJyb3IgZnJvbSAnLi4vLi4vLi4vYXBwL2FjdGlvbnMvZXJyb3JzL2hhbmRsZUVycm9yJ1xuaW1wb3J0IGZpbGxPcmRlcmJvb2sgZnJvbSAnLi9maWxsT3JkZXJib29rJ1xuXG5leHBvcnQgZGVmYXVsdCAob3JkZXJzKSA9PiBpbnB1dCA9PiB7XG4gIGNvbnN0IG51bSA9IEJpZ051bWJlcihpbnB1dClcblxuICBpZiAoIWlucHV0IHx8IG51bSA9PT0gMCkgcmV0dXJuXG4gIGlmICghQmlnTnVtYmVyLmlzQmlnTnVtYmVyKG51bSkpIHJldHVybiBoYW5kbGVFcnJvcihuZXcgRXJyb3IoYHdyb25nIG51bWJlciAke2lucHV0fWApKVxuXG4gIGZpbGxPcmRlcmJvb2sobnVtLCBvcmRlcnMpXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handleKeyboardInput.js"
      ],
      "names": [
        "orders",
        "input",
        "num",
        "BigNumber",
        "isBigNumber",
        "Error"
      ],
      "mappings": ";;;;;;AAAA;;;;AAEA;;;;AACA;;;;;;kBAEgBA,MAAD,IAAYC,SAAS;AAClC,QAAMC,MAAM,yBAAUD,KAAV,CAAZ;;AAEA,MAAI,CAACA,KAAD,IAAUC,QAAQ,CAAtB,EAAyB;AACzB,MAAI,CAACC,oBAAUC,WAAV,CAAsBF,GAAtB,CAAL,EAAiC,OAAO,2BAAY,IAAIG,KAAJ,CAAW,gBAAeJ,KAAM,EAAhC,CAAZ,CAAP;;AAEjC,+BAAcC,GAAd,EAAmBF,MAAnB;AACD,C",
      "file": "handleKeyboardInput.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\n\nimport handleError from '../../../app/actions/errors/handleError'\nimport fillOrderbook from './fillOrderbook'\n\nexport default (orders) => input => {\n  const num = BigNumber(input)\n\n  if (!input || num === 0) return\n  if (!BigNumber.isBigNumber(num)) return handleError(new Error(`wrong number ${input}`))\n\n  fillOrderbook(num, orders)\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/book/fillOrderbook.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/book\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../../../app/actions/fetchPrice",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fetchPrice"
              }
            ]
          },
          {
            "source": "../../Pair",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Pair"
              }
            ]
          },
          {
            "source": "../../../config/constants/TRADE_CONFIG",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_CONFIG"
              }
            ]
          },
          {
            "source": "../../../config/constants/TRADE_ORDER_MINAMOUNTS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_ORDER_MINAMOUNTS"
              }
            ]
          },
          {
            "source": "../../../config/constants/TRADE_TICKERS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_TICKERS"
              }
            ]
          },
          {
            "source": "../../../config/constants/PAIR_TYPES",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "PAIR_TYPES"
              }
            ]
          },
          {
            "source": "../../core/orders",
            "imported": [
              "createOrder",
              "removeMyOrders"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createOrder",
                "local": "createOrder"
              },
              {
                "kind": "named",
                "imported": "removeMyOrders",
                "local": "removeMyOrders"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/book/fillOrderbook.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/book/fillOrderbook.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fillOrderbook.js",
      "sourceFileName": "fillOrderbook.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fillOrderbook"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _fetchPrice = require('../../../app/actions/fetchPrice');\n\nvar _fetchPrice2 = _interopRequireDefault(_fetchPrice);\n\nvar _Pair = require('../../Pair');\n\nvar _Pair2 = _interopRequireDefault(_Pair);\n\nvar _TRADE_CONFIG = require('../../../config/constants/TRADE_CONFIG');\n\nvar _TRADE_CONFIG2 = _interopRequireDefault(_TRADE_CONFIG);\n\nvar _TRADE_ORDER_MINAMOUNTS = require('../../../config/constants/TRADE_ORDER_MINAMOUNTS');\n\nvar _TRADE_ORDER_MINAMOUNTS2 = _interopRequireDefault(_TRADE_ORDER_MINAMOUNTS);\n\nvar _TRADE_TICKERS = require('../../../config/constants/TRADE_TICKERS');\n\nvar _TRADE_TICKERS2 = _interopRequireDefault(_TRADE_TICKERS);\n\nvar _PAIR_TYPES = require('../../../config/constants/PAIR_TYPES');\n\nvar _PAIR_TYPES2 = _interopRequireDefault(_PAIR_TYPES);\n\nvar _orders = require('../../core/orders');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst debug = (...args) => console.log(new Date().toISOString(), ...args); //_debug('swap.bot')\nconst n = n => cb => Array(n).fill(null).map((el, i) => cb(i, el));\nconst TEN = (0, _bignumber2.default)(10);\n\nconst getCurrenciesBalance = (balances, ticker) => {\n  const [pair_main, pair_base] = ticker.split('-');\n\n  const sell = balances[pair_main];\n  const buy = balances[pair_base];\n\n  if (sell === 0 && buy === 0) {\n    return null;\n  }\n\n  return { sell, buy };\n};\n\nconst getAmount = tickerOrder => tickerOrder.amount ? (0, _bignumber2.default)(tickerOrder.amount) : (0, _bignumber2.default)(_TRADE_ORDER_MINAMOUNTS2.default.default).times(TEN.pow(index));\n\nconst checkCanCreateCurrentOrder = (tickerOrder, orderType) => typeof tickerOrder[orderType] === 'undefined' ? true : tickerOrder[orderType];\n\nconst checkHaveSpread = (tickerOrder, orderType) => tickerOrder[`spread${orderType === 'buy' ? 'Buy' : 'Sell'}`] > 0 ? true : false;\n\nconst getSpread = (tickerOrder, orderType) => orderType === 'buy' ? (0, _bignumber2.default)(100).minus(tickerOrder.spreadBuy).dividedBy(100) : (0, _bignumber2.default)(100).plus(tickerOrder.spreadSell).dividedBy(100);\n\nconst createOrders = (orderType, balance, ticker, tickerOrders, basePrice) => {\n  const orders = [];\n  const type = orderType === 'buy' ? _PAIR_TYPES2.default.BID : _PAIR_TYPES2.default.ASK;\n  const canCreateOrders = _TRADE_CONFIG2.default[ticker][orderType] && balance > 0;\n  const checkIsEnoughBalance = (price, amount) => orderType === 'buy' ? (0, _bignumber2.default)(balance).isLessThan(amount) : (0, _bignumber2.default)(balance).isLessThan((0, _bignumber2.default)(amount).dividedBy(price));\n\n  debug(ticker, `create ${orderType} orders`, canCreateOrders);\n\n  if (canCreateOrders) {\n    tickerOrders.forEach((tickerOrder, index) => {\n      const canCreateCurrentOrder = checkCanCreateCurrentOrder(tickerOrder, orderType);\n      const haveSpread = checkHaveSpread(tickerOrder, orderType);\n\n      if (!canCreateCurrentOrder || !haveSpread) {\n        return;\n      }\n\n      const spread = getSpread(tickerOrder, orderType);\n      const price = basePrice.multipliedBy(spread);\n      const amount = getAmount(tickerOrder);\n      const isEnoughBalance = checkIsEnoughBalance(price, amount);\n\n      if (isEnoughBalance) {\n        return;\n      }\n\n      orders.push(new _Pair2.default({ ticker, price, type, amount }));\n    });\n  }\n\n  return orders;\n};\n\nconst createAllOrders = (() => {\n  var _ref = _asyncToGenerator(function* (balances, ticker) {\n    const price = _TRADE_CONFIG2.default[ticker].sellPrice ? (0, _bignumber2.default)(_TRADE_CONFIG2.default[ticker].sellPrice) : yield (0, _fetchPrice2.default)(ticker, _TRADE_CONFIG2.default[ticker].type);\n\n    if (!price) {\n      throw new Error(`${ticker} price is empty`);\n    }\n\n    const tickerOrders = _TRADE_CONFIG2.default[ticker].orders;\n\n    if (!tickerOrders || tickerOrders.length === 0) {\n      throw new Error(`${ticker} orders is empty`);\n    }\n\n    const currenciesBalance = getCurrenciesBalance(balances, ticker);\n\n    if (!currenciesBalance) {\n      throw new Error(`${ticker} wallets are empty`);\n    }\n\n    return [...createOrders('buy', currenciesBalance.buy, ticker, tickerOrders, price), ...createOrders('sell', currenciesBalance.sell, ticker, tickerOrders, price)];\n  });\n\n  return function createAllOrders(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nconst fillOrders = (() => {\n  var _ref2 = _asyncToGenerator(function* (balances, ticker, create) {\n    try {\n      debug('fillOrders for', ticker);\n\n      const orders = yield createAllOrders(balances, ticker);\n\n      debug('new orders', orders.length);\n\n      orders.map(function (pair) {\n        return _extends({}, pair.toOrder(), { isPartial: true });\n      }).map(create).map(function (order) {\n        return order.setRequestHandlerForPartial('buyAmount', function ({ buyAmount }, oldOrder) {\n          const oldPair = _Pair2.default.fromOrder(oldOrder);\n\n          debug('oldPair', oldPair);\n\n          const { price } = oldPair;\n\n          debug('newBuyAmount', buyAmount.toString());\n\n          // BUY [main] = SELL [base] CURRENCY\n          // price = [main]/[base] = [buy]/[sell]\n\n          // BUY 10 ETH = SELL 1 BTC\n          // price = 10 = buyAmount / sellAmount\n          // newSellAmount = buyAmount / price\n\n          const sellAmount = oldPair.isBid() ? buyAmount.times(price) : buyAmount.div(price);\n\n          debug('newSellAmount', sellAmount.toString());\n\n          const newOrder = { sellAmount, buyAmount };\n\n          debug('newOrder', newOrder, newOrder.buyAmount.toString(), newOrder.sellAmount.toString());\n\n          return _Pair2.default.fromOrder(_extends({}, oldOrder, newOrder)).toOrder();\n        });\n      }).map(function (order) {\n        return order.setRequestHandlerForPartial('sellAmount', function ({ sellAmount }, oldOrder) {\n          const oldPair = _Pair2.default.fromOrder(oldOrder);\n\n          debug('oldPair', oldPair, oldPair.price.toString());\n\n          const { price } = oldPair;\n\n          debug('newSellAmount', sellAmount.toString());\n\n          // if BID, then\n          // price == buyAmount / sellAmount\n\n          const buyAmount = oldPair.isBid() ? sellAmount.div(price) : sellAmount.times(price);\n\n          debug('newBuyAmount', buyAmount.toString());\n\n          const newOrder = { sellAmount, buyAmount };\n\n          debug('newOrder', newOrder, newOrder.buyAmount.toString(), newOrder.sellAmount.toString());\n\n          return _Pair2.default.fromOrder(_extends({}, oldOrder, newOrder)).toOrder();\n        });\n      });\n    } catch (err) {\n      (0, _handleError2.default)(err);\n    }\n  });\n\n  return function fillOrders(_x3, _x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n})();\n\nexports.default = (() => {\n  var _ref3 = _asyncToGenerator(function* (wallet, orders) {\n    (0, _orders.removeMyOrders)(orders);\n\n    const symbols = Object.keys(_TRADE_CONFIG2.default).filter(function (item) {\n      return _TRADE_CONFIG2.default[item].active;\n    }).map(function (ticker) {\n      return ticker.split('-');\n    }).reduce(function (sum, arr) {\n      return sum.concat(arr);\n    }, []).sort(function (a, b) {\n      return a > b ? 1 : a == b ? 0 : -1;\n    });\n\n    const balances = yield wallet.getBalance(symbols);\n\n    const balanceForSymbol = balances.reduce(function (obj, elem) {\n      return _extends({}, obj, {\n        [elem.symbol]: elem.value\n      });\n    }, {});\n\n    debug('balances', balanceForSymbol);\n\n    return Object.keys(_TRADE_CONFIG2.default).filter(function (item) {\n      return _TRADE_CONFIG2.default[item].active;\n    }).map(function (ticker) {\n      return fillOrders(balanceForSymbol, ticker, (0, _orders.createOrder)(orders));\n    });\n  });\n\n  return function (_x6, _x7) {\n    return _ref3.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGxPcmRlcmJvb2suanMiXSwibmFtZXMiOlsiZGVidWciLCJhcmdzIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm4iLCJjYiIsIkFycmF5IiwiZmlsbCIsIm1hcCIsImVsIiwiaSIsIlRFTiIsImdldEN1cnJlbmNpZXNCYWxhbmNlIiwiYmFsYW5jZXMiLCJ0aWNrZXIiLCJwYWlyX21haW4iLCJwYWlyX2Jhc2UiLCJzcGxpdCIsInNlbGwiLCJidXkiLCJnZXRBbW91bnQiLCJ0aWNrZXJPcmRlciIsImFtb3VudCIsIlRSQURFX09SREVSX01JTkFNT1VOVFMiLCJkZWZhdWx0IiwidGltZXMiLCJwb3ciLCJpbmRleCIsImNoZWNrQ2FuQ3JlYXRlQ3VycmVudE9yZGVyIiwib3JkZXJUeXBlIiwiY2hlY2tIYXZlU3ByZWFkIiwiZ2V0U3ByZWFkIiwibWludXMiLCJzcHJlYWRCdXkiLCJkaXZpZGVkQnkiLCJwbHVzIiwic3ByZWFkU2VsbCIsImNyZWF0ZU9yZGVycyIsImJhbGFuY2UiLCJ0aWNrZXJPcmRlcnMiLCJiYXNlUHJpY2UiLCJvcmRlcnMiLCJ0eXBlIiwiUEFJUl9UWVBFUyIsIkJJRCIsIkFTSyIsImNhbkNyZWF0ZU9yZGVycyIsIlRSQURFX0NPTkZJRyIsImNoZWNrSXNFbm91Z2hCYWxhbmNlIiwicHJpY2UiLCJpc0xlc3NUaGFuIiwiZm9yRWFjaCIsImNhbkNyZWF0ZUN1cnJlbnRPcmRlciIsImhhdmVTcHJlYWQiLCJzcHJlYWQiLCJtdWx0aXBsaWVkQnkiLCJpc0Vub3VnaEJhbGFuY2UiLCJwdXNoIiwiUGFpciIsImNyZWF0ZUFsbE9yZGVycyIsInNlbGxQcmljZSIsIkVycm9yIiwibGVuZ3RoIiwiY3VycmVuY2llc0JhbGFuY2UiLCJmaWxsT3JkZXJzIiwiY3JlYXRlIiwicGFpciIsInRvT3JkZXIiLCJpc1BhcnRpYWwiLCJvcmRlciIsInNldFJlcXVlc3RIYW5kbGVyRm9yUGFydGlhbCIsImJ1eUFtb3VudCIsIm9sZE9yZGVyIiwib2xkUGFpciIsImZyb21PcmRlciIsInRvU3RyaW5nIiwic2VsbEFtb3VudCIsImlzQmlkIiwiZGl2IiwibmV3T3JkZXIiLCJlcnIiLCJ3YWxsZXQiLCJzeW1ib2xzIiwiT2JqZWN0Iiwia2V5cyIsImZpbHRlciIsIml0ZW0iLCJhY3RpdmUiLCJyZWR1Y2UiLCJzdW0iLCJhcnIiLCJjb25jYXQiLCJzb3J0IiwiYSIsImIiLCJnZXRCYWxhbmNlIiwiYmFsYW5jZUZvclN5bWJvbCIsIm9iaiIsImVsZW0iLCJzeW1ib2wiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBR0EsTUFBTUEsUUFBUSxDQUFDLEdBQUdDLElBQUosS0FBYUMsUUFBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXNDLEdBQUdKLElBQXpDLENBQTNCLEMsQ0FBMEU7QUFDMUUsTUFBTUssSUFBS0EsQ0FBRCxJQUFRQyxFQUFELElBQVFDLE1BQU1GLENBQU4sRUFBU0csSUFBVCxDQUFjLElBQWQsRUFBb0JDLEdBQXBCLENBQXdCLENBQUNDLEVBQUQsRUFBS0MsQ0FBTCxLQUFXTCxHQUFHSyxDQUFILEVBQU1ELEVBQU4sQ0FBbkMsQ0FBekI7QUFDQSxNQUFNRSxNQUFNLHlCQUFVLEVBQVYsQ0FBWjs7QUFFQSxNQUFNQyx1QkFBdUIsQ0FBQ0MsUUFBRCxFQUFXQyxNQUFYLEtBQXNCO0FBQ2pELFFBQU0sQ0FBRUMsU0FBRixFQUFhQyxTQUFiLElBQTJCRixPQUFPRyxLQUFQLENBQWEsR0FBYixDQUFqQzs7QUFFQSxRQUFNQyxPQUFPTCxTQUFTRSxTQUFULENBQWI7QUFDQSxRQUFNSSxNQUFNTixTQUFTRyxTQUFULENBQVo7O0FBRUEsTUFBSUUsU0FBUyxDQUFULElBQWNDLFFBQVEsQ0FBMUIsRUFBNkI7QUFDM0IsV0FBTyxJQUFQO0FBQ0Q7O0FB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dkMsdUJBQWF1QyxJQUFiLEVBQW1CQyxNQUE3QjtBQUFBLEtBRE0sRUFFYi9FLEdBRmEsQ0FFVDtBQUFBLGFBQVVNLE9BQU9HLEtBQVAsQ0FBYSxHQUFiLENBQVY7QUFBQSxLQUZTLEVBR2J1RSxNQUhhLENBR04sVUFBQ0MsR0FBRCxFQUFNQyxHQUFOO0FBQUEsYUFBY0QsSUFBSUUsTUFBSixDQUFXRCxHQUFYLENBQWQ7QUFBQSxLQUhNLEVBR3lCLEVBSHpCLEVBSWJFLElBSmEsQ0FJUixVQUFDQyxDQUFELEVBQUlDLENBQUo7QUFBQSxhQUFVRCxJQUFJQyxDQUFKLEdBQVEsQ0FBUixHQUFZRCxLQUFLQyxDQUFMLEdBQVMsQ0FBVCxHQUFhLENBQUMsQ0FBcEM7QUFBQSxLQUpRLENBQWhCOztBQU1BLFVBQU1qRixXQUFXLE1BQU1vRSxPQUFPYyxVQUFQLENBQWtCYixPQUFsQixDQUF2Qjs7QUFFQSxVQUFNYyxtQkFBbUJuRixTQUN0QjJFLE1BRHNCLENBQ2YsVUFBQ1MsR0FBRCxFQUFNQyxJQUFOO0FBQUEsMEJBQ0hELEdBREc7QUFFTixTQUFDQyxLQUFLQyxNQUFOLEdBQWVELEtBQUtFO0FBRmQ7QUFBQSxLQURlLEVBSW5CLEVBSm1CLENBQXpCOztBQU1BdEcsVUFBTSxVQUFOLEVBQWtCa0csZ0JBQWxCOztBQUVBLFdBQU9iLE9BQU9DLElBQVAsQ0FBWXJDLHNCQUFaLEVBQ0pzQyxNQURJLENBQ0csVUFBQ0MsSUFBRDtBQUFBLGFBQVV2Qyx1QkFBYXVDLElBQWIsRUFBbUJDLE1BQTdCO0FBQUEsS0FESCxFQUVKL0UsR0FGSSxDQUVBO0FBQUEsYUFBVXdELFdBQVdnQyxnQkFBWCxFQUE2QmxGLE1BQTdCLEVBQXFDLHlCQUFZMkIsTUFBWixDQUFyQyxDQUFWO0FBQUEsS0FGQSxDQUFQO0FBR0QsRyIsImZpbGUiOiJmaWxsT3JkZXJib29rLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucy9ib29rIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnXG5pbXBvcnQgX2RlYnVnIGZyb20gJ2RlYnVnJ1xuXG5pbXBvcnQgaGFuZGxlRXJyb3IgZnJvbSAnLi4vLi4vLi4vYXBwL2FjdGlvbnMvZXJyb3JzL2hhbmRsZUVycm9yJ1xuaW1wb3J0IGZldGNoUHJpY2UgZnJvbSAnLi4vLi4vLi4vYXBwL2FjdGlvbnMvZmV0Y2hQcmljZSdcbmltcG9ydCBQYWlyIGZyb20gJy4uLy4uL1BhaXInXG5cbmltcG9ydCBUUkFERV9DT05GSUcgZnJvbSAnLi4vLi4vLi4vY29uZmlnL2NvbnN0YW50cy9UUkFERV9DT05GSUcnXG5pbXBvcnQgVFJBREVfT1JERVJfTUlOQU1PVU5UUyBmcm9tICcuLi8uLi8uLi9jb25maWcvY29uc3RhbnRzL1RSQURFX09SREVSX01JTkFNT1VOVFMnXG5pbXBvcnQgVFJBREVfVElDS0VSUyBmcm9tICcuLi8uLi8uLi9jb25maWcvY29uc3RhbnRzL1RSQURFX1RJQ0tFUlMnXG5pbXBvcnQgUEFJUl9UWVBFUyBmcm9tICcuLi8uLi8uLi9jb25maWcvY29uc3RhbnRzL1BBSVJfVFlQRVMnXG5cbmltcG9ydCB7IGNyZWF0ZU9yZGVyLCByZW1vdmVNeU9yZGVycyB9IGZyb20gJy4uLy4uL2NvcmUvb3JkZXJzJ1xuXG5cbmNvbnN0IGRlYnVnID0gKC4uLmFyZ3MpID0+IGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgLi4uYXJncykgLy9fZGVidWcoJ3N3YXAuYm90JylcbmNvbnN0IG4gPSAobikgPT4gKGNiKSA9PiBBcnJheShuKS5maWxsKG51bGwpLm1hcCgoZWwsIGkpID0+IGNiKGksIGVsKSlcbmNvbnN0IFRFTiA9IEJpZ051bWJlcigxMClcblxuY29uc3QgZ2V0Q3VycmVuY2llc0JhbGFuY2UgPSAoYmFsYW5jZXMsIHRpY2tlcikgPT4ge1xuICBjb25zdCBbIHBhaXJfbWFpbiwgcGFpcl9iYXNlIF0gPSB0aWNrZXIuc3BsaXQoJy0nKVxuXG4gIGNvbnN0IHNlbGwgPSBiYWxhbmNlc1twYWlyX21haW5dXG4gIGNvbnN0IGJ1eSA9IGJhbGFuY2VzW3BhaXJfYmFzZV1cblxuICBpZiAoc2VsbCA9PT0gMCAmJiBidXkgPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIHsgc2VsbCwgYnV5IH1cbn1cblxuY29uc3QgZ2V0QW1vdW50ID0gKHRpY2tlck9yZGVyKSA9PiB0aWNrZXJPcmRlci5hbW91bnRcbiAgPyBCaWdOdW1iZXIodGlja2VyT3JkZXIuYW1vdW50KVxuICA6IEJpZ051bWJlcihUUkFERV9PUkRFUl9NSU5BTU9VTlRTLmRlZmF1bHQpLnRpbWVzKFRFTi5wb3coaW5kZXgpKVxuXG5jb25zdCBjaGVja0NhbkNyZWF0ZUN1cnJlbnRPcmRlciA9ICh0aWNrZXJPcmRlciwgb3JkZXJUeXBlKSA9PlxuICB0eXBlb2YodGlja2VyT3JkZXJbb3JkZXJUeXBlXSkgPT09ICd1bmRlZmluZWQnXG4gICAgPyB0cnVlXG4gICAgOiB0aWNrZXJPcmRlcltvcmRlclR5cGVdXG5cbmNvbnN0IGNoZWNrSGF2ZVNwcmVhZCA9ICh0aWNrZXJPcmRlciwgb3JkZXJUeXBlKSA9PlxuICB0aWNrZXJPcmRlcltgc3ByZWFkJHtvcmRlclR5cGUgPT09ICdidXknID8gJ0J1eScgOiAnU2VsbCd9YF0gPiAwXG4gICAgPyB0cnVlXG4gICAgOiBmYWxzZVxuXG5jb25zdCBnZXRTcHJlYWQgPSAodGlja2VyT3JkZXIsIG9yZGVyVHlwZSkgPT4gb3JkZXJUeXBlID09PSAnYnV5J1xuICA/IEJpZ051bWJlcigxMDApXG4gICAgLm1pbnVzKHRpY2tlck9yZGVyLnNwcmVhZEJ1eSlcbiAgICAuZGl2aWRlZEJ5KDEwMClcbiAgOiBCaWdOdW1iZXIoMTAwKVxuICAgIC5wbHVzKHRpY2tlck9yZGVyLnNwcmVhZFNlbGwpXG4gICAgLmRpdmlkZWRCeSgxMDApXG5cbmNvbnN0IGNyZWF0ZU9yZGVycyA9IChvcmRlclR5cGUsIGJhbGFuY2UsIHRpY2tlciwgdGlja2VyT3JkZXJzLCBiYXNlUHJpY2UpID0+IHtcbiAgY29uc3Qgb3JkZXJzID0gW11cbiAgY29uc3QgdHlwZSA9IG9yZGVyVHlwZSA9PT0gJ2J1eScgPyBQQUlSX1RZUEVTLkJJRCA6IFBBSVJfVFlQRVMuQVNLXG4gIGNvbnN0IGNhbkNyZWF0ZU9yZGVycyA9IFRSQURFX0NPTkZJR1t0aWNrZXJdW29yZGVyVHlwZV0gJiYgYmFsYW5jZSA+IDBcbiAgY29uc3QgY2hlY2tJc0Vub3VnaEJhbGFuY2UgPSAocHJpY2UsIGFtb3VudCkgPT4gb3JkZXJUeXBlID09PSAnYnV5J1xuICAgID8gQmlnTnVtYmVyKGJhbGFuY2UpLmlzTGVzc1RoYW4oYW1vdW50KVxuICAgIDogQmlnTnVtYmVyKGJhbGFuY2UpLmlzTGVzc1RoYW4oQmlnTnVtYmVyKGFtb3VudCkuZGl2aWRlZEJ5KHByaWNlKSlcblxuICBkZWJ1Zyh0aWNrZXIsIGBjcmVhdGUgJHtvcmRlclR5cGV9IG9yZGVyc2AsIGNhbkNyZWF0ZU9yZGVycylcblxuICBpZiAoY2FuQ3JlYXRlT3JkZXJzKSB7XG4gICAgdGlja2VyT3JkZXJzLmZvckVhY2goKHRpY2tlck9yZGVyLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgY2FuQ3JlYXRlQ3VycmVudE9yZGVyID0gY2hlY2tDYW5DcmVhdGVDdXJyZW50T3JkZXIodGlja2VyT3JkZXIsIG9yZGVyVHlwZSlcbiAgICAgIGNvbnN0IGhhdmVTcHJlYWQgPSBjaGVja0hhdmVTcHJlYWQodGlja2VyT3JkZXIsIG9yZGVyVHlwZSlcblxuICAgICAgaWYgKCFjYW5DcmVhdGVDdXJyZW50T3JkZXIgfHwgIWhhdmVTcHJlYWQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNwcmVhZCA9IGdldFNwcmVhZCh0aWNrZXJPcmRlciwgb3JkZXJUeXBlKVxuICAgICAgY29uc3QgcHJpY2UgPSBiYXNlUHJpY2UubXVsdGlwbGllZEJ5KHNwcmVhZClcbiAgICAgIGNvbnN0IGFtb3VudCA9IGdldEFtb3VudCh0aWNrZXJPcmRlcilcbiAgICAgIGNvbnN0IGlzRW5vdWdoQmFsYW5jZSA9IGNoZWNrSXNFbm91Z2hCYWxhbmNlKHByaWNlLCBhbW91bnQpXG5cbiAgICAgIGlmIChpc0Vub3VnaEJhbGFuY2UpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIG9yZGVycy5wdXNoKG5ldyBQYWlyKHsgdGlja2VyLCBwcmljZSwgdHlwZSwgYW1vdW50IH0pKVxuICAgIH0pXG4gIH1cblxuICByZXR1cm4gb3JkZXJzXG59XG5cbmNvbnN0IGNyZWF0ZUFsbE9yZGVycyA9IGFzeW5jIChiYWxhbmNlcywgdGlja2VyKSA9PiB7XG4gIGNvbnN0IHByaWNlID0gVFJBREVfQ09ORklHW3RpY2tlcl0uc2VsbFByaWNlXG4gICAgPyBCaWdOdW1iZXIoVFJBREVfQ09ORklHW3RpY2tlcl0uc2VsbFByaWNlKVxuICAgIDogYXdhaXQgZmV0Y2hQcmljZSh0aWNrZXIsICBUUkFERV9DT05GSUdbdGlja2VyXS50eXBlKVxuXG4gIGlmICghcHJpY2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dGlja2VyfSBwcmljZSBpcyBlbXB0eWApXG4gIH1cblxuICBjb25zdCB0aWNrZXJPcmRlcnMgPSBUUkFERV9DT05GSUdbdGlja2VyXS5vcmRlcnNcblxuICBpZiAoIXRpY2tlck9yZGVycyB8fCB0aWNrZXJPcmRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke3RpY2tlcn0gb3JkZXJzIGlzIGVtcHR5YClcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbmNpZXNCYWxhbmNlID0gZ2V0Q3VycmVuY2llc0JhbGFuY2UoYmFsYW5jZXMsIHRpY2tlcilcblxuICBpZiAoIWN1cnJlbmNpZXNCYWxhbmNlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke3RpY2tlcn0gd2FsbGV0cyBhcmUgZW1wdHlgKVxuICB9XG5cbiAgcmV0dXJuIFtcbiAgICAuLi5jcmVhdGVPcmRlcnMoJ2J1eScsIGN1cnJlbmNpZXNCYWxhbmNlLmJ1eSwgdGlja2VyLCB0aWNrZXJPcmRlcnMsIHByaWNlKSxcbiAgICAuLi5jcmVhdGVPcmRlcnMoJ3NlbGwnLCBjdXJyZW5jaWVzQmFsYW5jZS5zZWxsLCB0aWNrZXIsIHRpY2tlck9yZGVycywgcHJpY2UpXG4gIF1cbn1cblxuY29uc3QgZmlsbE9yZGVycyA9IGFzeW5jIChiYWxhbmNlcywgdGlja2VyLCBjcmVhdGUpID0+IHtcbiAgdHJ5IHtcbiAgICBkZWJ1ZygnZmlsbE9yZGVycyBmb3InLCB0aWNrZXIpXG5cbiAgICBjb25zdCBvcmRlcnMgPSBhd2FpdCBjcmVhdGVBbGxPcmRlcnMoYmFsYW5jZXMsIHRpY2tlcilcblxuICAgIGRlYnVnKCduZXcgb3JkZXJzJywgb3JkZXJzLmxlbmd0aClcblxuICAgIG9yZGVyc1xuICAgICAgLm1hcChwYWlyID0+ICh7IC4uLnBhaXIudG9PcmRlcigpLCBpc1BhcnRpYWw6IHRydWUgfSkpXG4gICAgICAubWFwKGNyZWF0ZSlcbiAgICAgIC5tYXAob3JkZXIgPT4gb3JkZXIuc2V0UmVxdWVzdEhhbmRsZXJGb3JQYXJ0aWFsKCdidXlBbW91bnQnLFxuICAgICAgICAoeyBidXlBbW91bnQgfSwgb2xkT3JkZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBvbGRQYWlyID0gUGFpci5mcm9tT3JkZXIob2xkT3JkZXIpXG5cbiAgICAgICAgICBkZWJ1Zygnb2xkUGFpcicsIG9sZFBhaXIpXG5cbiAgICAgICAgICBjb25zdCB7IHByaWNlIH0gPSBvbGRQYWlyXG5cbiAgICAgICAgICBkZWJ1ZygnbmV3QnV5QW1vdW50JywgYnV5QW1vdW50LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICAvLyBCVVkgW21haW5dID0gU0VMTCBbYmFzZV0gQ1VSUkVOQ1lcbiAgICAgICAgICAvLyBwcmljZSA9IFttYWluXS9bYmFzZV0gPSBbYnV5XS9bc2VsbF1cblxuICAgICAgICAgIC8vIEJVWSAxMCBFVEggPSBTRUxMIDEgQlRDXG4gICAgICAgICAgLy8gcHJpY2UgPSAxMCA9IGJ1eUFtb3VudCAvIHNlbGxBbW91bnRcbiAgICAgICAgICAvLyBuZXdTZWxsQW1vdW50ID0gYnV5QW1vdW50IC8gcHJpY2VcblxuICAgICAgICAgIGNvbnN0IHNlbGxBbW91bnQgPSBvbGRQYWlyLmlzQmlkKClcbiAgICAgICAgICAgID8gYnV5QW1vdW50LnRpbWVzKHByaWNlKVxuICAgICAgICAgICAgOiBidXlBbW91bnQuZGl2KHByaWNlKVxuXG4gICAgICAgICAgZGVidWcoJ25ld1NlbGxBbW91bnQnLCBzZWxsQW1vdW50LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICBjb25zdCBuZXdPcmRlciA9ICh7IHNlbGxBbW91bnQsIGJ1eUFtb3VudCB9KVxuXG4gICAgICAgICAgZGVidWcoJ25ld09yZGVyJywgbmV3T3JkZXIsIG5ld09yZGVyLmJ1eUFtb3VudC50b1N0cmluZygpLCBuZXdPcmRlci5zZWxsQW1vdW50LnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICByZXR1cm4gUGFpci5mcm9tT3JkZXIoeyAuLi5vbGRPcmRlciwgLi4ubmV3T3JkZXIgfSkudG9PcmRlcigpXG4gICAgICAgIH0pKVxuICAgICAgLm1hcChvcmRlciA9PiBvcmRlci5zZXRSZXF1ZXN0SGFuZGxlckZvclBhcnRpYWwoJ3NlbGxBbW91bnQnLFxuICAgICAgICAoeyBzZWxsQW1vdW50IH0sIG9sZE9yZGVyKSA9PiB7XG4gICAgICAgICAgY29uc3Qgb2xkUGFpciA9IFBhaXIuZnJvbU9yZGVyKG9sZE9yZGVyKVxuXG4gICAgICAgICAgZGVidWcoJ29sZFBhaXInLCBvbGRQYWlyLCBvbGRQYWlyLnByaWNlLnRvU3RyaW5nKCkpXG5cbiAgICAgICAgICBjb25zdCB7IHByaWNlIH0gPSBvbGRQYWlyXG5cbiAgICAgICAgICBkZWJ1ZygnbmV3U2VsbEFtb3VudCcsIHNlbGxBbW91bnQudG9TdHJpbmcoKSlcblxuICAgICAgICAgIC8vIGlmIEJJRCwgdGhlblxuICAgICAgICAgIC8vIHByaWNlID09IGJ1eUFtb3VudCAvIHNlbGxBbW91bnRcblxuICAgICAgICAgIGNvbnN0IGJ1eUFtb3VudCA9IG9sZFBhaXIuaXNCaWQoKVxuICAgICAgICAgICAgPyBzZWxsQW1vdW50LmRpdihwcmljZSlcbiAgICAgICAgICAgIDogc2VsbEFtb3VudC50aW1lcyhwcmljZSlcblxuICAgICAgICAgIGRlYnVnKCduZXdCdXlBbW91bnQnLCBidXlBbW91bnQudG9TdHJpbmcoKSlcblxuICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gKHsgc2VsbEFtb3VudCwgYnV5QW1vdW50IH0pXG5cbiAgICAgICAgICBkZWJ1ZygnbmV3T3JkZXInLCBuZXdPcmRlciwgbmV3T3JkZXIuYnV5QW1vdW50LnRvU3RyaW5nKCksIG5ld09yZGVyLnNlbGxBbW91bnQudG9TdHJpbmcoKSlcblxuICAgICAgICAgIHJldHVybiBQYWlyLmZyb21PcmRlcih7IC4uLm9sZE9yZGVyLCAuLi5uZXdPcmRlciB9KS50b09yZGVyKClcbiAgICAgICAgfSkpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGhhbmRsZUVycm9yKGVycilcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAod2FsbGV0LCBvcmRlcnMpID0+IHtcbiAgcmVtb3ZlTXlPcmRlcnMob3JkZXJzKVxuXG4gIGNvbnN0IHN5bWJvbHMgPSBPYmplY3Qua2V5cyhUUkFERV9DT05GSUcpXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gVFJBREVfQ09ORklHW2l0ZW1dLmFjdGl2ZSlcbiAgICAubWFwKHRpY2tlciA9PiB0aWNrZXIuc3BsaXQoJy0nKSlcbiAgICAucmVkdWNlKChzdW0sIGFycikgPT4gc3VtLmNvbmNhdChhcnIpLCBbXSlcbiAgICAuc29ydCgoYSwgYikgPT4gYSA+IGIgPyAxIDogYSA9PSBiID8gMCA6IC0xKVxuXG4gIGNvbnN0IGJhbGFuY2VzID0gYXdhaXQgd2FsbGV0LmdldEJhbGFuY2Uoc3ltYm9scylcblxuICBjb25zdCBiYWxhbmNlRm9yU3ltYm9sID0gYmFsYW5jZXNcbiAgICAucmVkdWNlKChvYmosIGVsZW0pID0+ICh7XG4gICAgICAuLi5vYmosXG4gICAgICBbZWxlbS5zeW1ib2xdOiBlbGVtLnZhbHVlLFxuICAgIH0pLCB7fSlcblxuICBkZWJ1ZygnYmFsYW5jZXMnLCBiYWxhbmNlRm9yU3ltYm9sKVxuXG4gIHJldHVybiBPYmplY3Qua2V5cyhUUkFERV9DT05GSUcpXG4gICAgLmZpbHRlcigoaXRlbSkgPT4gVFJBREVfQ09ORklHW2l0ZW1dLmFjdGl2ZSlcbiAgICAubWFwKHRpY2tlciA9PiBmaWxsT3JkZXJzKGJhbGFuY2VGb3JTeW1ib2wsIHRpY2tlciwgY3JlYXRlT3JkZXIob3JkZXJzKSkpXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fillOrderbook.js"
      ],
      "names": [
        "debug",
        "args",
        "console",
        "log",
        "Date",
        "toISOString",
        "n",
        "cb",
        "Array",
        "fill",
        "map",
        "el",
        "i",
        "TEN",
        "getCurrenciesBalance",
        "balances",
        "ticker",
        "pair_main",
        "pair_base",
        "split",
        "sell",
        "buy",
        "getAmount",
        "tickerOrder",
        "amount",
        "TRADE_ORDER_MINAMOUNTS",
        "default",
        "times",
        "pow",
        "index",
        "checkCanCreateCurrentOrder",
        "orderType",
        "checkHaveSpread",
        "getSpread",
        "minus",
        "spreadBuy",
        "dividedBy",
        "plus",
        "spreadSell",
        "createOrders",
        "balance",
        "tickerOrders",
        "basePrice",
        "orders",
        "type",
        "PAIR_TYPES",
        "BID",
        "ASK",
        "canCreateOrders",
        "TRADE_CONFIG",
        "checkIsEnoughBalance",
        "price",
        "isLessThan",
        "forEach",
        "canCreateCurrentOrder",
        "haveSpread",
        "spread",
        "multipliedBy",
        "isEnoughBalance",
        "push",
        "Pair",
        "createAllOrders",
        "sellPrice",
        "Error",
        "length",
        "currenciesBalance",
        "fillOrders",
        "create",
        "pair",
        "toOrder",
        "isPartial",
        "order",
        "setRequestHandlerForPartial",
        "buyAmount",
        "oldOrder",
        "oldPair",
        "fromOrder",
        "toString",
        "sellAmount",
        "isBid",
        "div",
        "newOrder",
        "err",
        "wallet",
        "symbols",
        "Object",
        "keys",
        "filter",
        "item",
        "active",
        "reduce",
        "sum",
        "arr",
        "concat",
        "sort",
        "a",
        "b",
        "getBalance",
        "balanceForSymbol",
        "obj",
        "elem",
        "symbol",
        "value"
      ],
      "mappings": "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",
      "file": "fillOrderbook.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/book",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\nimport _debug from 'debug'\n\nimport handleError from '../../../app/actions/errors/handleError'\nimport fetchPrice from '../../../app/actions/fetchPrice'\nimport Pair from '../../Pair'\n\nimport TRADE_CONFIG from '../../../config/constants/TRADE_CONFIG'\nimport TRADE_ORDER_MINAMOUNTS from '../../../config/constants/TRADE_ORDER_MINAMOUNTS'\nimport TRADE_TICKERS from '../../../config/constants/TRADE_TICKERS'\nimport PAIR_TYPES from '../../../config/constants/PAIR_TYPES'\n\nimport { createOrder, removeMyOrders } from '../../core/orders'\n\n\nconst debug = (...args) => console.log(new Date().toISOString(), ...args) //_debug('swap.bot')\nconst n = (n) => (cb) => Array(n).fill(null).map((el, i) => cb(i, el))\nconst TEN = BigNumber(10)\n\nconst getCurrenciesBalance = (balances, ticker) => {\n  const [ pair_main, pair_base ] = ticker.split('-')\n\n  const sell = balances[pair_main]\n  const buy = balances[pair_base]\n\n  if (sell === 0 && buy === 0) {\n    return null\n  }\n\n  return { sell, buy }\n}\n\nconst getAmount = (tickerOrder) => tickerOrder.amount\n  ? BigNumber(tickerOrder.amount)\n  : BigNumber(TRADE_ORDER_MINAMOUNTS.default).times(TEN.pow(index))\n\nconst checkCanCreateCurrentOrder = (tickerOrder, orderType) =>\n  typeof(tickerOrder[orderType]) === 'undefined'\n    ? true\n    : tickerOrder[orderType]\n\nconst checkHaveSpread = (tickerOrder, orderType) =>\n  tickerOrder[`spread${orderType === 'buy' ? 'Buy' : 'Sell'}`] > 0\n    ? true\n    : false\n\nconst getSpread = (tickerOrder, orderType) => orderType === 'buy'\n  ? BigNumber(100)\n    .minus(tickerOrder.spreadBuy)\n    .dividedBy(100)\n  : BigNumber(100)\n    .plus(tickerOrder.spreadSell)\n    .dividedBy(100)\n\nconst createOrders = (orderType, balance, ticker, tickerOrders, basePrice) => {\n  const orders = []\n  const type = orderType === 'buy' ? PAIR_TYPES.BID : PAIR_TYPES.ASK\n  const canCreateOrders = TRADE_CONFIG[ticker][orderType] && balance > 0\n  const checkIsEnoughBalance = (price, amount) => orderType === 'buy'\n    ? BigNumber(balance).isLessThan(amount)\n    : BigNumber(balance).isLessThan(BigNumber(amount).dividedBy(price))\n\n  debug(ticker, `create ${orderType} orders`, canCreateOrders)\n\n  if (canCreateOrders) {\n    tickerOrders.forEach((tickerOrder, index) => {\n      const canCreateCurrentOrder = checkCanCreateCurrentOrder(tickerOrder, orderType)\n      const haveSpread = checkHaveSpread(tickerOrder, orderType)\n\n      if (!canCreateCurrentOrder || !haveSpread) {\n        return\n      }\n\n      const spread = getSpread(tickerOrder, orderType)\n      const price = basePrice.multipliedBy(spread)\n      const amount = getAmount(tickerOrder)\n      const isEnoughBalance = checkIsEnoughBalance(price, amount)\n\n      if (isEnoughBalance) {\n        return\n      }\n\n      orders.push(new Pair({ ticker, price, type, amount }))\n    })\n  }\n\n  return orders\n}\n\nconst createAllOrders = async (balances, ticker) => {\n  const price = TRADE_CONFIG[ticker].sellPrice\n    ? BigNumber(TRADE_CONFIG[ticker].sellPrice)\n    : await fetchPrice(ticker,  TRADE_CONFIG[ticker].type)\n\n  if (!price) {\n    throw new Error(`${ticker} price is empty`)\n  }\n\n  const tickerOrders = TRADE_CONFIG[ticker].orders\n\n  if (!tickerOrders || tickerOrders.length === 0) {\n    throw new Error(`${ticker} orders is empty`)\n  }\n\n  const currenciesBalance = getCurrenciesBalance(balances, ticker)\n\n  if (!currenciesBalance) {\n    throw new Error(`${ticker} wallets are empty`)\n  }\n\n  return [\n    ...createOrders('buy', currenciesBalance.buy, ticker, tickerOrders, price),\n    ...createOrders('sell', currenciesBalance.sell, ticker, tickerOrders, price)\n  ]\n}\n\nconst fillOrders = async (balances, ticker, create) => {\n  try {\n    debug('fillOrders for', ticker)\n\n    const orders = await createAllOrders(balances, ticker)\n\n    debug('new orders', orders.length)\n\n    orders\n      .map(pair => ({ ...pair.toOrder(), isPartial: true }))\n      .map(create)\n      .map(order => order.setRequestHandlerForPartial('buyAmount',\n        ({ buyAmount }, oldOrder) => {\n          const oldPair = Pair.fromOrder(oldOrder)\n\n          debug('oldPair', oldPair)\n\n          const { price } = oldPair\n\n          debug('newBuyAmount', buyAmount.toString())\n\n          // BUY [main] = SELL [base] CURRENCY\n          // price = [main]/[base] = [buy]/[sell]\n\n          // BUY 10 ETH = SELL 1 BTC\n          // price = 10 = buyAmount / sellAmount\n          // newSellAmount = buyAmount / price\n\n          const sellAmount = oldPair.isBid()\n            ? buyAmount.times(price)\n            : buyAmount.div(price)\n\n          debug('newSellAmount', sellAmount.toString())\n\n          const newOrder = ({ sellAmount, buyAmount })\n\n          debug('newOrder', newOrder, newOrder.buyAmount.toString(), newOrder.sellAmount.toString())\n\n          return Pair.fromOrder({ ...oldOrder, ...newOrder }).toOrder()\n        }))\n      .map(order => order.setRequestHandlerForPartial('sellAmount',\n        ({ sellAmount }, oldOrder) => {\n          const oldPair = Pair.fromOrder(oldOrder)\n\n          debug('oldPair', oldPair, oldPair.price.toString())\n\n          const { price } = oldPair\n\n          debug('newSellAmount', sellAmount.toString())\n\n          // if BID, then\n          // price == buyAmount / sellAmount\n\n          const buyAmount = oldPair.isBid()\n            ? sellAmount.div(price)\n            : sellAmount.times(price)\n\n          debug('newBuyAmount', buyAmount.toString())\n\n          const newOrder = ({ sellAmount, buyAmount })\n\n          debug('newOrder', newOrder, newOrder.buyAmount.toString(), newOrder.sellAmount.toString())\n\n          return Pair.fromOrder({ ...oldOrder, ...newOrder }).toOrder()\n        }))\n  } catch (err) {\n    handleError(err)\n  }\n}\n\nexport default async (wallet, orders) => {\n  removeMyOrders(orders)\n\n  const symbols = Object.keys(TRADE_CONFIG)\n    .filter((item) => TRADE_CONFIG[item].active)\n    .map(ticker => ticker.split('-'))\n    .reduce((sum, arr) => sum.concat(arr), [])\n    .sort((a, b) => a > b ? 1 : a == b ? 0 : -1)\n\n  const balances = await wallet.getBalance(symbols)\n\n  const balanceForSymbol = balances\n    .reduce((obj, elem) => ({\n      ...obj,\n      [elem.symbol]: elem.value,\n    }), {})\n\n  debug('balances', balanceForSymbol)\n\n  return Object.keys(TRADE_CONFIG)\n    .filter((item) => TRADE_CONFIG[item].active)\n    .map(ticker => fillOrders(balanceForSymbol, ticker, createOrder(orders)))\n}\n"
      ]
    },
    "mtime": 1591947314000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/app/actions/fetchPrice.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/app/actions\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../config/constants/TRADE_TICKERS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_TICKERS"
              }
            ]
          },
          {
            "source": "./errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../middlewares/prices",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getPriceByPair"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/app/actions/fetchPrice.js",
      "filenameRelative": "/home/pm2user/swap.bot/app/actions/fetchPrice.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fetchPrice.js",
      "sourceFileName": "fetchPrice.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/app/actions",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fetchPrice"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _TRADE_TICKERS = require('../../config/constants/TRADE_TICKERS');\n\nvar _TRADE_TICKERS2 = _interopRequireDefault(_TRADE_TICKERS);\n\nvar _handleError = require('./errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _prices2 = require('../middlewares/prices');\n\nvar _prices3 = _interopRequireDefault(_prices2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nlet _isOutdated = true;\nlet _firstRun = true;\nlet _prices = [];\n\nconst fetchPrice = (() => {\n  var _ref = _asyncToGenerator(function* (obj, type) {\n    const ticker = obj.ticker ? obj.ticker : obj;\n\n    try {\n      // if (!TRADE_TICKERS.includes(ticker)) return\n\n      if (_isOutdated || !(ticker in _prices)) {\n\n        _isOutdated = false;\n        if (_firstRun) {\n          _firstRun = false;\n          setTimeout(function () {\n            return _isOutdated = true;\n          }, 5 * 1000);\n        }\n        _prices[ticker] = yield (0, _prices3.default)(ticker, type);\n      }\n\n      return _prices[ticker];\n    } catch (err) {\n      (0, _handleError2.default)(err);\n    }\n  });\n\n  return function fetchPrice(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nmodule.exports = fetchPrice;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoUHJpY2UuanMiXSwibmFtZXMiOlsiX2lzT3V0ZGF0ZWQiLCJfZmlyc3RSdW4iLCJfcHJpY2VzIiwiZmV0Y2hQcmljZSIsIm9iaiIsInR5cGUiLCJ0aWNrZXIiLCJzZXRUaW1lb3V0IiwiZXJyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7Ozs7O0FBR0EsSUFBSUEsY0FBYyxJQUFsQjtBQUNBLElBQUlDLFlBQVksSUFBaEI7QUFDQSxJQUFJQyxVQUFVLEVBQWQ7O0FBRUEsTUFBTUM7QUFBQSwrQkFBYSxXQUFPQyxHQUFQLEVBQVlDLElBQVosRUFBcUI7QUFDdEMsVUFBTUMsU0FBU0YsSUFBSUUsTUFBSixHQUFhRixJQUFJRSxNQUFqQixHQUEwQkYsR0FBekM7O0FBRUEsUUFBSTtBQUNIOztBQUVDLFVBQUlKLGVBQWUsRUFBRU0sVUFBVUosT0FBWixDQUFuQixFQUEwQzs7QUFFeENGLHNCQUFjLEtBQWQ7QUFDQSxZQUFHQyxTQUFILEVBQWM7QUFDWkEsc0JBQVksS0FBWjtBQUNBTSxxQkFBVztBQUFBLG1CQUFPUCxjQUFjLElBQXJCO0FBQUEsV0FBWCxFQUF1QyxJQUFJLElBQTNDO0FBQ0Q7QUFDQ0UsZ0JBQVFJLE1BQVIsSUFBa0IsTUFBTSxzQkFBZUEsTUFBZixFQUF1QkQsSUFBdkIsQ0FBeEI7QUFDSDs7QUFFRCxhQUFPSCxRQUFRSSxNQUFSLENBQVA7QUFDRCxLQWRELENBY0UsT0FBT0UsR0FBUCxFQUFZO0FBQ1osaUNBQVlBLEdBQVo7QUFDRDtBQUNGLEdBcEJLOztBQUFBO0FBQUE7QUFBQTtBQUFBLElBQU47O0FBc0JBQyxPQUFPQyxPQUFQLEdBQWlCUCxVQUFqQiIsImZpbGUiOiJmZXRjaFByaWNlLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvYXBwL2FjdGlvbnMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVFJBREVfVElDS0VSUyBmcm9tICcuLi8uLi9jb25maWcvY29uc3RhbnRzL1RSQURFX1RJQ0tFUlMnXG5pbXBvcnQgaGFuZGxlRXJyb3IgZnJvbSAnLi9lcnJvcnMvaGFuZGxlRXJyb3InXG5pbXBvcnQgZ2V0UHJpY2VCeVBhaXIgZnJvbSAnLi4vbWlkZGxld2FyZXMvcHJpY2VzJ1xuXG5cbmxldCBfaXNPdXRkYXRlZCA9IHRydWVcbmxldCBfZmlyc3RSdW4gPSB0cnVlXG5sZXQgX3ByaWNlcyA9IFtdXG5cbmNvbnN0IGZldGNoUHJpY2UgPSBhc3luYyAob2JqLCB0eXBlKSA9PiB7XG4gIGNvbnN0IHRpY2tlciA9IG9iai50aWNrZXIgPyBvYmoudGlja2VyIDogb2JqXG5cbiAgdHJ5IHtcbiAgIC8vIGlmICghVFJBREVfVElDS0VSUy5pbmNsdWRlcyh0aWNrZXIpKSByZXR1cm5cblxuICAgIGlmIChfaXNPdXRkYXRlZCB8fCAhKHRpY2tlciBpbiBfcHJpY2VzKSApIHtcblxuICAgICAgX2lzT3V0ZGF0ZWQgPSBmYWxzZVxuICAgICAgaWYoX2ZpcnN0UnVuKSB7XG4gICAgICAgIF9maXJzdFJ1biA9IGZhbHNlXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gKF9pc091dGRhdGVkID0gdHJ1ZSksIDUgKiAxMDAwKVxuICAgICAgfVxuICAgICAgICBfcHJpY2VzW3RpY2tlcl0gPSBhd2FpdCBnZXRQcmljZUJ5UGFpcih0aWNrZXIsIHR5cGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIF9wcmljZXNbdGlja2VyXVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBoYW5kbGVFcnJvcihlcnIpXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmZXRjaFByaWNlXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fetchPrice.js"
      ],
      "names": [
        "_isOutdated",
        "_firstRun",
        "_prices",
        "fetchPrice",
        "obj",
        "type",
        "ticker",
        "setTimeout",
        "err",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;AACA;;;;AACA;;;;;;;;AAGA,IAAIA,cAAc,IAAlB;AACA,IAAIC,YAAY,IAAhB;AACA,IAAIC,UAAU,EAAd;;AAEA,MAAMC;AAAA,+BAAa,WAAOC,GAAP,EAAYC,IAAZ,EAAqB;AACtC,UAAMC,SAASF,IAAIE,MAAJ,GAAaF,IAAIE,MAAjB,GAA0BF,GAAzC;;AAEA,QAAI;AACH;;AAEC,UAAIJ,eAAe,EAAEM,UAAUJ,OAAZ,CAAnB,EAA0C;;AAExCF,sBAAc,KAAd;AACA,YAAGC,SAAH,EAAc;AACZA,sBAAY,KAAZ;AACAM,qBAAW;AAAA,mBAAOP,cAAc,IAArB;AAAA,WAAX,EAAuC,IAAI,IAA3C;AACD;AACCE,gBAAQI,MAAR,IAAkB,MAAM,sBAAeA,MAAf,EAAuBD,IAAvB,CAAxB;AACH;;AAED,aAAOH,QAAQI,MAAR,CAAP;AACD,KAdD,CAcE,OAAOE,GAAP,EAAY;AACZ,iCAAYA,GAAZ;AACD;AACF,GApBK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAsBAC,OAAOC,OAAP,GAAiBP,UAAjB",
      "file": "fetchPrice.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/actions",
      "sourcesContent": [
        "import TRADE_TICKERS from '../../config/constants/TRADE_TICKERS'\nimport handleError from './errors/handleError'\nimport getPriceByPair from '../middlewares/prices'\n\n\nlet _isOutdated = true\nlet _firstRun = true\nlet _prices = []\n\nconst fetchPrice = async (obj, type) => {\n  const ticker = obj.ticker ? obj.ticker : obj\n\n  try {\n   // if (!TRADE_TICKERS.includes(ticker)) return\n\n    if (_isOutdated || !(ticker in _prices) ) {\n\n      _isOutdated = false\n      if(_firstRun) {\n        _firstRun = false\n        setTimeout(() => (_isOutdated = true), 5 * 1000)\n      }\n        _prices[ticker] = await getPriceByPair(ticker, type)\n    }\n\n    return _prices[ticker]\n  } catch (err) {\n    handleError(err)\n  }\n}\n\nmodule.exports = fetchPrice\n"
      ]
    },
    "mtime": 1552906020000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/app/middlewares/prices.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/app/middlewares\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "request-promise-cache",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "request"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "getPriceByPair",
            "syncPrices"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getPriceByPair",
              "exported": "getPriceByPair"
            },
            {
              "kind": "local",
              "local": "syncPrices",
              "exported": "syncPrices"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/app/middlewares/prices.js",
      "filenameRelative": "/home/pm2user/swap.bot/app/middlewares/prices.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "prices.js",
      "sourceFileName": "prices.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/middlewares",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/app/middlewares",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "prices"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syncPrices = exports.getPriceByPair = undefined;\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _requestPromiseCache = require('request-promise-cache');\n\nvar _requestPromiseCache2 = _interopRequireDefault(_requestPromiseCache);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst BTC_SYMBOL = 1; // BTC\nconst LTC_SYMBOL = 2; // LTC is 2\nconst ETH_SYMBOL = 1027; // ETH is 1027\nconst JOT_SYMBOL = 2948; // Jury.Online\nconst SNM_SYMBOL = 1723;\nconst GHOST_SYMBOL = 5471;\n\nconst COIN_API = `https://api.coinmarketcap.com/v2`;\nconst YOBIT_API = `https://yobit.net/api/3`;\n\nconst btcPrice = () => getNoxonPrice('BTC', 'USD');\nconst usdPrice = () => btcPrice().then(usds => (0, _bignumber2.default)(1).div(usds));\n\nconst getNoxonPrice = (symbol, base = 'BTC') => {\n  return (0, _requestPromiseCache2.default)({\n    url: `https://noxon.wpmix.net/cursAll.php`,\n    cacheTTL: 86400000\n  }).then(res => {\n    try {\n      return JSON.parse(res);\n    } catch (error) {\n      console.error('getNoxonPrice fail parse JSON');\n      //console.error(res)\n      console.error(error);\n    }\n  }).then(json => {\n    if (json && json.data) {\n      let btcData = false;\n\n      if (base.toUpperCase() === `BTC`) {\n        btcData = json.data.filter(item => item && item.symbol && item.symbol.toUpperCase() === `BTC`);\n        if (btcData.length) {\n          btcData = btcData[0];\n        }\n      }\n\n      const btcPrice = btcData && btcData.quote && btcData.quote.USD && btcData.quote.USD.price ? btcData.quote.USD.price : null;\n\n      let symbolInfo = json.data.filter(item => item && item.symbol && item.symbol.toUpperCase() === symbol.toUpperCase());\n      if (symbolInfo.length > 0) {\n        symbolInfo = symbolInfo[0];\n        if (base.toUpperCase() === `USD`) return symbolInfo.quote.USD.price;\n        if (base.toUpperCase() === `BTC`) {\n          console.log('Convert price to BTC', symbol, base, btcPrice, symbolInfo.quote.USD.price);\n          const priceInBtc = symbolInfo.quote.USD.price / btcPrice;\n          return priceInBtc;\n        }\n      }\n      console.log(\"Cant get price for \", symbol, base);\n    }\n  }).then(num => (0, _bignumber2.default)(num)).catch(error => {\n    console.error(`Cannot get ${symbol} price (from noxon)`);\n    console.error(error);\n  });\n};\n\nconst getYobitPrice = symbol => (0, _requestPromiseCache2.default)(`${YOBIT_API}/ticker/${symbol.toLowerCase()}`).then(res => JSON.parse(res)).then(json => json[symbol.toLowerCase()].last).then(num => (0, _bignumber2.default)(num)).catch(error => {\n  console.error(`Cannot get (getYobitPrice) ${symbol} price: ${error}`);\n  return null;\n});\n\nconst getPrice = (symbol, base = 'BTC') => (0, _requestPromiseCache2.default)({\n  url: `${COIN_API}/ticker/${symbol}/?convert=${base}`,\n  cacheTTL: 86400000\n}).then(res => JSON.parse(res)).then(json => json.data.quotes[base].price).then(num => (0, _bignumber2.default)(num)).catch(error => {\n  console.error(`Cannot get (getPrice) ${symbol} price: ${error}`);\n  return null;\n});\n\nconst getPriceByPair = exports.getPriceByPair = (() => {\n  var _ref = _asyncToGenerator(function* (pair, type) {\n    if (type) {\n      switch (type) {\n        case 'token':\n          console.log('getPriceByPair - token type', pair);\n          const [pair_main, pair_base] = pair.split('-');\n\n          const token_price = yield getPrice(BTC_SYMBOL, pair_main);\n\n          return (0, _bignumber2.default)(1).div(token_price);\n      }\n    }\n\n    switch (pair) {\n      case 'BTC-WBTC':\n        return (0, _bignumber2.default)('1');\n      case 'WBTC-BTC':\n        return (0, _bignumber2.default)('1');\n      case 'BTC-USDT':\n        return btcPrice();\n\n      case 'ETH-BTC':\n\n        return getNoxonPrice('ETH');\n        return getPrice(ETH_SYMBOL);\n\n      case 'SYC2':\n\n        return null;\n\n      case 'LTC-BTC':\n        return getNoxonPrice('LTC');\n        return getPrice(LTC_SYMBOL);\n\n      case 'JOT-BTC':\n        return getNoxonPrice('JOT');\n        return getPrice(JOT_SYMBOL);\n\n      case 'USD-BTC':\n\n        return usdPrice();\n\n      case 'SWAP-BTC':\n        return usdPrice().then(function (price) {\n          return price.multipliedBy('1');\n        });\n      case 'USDT-BTC':\n        return usdPrice().then(function (price) {\n          console.log('getPrice for USDT-BTC', price, price.toString());\n          return price.multipliedBy('1');\n        });\n      case 'GHOST-BTC':\n        return usdPrice().then(function (price) {\n          return price.multipliedBy('2');\n        });\n      case 'SNM-BTC':\n        console.log((yield getNoxonPrice('SNM')));\n        return (0, _bignumber2.default)((yield getPrice(SNM_SYMBOL))).multipliedBy(0.7);\n      case 'JACK-BTC':\n        return usdPrice().then(function (price) {\n          return price.multipliedBy('0.02');\n        });\n\n      case 'SWAP-USDT':\n        return (0, _bignumber2.default)('5');\n\n      case 'NOXON-USDT':\n        return (0, _bignumber2.default)('42.3256');\n\n      case 'NOXON-BTC':\n        return getPrice(ETH_SYMBOL);\n\n      case 'BTRM-BTC':\n        return getYobitPrice('BTRM_BTC');\n\n      case 'XSAT-BTC':\n        return usdPrice().then(function (price) {\n          return price.multipliedBy('0.13');\n        });\n    }\n  });\n\n  return function getPriceByPair(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nconst syncPrices = exports.syncPrices = (() => {\n  var _ref2 = _asyncToGenerator(function* () {\n    console.log('app.middlewares.prices syncPrices');\n    return {\n      'ETH-BTC': yield getPrice(ETH_SYMBOL),\n      'JOT-BTC': yield getPrice(JOT_SYMBOL),\n      'USD-BTC': yield usdPrice(),\n      'WBTC-BTC': (0, _bignumber2.default)('1'),\n      'BTC-WBTC': (0, _bignumber2.default)('1'),\n      'SWAP-BTC': yield usdPrice().then(function (price) {\n        return price.multipliedBy('5');\n      }),\n      'USDT-BTC': yield usdPrice().then(function (price) {\n        return price.multipliedBy('1');\n      }),\n      'SNM-BTC': yield getPrice(SNM_SYMBOL),\n      'SWAP-USDT': yield Promise.resolve((0, _bignumber2.default)('5')),\n      'NOXON-USDT': yield Promise.resolve((0, _bignumber2.default)('42.3256')),\n      'NOXON-BTC': yield getPrice(ETH_SYMBOL),\n      'BTRM-BTC': yield getYobitPrice('BTRM_BTC'),\n      'XSAT-BTC': yield usdPrice().then(function (price) {\n        return price.multipliedBy('0.13');\n      })\n    };\n  });\n\n  return function syncPrices() {\n    return _ref2.apply(this, arguments);\n  };\n})();\n\nexports.default = getPriceByPair;\n// module.exports = getPriceByPair\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaWNlcy5qcyJdLCJuYW1lcyI6WyJCVENfU1lNQk9MIiwiTFRDX1NZTUJPTCIsIkVUSF9TWU1CT0wiLCJKT1RfU1lNQk9MIiwiU05NX1NZTUJPTCIsIkdIT1NUX1NZTUJPTCIsIkNPSU5fQVBJIiwiWU9CSVRfQVBJIiwiYnRjUHJpY2UiLCJnZXROb3hvblByaWNlIiwidXNkUHJpY2UiLCJ0aGVuIiwidXNkcyIsImRpdiIsInN5bWJvbCIsImJhc2UiLCJ1cmwiLCJjYWNoZVRUTCIsInJlcyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsImpzb24iLCJkYXRhIiwiYnRjRGF0YSIsInRvVXBwZXJDYXNlIiwiZmlsdGVyIiwiaXRlbSIsImxlbmd0aCIsInF1b3RlIiwiVVNEIiwicHJpY2UiLCJzeW1ib2xJbmZvIiwibG9nIiwicHJpY2VJbkJ0YyIsIm51bSIsImNhdGNoIiwiZ2V0WW9iaXRQcmljZSIsInRvTG93ZXJDYXNlIiwibGFzdCIsImdldFByaWNlIiwicXVvdGVzIiwiZ2V0UHJpY2VCeVBhaXIiLCJwYWlyIiwidHlwZSIsInBhaXJfbWFpbiIsInBhaXJfYmFzZSIsInNwbGl0IiwidG9rZW5fcHJpY2UiLCJtdWx0aXBsaWVkQnkiLCJ0b1N0cmluZyIsInN5bmNQcmljZXMiLCJQcm9taXNlIiwicmVzb2x2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7Ozs7O0FBR0EsTUFBTUEsYUFBYSxDQUFuQixDLENBQXFCO0FBQ3JCLE1BQU1DLGFBQWEsQ0FBbkIsQyxDQUFxQjtBQUNyQixNQUFNQyxhQUFhLElBQW5CLEMsQ0FBd0I7QUFDeEIsTUFBTUMsYUFBYSxJQUFuQixDLENBQXdCO0FBQ3hCLE1BQU1DLGFBQWEsSUFBbkI7QUFDQSxNQUFNQyxlQUFlLElBQXJCOztBQUVBLE1BQU1DLFdBQVksa0NBQWxCO0FBQ0EsTUFBTUMsWUFBYSx5QkFBbkI7O0FBRUEsTUFBTUMsV0FBVyxNQUFNQyxjQUFjLEtBQWQsRUFBcUIsS0FB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UUFBUUMsT0FBUixDQUFnQix5QkFBVSxHQUFWLENBQWhCLENBVGQ7QUFVTCxvQkFBYyxNQUFNRCxRQUFRQyxPQUFSLENBQWdCLHlCQUFVLFNBQVYsQ0FBaEIsQ0FWZjtBQVdMLG1CQUFhLE1BQU1iLFNBQVN2QyxVQUFULENBWGQ7QUFZTCxrQkFBWSxNQUFNb0MsY0FBYyxVQUFkLENBWmI7QUFhTCxrQkFBWSxNQUFNNUIsV0FBV0MsSUFBWCxDQUFnQjtBQUFBLGVBQVNxQixNQUFNa0IsWUFBTixDQUFtQixNQUFuQixDQUFUO0FBQUEsT0FBaEI7QUFiYixLQUFQO0FBZUQsR0FqQlk7O0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBTjs7a0JBbUJRUCxjO0FBQ2YiLCJmaWxlIjoicHJpY2VzLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvYXBwL21pZGRsZXdhcmVzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdyZXF1ZXN0LXByb21pc2UtY2FjaGUnXG5cblxuY29uc3QgQlRDX1NZTUJPTCA9IDEgLy8gQlRDXG5jb25zdCBMVENfU1lNQk9MID0gMiAvLyBMVEMgaXMgMlxuY29uc3QgRVRIX1NZTUJPTCA9IDEwMjcgLy8gRVRIIGlzIDEwMjdcbmNvbnN0IEpPVF9TWU1CT0wgPSAyOTQ4IC8vIEp1cnkuT25saW5lXG5jb25zdCBTTk1fU1lNQk9MID0gMTcyM1xuY29uc3QgR0hPU1RfU1lNQk9MID0gNTQ3MVxuXG5jb25zdCBDT0lOX0FQSSA9IGBodHRwczovL2FwaS5jb2lubWFya2V0Y2FwLmNvbS92MmBcbmNvbnN0IFlPQklUX0FQSSA9IGBodHRwczovL3lvYml0Lm5ldC9hcGkvM2BcblxuY29uc3QgYnRjUHJpY2UgPSAoKSA9PiBnZXROb3hvblByaWNlKCdCVEMnLCAnVVNEJylcbmNvbnN0IHVzZFByaWNlID0gKCkgPT4gYnRjUHJpY2UoKS50aGVuKHVzZHMgPT4gQmlnTnVtYmVyKDEpLmRpdih1c2RzKSlcblxuY29uc3QgZ2V0Tm94b25QcmljZSA9IChzeW1ib2wsIGJhc2UgPSAnQlRDJykgPT4ge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiBgaHR0cHM6Ly9ub3hvbi53cG1peC5uZXQvY3Vyc0FsbC5waHBgLFxuICAgIGNhY2hlVFRMOiA4NjQwMDAwMFxuICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlcylcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2dldE5veG9uUHJpY2UgZmFpbCBwYXJzZSBKU09OJylcbiAgICAgICAgLy9jb25zb2xlLmVycm9yKHJlcylcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKChqc29uKSA9PiB7XG4gICAgICBpZiAoanNvbiAmJiBqc29uLmRhdGEpIHtcbiAgICAgICAgbGV0IGJ0Y0RhdGEgPSBmYWxzZVxuICAgICAgICBcbiAgICAgICAgaWYgKGJhc2UudG9VcHBlckNhc2UoKSA9PT0gYEJUQ2Ape1xuICAgICAgICAgIGJ0Y0RhdGEgPSBqc29uLmRhdGEuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnN5bWJvbCAmJiBpdGVtLnN5bWJvbC50b1VwcGVyQ2FzZSgpID09PSBgQlRDYClcbiAgICAgICAgICBpZihidGNEYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgYnRjRGF0YSA9IGJ0Y0RhdGFbMF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ0Y1ByaWNlID0gKFxuICAgICAgICAgIGJ0Y0RhdGFcbiAgICAgICAgICAmJiBidGNEYXRhLnF1b3RlXG4gICAgICAgICAgJiYgYnRjRGF0YS5xdW90ZS5VU0RcbiAgICAgICAgICAmJiBidGNEYXRhLnF1b3RlLlVTRC5wcmljZVxuICAgICAgICApID8gYnRjRGF0YS5xdW90ZS5VU0QucHJpY2UgOiBudWxsXG5cblxuICAgICAgICBsZXQgc3ltYm9sSW5mbyA9IGpzb24uZGF0YS5maWx0ZXIoKGl0ZW0pID0+IChpdGVtICYmIGl0ZW0uc3ltYm9sICYmIGl0ZW0uc3ltYm9sLnRvVXBwZXJDYXNlKCkgPT09IHN5bWJvbC50b1VwcGVyQ2FzZSgpKSlcbiAgICAgICAgaWYgKHN5bWJvbEluZm8ubGVuZ3RoPjApIHtcbiAgICAgICAgICBzeW1ib2xJbmZvID0gc3ltYm9sSW5mb1swXVxuICAgICAgICAgIGlmIChiYXNlLnRvVXBwZXJDYXNlKCkgPT09IGBVU0RgKSByZXR1cm4gc3ltYm9sSW5mby5xdW90ZS5VU0QucHJpY2VcbiAgICAgICAgICBpZiAoYmFzZS50b1VwcGVyQ2FzZSgpID09PSBgQlRDYCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnZlcnQgcHJpY2UgdG8gQlRDJywgc3ltYm9sLCBiYXNlLCBidGNQcmljZSwgc3ltYm9sSW5mby5xdW90ZS5VU0QucHJpY2UpXG4gICAgICAgICAgICBjb25zdCBwcmljZUluQnRjID0gc3ltYm9sSW5mby5xdW90ZS5VU0QucHJpY2UgLyBidGNQcmljZVxuICAgICAgICAgICAgcmV0dXJuIHByaWNlSW5CdGNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJDYW50IGdldCBwcmljZSBmb3IgXCIsIHN5bWJvbCwgYmFzZSlcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKG51bSA9PiBCaWdOdW1iZXIobnVtKSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBDYW5ub3QgZ2V0ICR7c3ltYm9sfSBwcmljZSAoZnJvbSBub3hvbilgKVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9KVxufVxuXG5jb25zdCBnZXRZb2JpdFByaWNlID0gKHN5bWJvbCkgPT5cbiAgcmVxdWVzdChgJHtZT0JJVF9BUEl9L3RpY2tlci8ke3N5bWJvbC50b0xvd2VyQ2FzZSgpfWApXG4gICAgLnRoZW4ocmVzID0+IEpTT04ucGFyc2UocmVzKSlcbiAgICAudGhlbihqc29uID0+IGpzb25bc3ltYm9sLnRvTG93ZXJDYXNlKCldLmxhc3RcbiAgICApXG4gICAgLnRoZW4obnVtID0+IEJpZ051bWJlcihudW0pKVxuICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBDYW5ub3QgZ2V0IChnZXRZb2JpdFByaWNlKSAke3N5bWJvbH0gcHJpY2U6ICR7ZXJyb3J9YClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfSlcblxuY29uc3QgZ2V0UHJpY2UgPSAoc3ltYm9sLCBiYXNlID0gJ0JUQycpID0+XG4gIHJlcXVlc3Qoe1xuICAgIHVybDogYCR7Q09JTl9BUEl9L3RpY2tlci8ke3N5bWJvbH0vP2NvbnZlcnQ9JHtiYXNlfWAsXG4gICAgY2FjaGVUVEw6IDg2NDAwMDAwXG4gIH0pXG4gICAgLnRoZW4ocmVzID0+IEpTT04ucGFyc2UocmVzKSlcbiAgICAudGhlbihqc29uID0+IGpzb24uZGF0YS5xdW90ZXNbYmFzZV0ucHJpY2UpXG4gICAgLnRoZW4obnVtID0+IEJpZ051bWJlcihudW0pKVxuICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGBDYW5ub3QgZ2V0IChnZXRQcmljZSkgJHtzeW1ib2x9IHByaWNlOiAke2Vycm9yfWApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH0pXG5cblxuZXhwb3J0IGNvbnN0IGdldFByaWNlQnlQYWlyID0gYXN5bmMgKHBhaXIsIHR5cGUpID0+IHtcbiAgaWYgKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Rva2VuJzpcbiAgICAgICAgY29uc29sZS5sb2coJ2dldFByaWNlQnlQYWlyIC0gdG9rZW4gdHlwZScsIHBhaXIpXG4gICAgICAgIGNvbnN0IFsgcGFpcl9tYWluLCBwYWlyX2Jhc2UgXSA9IHBhaXIuc3BsaXQoJy0nKVxuXG4gICAgICAgIGNvbnN0IHRva2VuX3ByaWNlID0gYXdhaXQgZ2V0UHJpY2UoQlRDX1NZTUJPTCwgcGFpcl9tYWluKVxuXG4gICAgICAgIHJldHVybiBCaWdOdW1iZXIoMSkuZGl2KHRva2VuX3ByaWNlKVxuICAgIH1cbiAgfVxuXG4gIHN3aXRjaCAocGFpcikge1xuICAgIGNhc2UgJ0JUQy1XQlRDJzpcbiAgICAgIHJldHVybiBCaWdOdW1iZXIoJzEnKVxuICAgIGNhc2UgJ1dCVEMtQlRDJzpcbiAgICAgIHJldHVybiBCaWdOdW1iZXIoJzEnKVxuICAgIGNhc2UgJ0JUQy1VU0RUJzpcbiAgICAgIHJldHVybiBidGNQcmljZSgpXG5cbiAgICBjYXNlICdFVEgtQlRDJzpcbiAgICAgIFxuICAgICAgcmV0dXJuIGdldE5veG9uUHJpY2UoJ0VUSCcpXG4gICAgICByZXR1cm4gZ2V0UHJpY2UoRVRIX1NZTUJPTClcblxuICAgIGNhc2UgJ1NZQzInOlxuXG4gICAgICByZXR1cm4gbnVsbDtcblxuICAgIGNhc2UgJ0xUQy1CVEMnOlxuICAgICAgcmV0dXJuIGdldE5veG9uUHJpY2UoJ0xUQycpXG4gICAgICByZXR1cm4gZ2V0UHJpY2UoTFRDX1NZTUJPTClcblxuICAgIGNhc2UnSk9ULUJUQyc6XG4gICAgICByZXR1cm4gZ2V0Tm94b25QcmljZSgnSk9UJylcbiAgICAgIHJldHVybiBnZXRQcmljZShKT1RfU1lNQk9MKVxuXG4gICAgY2FzZSAnVVNELUJUQyc6XG4gICAgICBcbiAgICAgIHJldHVybiB1c2RQcmljZSgpXG5cbiAgICBjYXNlICdTV0FQLUJUQyc6XG4gICAgICByZXR1cm4gdXNkUHJpY2UoKS50aGVuKHByaWNlID0+IHByaWNlLm11bHRpcGxpZWRCeSgnMScpKVxuICAgIGNhc2UgJ1VTRFQtQlRDJzpcbiAgICAgIHJldHVybiB1c2RQcmljZSgpLnRoZW4ocHJpY2UgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnZ2V0UHJpY2UgZm9yIFVTRFQtQlRDJywgcHJpY2UsIHByaWNlLnRvU3RyaW5nKCkpXG4gICAgICAgIHJldHVybiBwcmljZS5tdWx0aXBsaWVkQnkoJzEnKVxuICAgICAgfSlcbiAgICBjYXNlICdHSE9TVC1CVEMnOlxuICAgICAgcmV0dXJuIHVzZFByaWNlKCkudGhlbihwcmljZSA9PiBwcmljZS5tdWx0aXBsaWVkQnkoJzInKSlcbiAgICBjYXNlICdTTk0tQlRDJzpcbiAgICAgIGNvbnNvbGUubG9nKGF3YWl0IGdldE5veG9uUHJpY2UoJ1NOTScpKVxuICAgICAgcmV0dXJuIEJpZ051bWJlciggYXdhaXQgZ2V0UHJpY2UoU05NX1NZTUJPTCkgKS5tdWx0aXBsaWVkQnkoMC43KVxuICAgIGNhc2UgJ0pBQ0stQlRDJzpcbiAgICAgIHJldHVybiB1c2RQcmljZSgpLnRoZW4ocHJpY2UgPT4gcHJpY2UubXVsdGlwbGllZEJ5KCcwLjAyJykpXG5cbiAgICBjYXNlICdTV0FQLVVTRFQnOlxuICAgICAgcmV0dXJuIEJpZ051bWJlcignNScpXG5cbiAgICBjYXNlICdOT1hPTi1VU0RUJzpcbiAgICAgIHJldHVybiBCaWdOdW1iZXIoJzQyLjMyNTYnKVxuXG4gICAgY2FzZSAnTk9YT04tQlRDJzpcbiAgICAgIHJldHVybiBnZXRQcmljZShFVEhfU1lNQk9MKVxuXG4gICAgY2FzZSAnQlRSTS1CVEMnOlxuICAgICAgcmV0dXJuIGdldFlvYml0UHJpY2UoJ0JUUk1fQlRDJylcblxuICAgIGNhc2UgJ1hTQVQtQlRDJzpcbiAgICAgIHJldHVybiB1c2RQcmljZSgpLnRoZW4ocHJpY2UgPT4gcHJpY2UubXVsdGlwbGllZEJ5KCcwLjEzJykpXG4gIH1cbn1cblxuXG5leHBvcnQgY29uc3Qgc3luY1ByaWNlcyA9IGFzeW5jICgpID0+IHtcbiAgY29uc29sZS5sb2coJ2FwcC5taWRkbGV3YXJlcy5wcmljZXMgc3luY1ByaWNlcycpXG4gIHJldHVybiB7XG4gICAgJ0VUSC1CVEMnOiBhd2FpdCBnZXRQcmljZShFVEhfU1lNQk9MKSxcbiAgICAnSk9ULUJUQyc6IGF3YWl0IGdldFByaWNlKEpPVF9TWU1CT0wpLFxuICAgICdVU0QtQlRDJzogYXdhaXQgdXNkUHJpY2UoKSxcbiAgICAnV0JUQy1CVEMnOiBCaWdOdW1iZXIoJzEnKSxcbiAgICAnQlRDLVdCVEMnOiBCaWdOdW1iZXIoJzEnKSxcbiAgICAnU1dBUC1CVEMnOiBhd2FpdCB1c2RQcmljZSgpLnRoZW4ocHJpY2UgPT4gcHJpY2UubXVsdGlwbGllZEJ5KCc1JykpLFxuICAgICdVU0RULUJUQyc6IGF3YWl0IHVzZFByaWNlKCkudGhlbihwcmljZSA9PiBwcmljZS5tdWx0aXBsaWVkQnkoJzEnKSksXG4gICAgJ1NOTS1CVEMnOiBhd2FpdCBnZXRQcmljZShTTk1fU1lNQk9MKSxcbiAgICAnU1dBUC1VU0RUJzogYXdhaXQgUHJvbWlzZS5yZXNvbHZlKEJpZ051bWJlcignNScpKSxcbiAgICAnTk9YT04tVVNEVCc6IGF3YWl0IFByb21pc2UucmVzb2x2ZShCaWdOdW1iZXIoJzQyLjMyNTYnKSksXG4gICAgJ05PWE9OLUJUQyc6IGF3YWl0IGdldFByaWNlKEVUSF9TWU1CT0wpLFxuICAgICdCVFJNLUJUQyc6IGF3YWl0IGdldFlvYml0UHJpY2UoJ0JUUk1fQlRDJyksXG4gICAgJ1hTQVQtQlRDJzogYXdhaXQgdXNkUHJpY2UoKS50aGVuKHByaWNlID0+IHByaWNlLm11bHRpcGxpZWRCeSgnMC4xMycpKSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBnZXRQcmljZUJ5UGFpclxuLy8gbW9kdWxlLmV4cG9ydHMgPSBnZXRQcmljZUJ5UGFpclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "prices.js"
      ],
      "names": [
        "BTC_SYMBOL",
        "LTC_SYMBOL",
        "ETH_SYMBOL",
        "JOT_SYMBOL",
        "SNM_SYMBOL",
        "GHOST_SYMBOL",
        "COIN_API",
        "YOBIT_API",
        "btcPrice",
        "getNoxonPrice",
        "usdPrice",
        "then",
        "usds",
        "div",
        "symbol",
        "base",
        "url",
        "cacheTTL",
        "res",
        "JSON",
        "parse",
        "error",
        "console",
        "json",
        "data",
        "btcData",
        "toUpperCase",
        "filter",
        "item",
        "length",
        "quote",
        "USD",
        "price",
        "symbolInfo",
        "log",
        "priceInBtc",
        "num",
        "catch",
        "getYobitPrice",
        "toLowerCase",
        "last",
        "getPrice",
        "quotes",
        "getPriceByPair",
        "pair",
        "type",
        "pair_main",
        "pair_base",
        "split",
        "token_price",
        "multipliedBy",
        "toString",
        "syncPrices",
        "Promise",
        "resolve"
      ],
      "mappings": "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",
      "file": "prices.js",
      "sourceRoot": "/home/pm2user/swap.bot/app/middlewares",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\nimport request from 'request-promise-cache'\n\n\nconst BTC_SYMBOL = 1 // BTC\nconst LTC_SYMBOL = 2 // LTC is 2\nconst ETH_SYMBOL = 1027 // ETH is 1027\nconst JOT_SYMBOL = 2948 // Jury.Online\nconst SNM_SYMBOL = 1723\nconst GHOST_SYMBOL = 5471\n\nconst COIN_API = `https://api.coinmarketcap.com/v2`\nconst YOBIT_API = `https://yobit.net/api/3`\n\nconst btcPrice = () => getNoxonPrice('BTC', 'USD')\nconst usdPrice = () => btcPrice().then(usds => BigNumber(1).div(usds))\n\nconst getNoxonPrice = (symbol, base = 'BTC') => {\n  return request({\n    url: `https://noxon.wpmix.net/cursAll.php`,\n    cacheTTL: 86400000\n  })\n    .then((res) => {\n      try {\n        return JSON.parse(res)\n      } catch (error) {\n        console.error('getNoxonPrice fail parse JSON')\n        //console.error(res)\n        console.error(error)\n      }\n    })\n    .then((json) => {\n      if (json && json.data) {\n        let btcData = false\n        \n        if (base.toUpperCase() === `BTC`){\n          btcData = json.data.filter(item => item && item.symbol && item.symbol.toUpperCase() === `BTC`)\n          if(btcData.length) {\n            btcData = btcData[0]\n          }\n        }\n        \n        const btcPrice = (\n          btcData\n          && btcData.quote\n          && btcData.quote.USD\n          && btcData.quote.USD.price\n        ) ? btcData.quote.USD.price : null\n\n\n        let symbolInfo = json.data.filter((item) => (item && item.symbol && item.symbol.toUpperCase() === symbol.toUpperCase()))\n        if (symbolInfo.length>0) {\n          symbolInfo = symbolInfo[0]\n          if (base.toUpperCase() === `USD`) return symbolInfo.quote.USD.price\n          if (base.toUpperCase() === `BTC`) {\n            console.log('Convert price to BTC', symbol, base, btcPrice, symbolInfo.quote.USD.price)\n            const priceInBtc = symbolInfo.quote.USD.price / btcPrice\n            return priceInBtc\n          }\n        }\n        console.log(\"Cant get price for \", symbol, base)\n      }\n    })\n    .then(num => BigNumber(num))\n    .catch((error) => {\n      console.error(`Cannot get ${symbol} price (from noxon)`)\n      console.error(error)\n    })\n}\n\nconst getYobitPrice = (symbol) =>\n  request(`${YOBIT_API}/ticker/${symbol.toLowerCase()}`)\n    .then(res => JSON.parse(res))\n    .then(json => json[symbol.toLowerCase()].last\n    )\n    .then(num => BigNumber(num))\n    .catch(error => {\n      console.error(`Cannot get (getYobitPrice) ${symbol} price: ${error}`)\n      return null\n    })\n\nconst getPrice = (symbol, base = 'BTC') =>\n  request({\n    url: `${COIN_API}/ticker/${symbol}/?convert=${base}`,\n    cacheTTL: 86400000\n  })\n    .then(res => JSON.parse(res))\n    .then(json => json.data.quotes[base].price)\n    .then(num => BigNumber(num))\n    .catch(error => {\n      console.error(`Cannot get (getPrice) ${symbol} price: ${error}`)\n      return null\n    })\n\n\nexport const getPriceByPair = async (pair, type) => {\n  if (type) {\n    switch (type) {\n      case 'token':\n        console.log('getPriceByPair - token type', pair)\n        const [ pair_main, pair_base ] = pair.split('-')\n\n        const token_price = await getPrice(BTC_SYMBOL, pair_main)\n\n        return BigNumber(1).div(token_price)\n    }\n  }\n\n  switch (pair) {\n    case 'BTC-WBTC':\n      return BigNumber('1')\n    case 'WBTC-BTC':\n      return BigNumber('1')\n    case 'BTC-USDT':\n      return btcPrice()\n\n    case 'ETH-BTC':\n      \n      return getNoxonPrice('ETH')\n      return getPrice(ETH_SYMBOL)\n\n    case 'SYC2':\n\n      return null;\n\n    case 'LTC-BTC':\n      return getNoxonPrice('LTC')\n      return getPrice(LTC_SYMBOL)\n\n    case'JOT-BTC':\n      return getNoxonPrice('JOT')\n      return getPrice(JOT_SYMBOL)\n\n    case 'USD-BTC':\n      \n      return usdPrice()\n\n    case 'SWAP-BTC':\n      return usdPrice().then(price => price.multipliedBy('1'))\n    case 'USDT-BTC':\n      return usdPrice().then(price => {\n        console.log('getPrice for USDT-BTC', price, price.toString())\n        return price.multipliedBy('1')\n      })\n    case 'GHOST-BTC':\n      return usdPrice().then(price => price.multipliedBy('2'))\n    case 'SNM-BTC':\n      console.log(await getNoxonPrice('SNM'))\n      return BigNumber( await getPrice(SNM_SYMBOL) ).multipliedBy(0.7)\n    case 'JACK-BTC':\n      return usdPrice().then(price => price.multipliedBy('0.02'))\n\n    case 'SWAP-USDT':\n      return BigNumber('5')\n\n    case 'NOXON-USDT':\n      return BigNumber('42.3256')\n\n    case 'NOXON-BTC':\n      return getPrice(ETH_SYMBOL)\n\n    case 'BTRM-BTC':\n      return getYobitPrice('BTRM_BTC')\n\n    case 'XSAT-BTC':\n      return usdPrice().then(price => price.multipliedBy('0.13'))\n  }\n}\n\n\nexport const syncPrices = async () => {\n  console.log('app.middlewares.prices syncPrices')\n  return {\n    'ETH-BTC': await getPrice(ETH_SYMBOL),\n    'JOT-BTC': await getPrice(JOT_SYMBOL),\n    'USD-BTC': await usdPrice(),\n    'WBTC-BTC': BigNumber('1'),\n    'BTC-WBTC': BigNumber('1'),\n    'SWAP-BTC': await usdPrice().then(price => price.multipliedBy('5')),\n    'USDT-BTC': await usdPrice().then(price => price.multipliedBy('1')),\n    'SNM-BTC': await getPrice(SNM_SYMBOL),\n    'SWAP-USDT': await Promise.resolve(BigNumber('5')),\n    'NOXON-USDT': await Promise.resolve(BigNumber('42.3256')),\n    'NOXON-BTC': await getPrice(ETH_SYMBOL),\n    'BTRM-BTC': await getYobitPrice('BTRM_BTC'),\n    'XSAT-BTC': await usdPrice().then(price => price.multipliedBy('0.13')),\n  }\n}\n\nexport default getPriceByPair\n// module.exports = getPriceByPair\n"
      ]
    },
    "mtime": 1593111351000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TRADE_CONFIG.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TRADE_CONFIG.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TRADE_CONFIG.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TRADE_CONFIG.js",
      "sourceFileName": "TRADE_CONFIG.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TRADE_CONFIG"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/*\n\n  Example how is used spread:\n\n            /  100 - spread(%) \\\n  price *  |  –––––––––––––––  |\n           \\       100         /\n\n  Example of orders config:\n\n  'ETH-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005, // must be greater than 0\n        buy: true,      // default true\n        sell: true,     // default true\n        spreadBuy: 2,   // must be greater than 0\n        spreadSell: 2,  // must be greater than 0\n      },\n    ],\n  }\n\n */\n\nexports.default = {\n  'ETH-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.0005,\n      spreadBuy: 2,\n      spreadSell: 2\n    }, {\n      amount: 0.005,\n      spreadBuy: 4,\n      spreadSell: 4\n    }, {\n      amount: 0.05,\n      spreadBuy: 8,\n      spreadSell: 8\n    }, {\n      amount: 0.5,\n      spreadBuy: 16,\n      spreadSell: 16\n    }]\n  },\n  'SWAP-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.0001,\n      spreadBuy: 93.25,\n      spreadSell: 4\n    }, {\n      amount: 0.0005,\n      spreadBuy: 93.25,\n      spreadSell: 4\n    }, {\n      amount: 0.005,\n      spreadBuy: 93.25,\n      spreadSell: 4\n    }]\n  },\n  'GHOST-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.005,\n      spreadBuy: 10,\n      spreadSell: 10\n    }, {\n      amount: 0.01,\n      spreadBuy: 10,\n      spreadSell: 10\n    }, {\n      amount: 0.05,\n      spreadBuy: 10,\n      spreadSell: 10\n    }, {\n      amount: 0.25,\n      spreadBuy: 10,\n      spreadSell: 10\n    }]\n  },\n  'USDT-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.005,\n      spreadBuy: 4,\n      spreadSell: 4\n    }, {\n      amount: 0.01,\n      spreadBuy: 5,\n      spreadSell: 5\n    }, {\n      amount: 0.05,\n      spreadBuy: 5,\n      spreadSell: 5\n    }, {\n      amount: 0.25,\n      spreadBuy: 2,\n      spreadSell: 2\n    }]\n  },\n  'JACK-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.01,\n      spreadBuy: 1,\n      spreadSell: 1\n    }, {\n      amount: 0.02,\n      spreadBuy: 1,\n      spreadSell: 1\n    }]\n  },\n  'JOT-BTC': {\n    active: false,\n    buy: false,\n    sell: false,\n    type: 'coin',\n    orders: [{\n      amount: 0.0005,\n      spreadBuy: 50,\n      spreadSell: 50\n    }, {\n      amount: 0.005,\n      spreadBuy: 60,\n      spreadSell: 60\n    }, {\n      amount: 0.05,\n      spreadBuy: 70,\n      spreadSell: 70\n    }, {\n      amount: 0.5,\n      spreadBuy: 80,\n      spreadSell: 80\n    }]\n  },\n  'SNM-BTC': {\n    active: true,\n    buy: true,\n    sell: false,\n    type: 'coin',\n    orders: [{\n      amount: 0.0005,\n      spreadBuy: 2,\n      spreadSell: 2\n    }, {\n      amount: 0.005,\n      spreadBuy: 4,\n      spreadSell: 4\n    }, {\n      amount: 0.05,\n      spreadBuy: 8,\n      spreadSell: 8\n    }, {\n      amount: 0.5,\n      spreadBuy: 16,\n      spreadSell: 16\n    }]\n  },\n  'WBTC-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.005,\n      spreadBuy: 1,\n      spreadSell: 1\n    }, {\n      amount: 0.01,\n      spreadBuy: 1,\n      spreadSell: 1\n    }, {\n      amount: 0.05,\n      spreadBuy: 1,\n      spreadSell: 1\n    }, {\n      amount: 0.25,\n      spreadBuy: 1,\n      spreadSell: 1\n    }]\n  },\n  'XSAT-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [{\n      amount: 0.0005,\n      spreadBuy: 2,\n      spreadSell: 2\n    }, {\n      amount: 0.005,\n      spreadBuy: 4,\n      spreadSell: 4\n    }, {\n      amount: 0.05,\n      spreadBuy: 8,\n      spreadSell: 8\n    }, {\n      amount: 0.5,\n      spreadBuy: 16,\n      spreadSell: 16\n    }]\n  },\n  'HDP-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    sellPrice: 0.00035,\n    orders: [{\n      amount: 0.0005,\n      spreadBuy: 2,\n      spreadSell: 2\n    }, {\n      amount: 0.005,\n      spreadBuy: 4,\n      spreadSell: 4\n    }, {\n      amount: 0.05,\n      spreadBuy: 8,\n      spreadSell: 8\n    }, {\n      amount: 0.5,\n      spreadBuy: 16,\n      spreadSell: 16\n    }]\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRSQURFX0NPTkZJRy5qcyJdLCJuYW1lcyI6WyJhY3RpdmUiLCJidXkiLCJzZWxsIiwidHlwZSIsIm9yZGVycyIsImFtb3VudCIsInNwcmVhZEJ1eSIsInNwcmVhZFNlbGwiLCJzZWxsUHJpY2UiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0JBNkJlO0FBQ2IsYUFBVztBQUNUQSxZQUFRLElBREM7QUFFVEMsU0FBSyxJQUZJO0FBR1RDLFVBQU0sSUFIRztBQUlUQyxVQUFNLE1BSkc7QUFLVEMsWUFBUSxDQUNOO0FBQ0VDLGNBQVEsTUFEVjtBQUVFQyxpQkFBVyxDQUZiO0FBR0VDLGtCQUFZO0FBSGQsS0FETSxFQU1OO0FBQ0VGLGNBQVEsS0FEVjtBQUVFQyxpQkFBVyxDQUZiO0FBR0VDLGtCQUFZO0FBSGQsS0FOTSxFQVdOO0FBQ0VGLGNBQVEsSUFEVjtBQUVFQyxpQkFBVyxDQUZiO0FBR0VDLGtCQUFZO0FBSGQsS0FYTSxFQWdCTjtBQUNFRixjQUFRLEdBRFY7QUFFRUMsaUJBQVcsRUFGYjtBQUdFQyxrQkFBWTtBQUhkLEtBaEJNO0FBTEMsR0FERTtBQTZCYixjQUFZO0FBQ1ZQLFlBQVEsSUFERTtBQUVWQyxTQUFLLElBRks7QUFHVkMsVUFBTSxJQUhJO0FBSVZDLFVBQU0sTUFKSTtBQUtWQyxZQUFRLENBQ047QUFDRUMsY0FBUSxNQURWO0FBRUVDLGlCQUFXLEtBRmI7QUFHRUMsa0JBQVk7QUFIZCxLQURNLEVBTU47QUFDRUYsY0FBUSxNQURWO0FBRUVDLGlCQUFXLEtBRmI7QUFHRUMsa0JBQVk7QUFIZCxLQU5NLEVBV047QUFDRUYsY0FBUSxLQURWO0FBRUVDLGlCQUFXLEtBRmI7QUFHRUMsa0JBQVk7QUFIZCxLQVhNO0FBTEUsR0E3QkM7QUFvRGIsZUFBYTtBQUNYUCxZQUFRLElBREc7QUFFWEMsU0FBSyxLQUZNO0FBR1hDLFVBQU0sSUFISztBQUlYQyxVQUFNLE1BSks7QUFLWEMsWUFBUSxDQUNOO0FB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ZCxLQWhCTTtBQUxHLEdBdExBO0FBa05iLGNBQVk7QUFDVlAsWUFBUSxJQURFO0FBRVZDLFNBQUssS0FGSztBQUdWQyxVQUFNLElBSEk7QUFJVkMsVUFBTSxNQUpJO0FBS1ZDLFlBQVEsQ0FDTjtBQUNFQyxjQUFRLE1BRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBRE0sRUFNTjtBQUNFRixjQUFRLEtBRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBTk0sRUFXTjtBQUNFRixjQUFRLElBRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBWE0sRUFnQk47QUFDRUYsY0FBUSxHQURWO0FBRUVDLGlCQUFXLEVBRmI7QUFHRUMsa0JBQVk7QUFIZCxLQWhCTTtBQUxFLEdBbE5DO0FBOE9iLGFBQVc7QUFDVFAsWUFBUSxJQURDO0FBRVRDLFNBQUssS0FGSTtBQUdUQyxVQUFNLElBSEc7QUFJVE0sZUFBVyxPQUpGO0FBS1RKLFlBQVEsQ0FDTjtBQUNFQyxjQUFRLE1BRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBRE0sRUFNTjtBQUNFRixjQUFRLEtBRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBTk0sRUFXTjtBQUNFRixjQUFRLElBRFY7QUFFRUMsaUJBQVcsQ0FGYjtBQUdFQyxrQkFBWTtBQUhkLEtBWE0sRUFnQk47QUFDRUYsY0FBUSxHQURWO0FBRUVDLGlCQUFXLEVBRmI7QUFHRUMsa0JBQVk7QUFIZCxLQWhCTTtBQUxDO0FBOU9FLEMiLCJmaWxlIjoiVFJBREVfQ09ORklHLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvY29uZmlnL2NvbnN0YW50cyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5cbiAgRXhhbXBsZSBob3cgaXMgdXNlZCBzcHJlYWQ6XG5cbiAgICAgICAgICAgIC8gIDEwMCAtIHNwcmVhZCglKSBcXFxuICBwcmljZSAqICB8ICDigJPigJPigJPigJPigJPigJPigJPigJPigJPigJPigJPigJPigJPigJPigJMgIHxcbiAgICAgICAgICAgXFwgICAgICAgMTAwICAgICAgICAgL1xuXG4gIEV4YW1wbGUgb2Ygb3JkZXJzIGNvbmZpZzpcblxuICAnRVRILUJUQyc6IHtcbiAgICBhY3RpdmU6IHRydWUsXG4gICAgYnV5OiB0cnVlLFxuICAgIHNlbGw6IHRydWUsXG4gICAgdHlwZTogJ2NvaW4nLFxuICAgIG9yZGVyczogW1xuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDAwNSwgLy8gbXVzdCBiZSBncmVhdGVyIHRoYW4gMFxuICAgICAgICBidXk6IHRydWUsICAgICAgLy8gZGVmYXVsdCB0cnVlXG4gICAgICAgIHNlbGw6IHRydWUsICAgICAvLyBkZWZhdWx0IHRydWVcbiAgICAgICAgc3ByZWFkQnV5OiAyLCAgIC8vIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcbiAgICAgICAgc3ByZWFkU2VsbDogMiwgIC8vIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcbiAgICAgIH0sXG4gICAgXSxcbiAgfVxuXG4gKi9cblxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICdFVEgtQlRDJzoge1xuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICBidXk6IHRydWUsXG4gICAgc2VsbDogdHJ1ZSxcbiAgICB0eXBlOiAnY29pbicsXG4gICAgb3JkZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMDA1LFxuICAgICAgICBzcHJlYWRCdXk6IDIsXG4gICAgICAgIHNwcmVhZFNlbGw6IDJcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogNCxcbiAgICAgICAgc3ByZWFkU2VsbDogNFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjA1LFxuICAgICAgICBzcHJlYWRCdXk6IDgsXG4gICAgICAgIHNwcmVhZFNlbGw6IDhcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC41LFxuICAgICAgICBzcHJlYWRCdXk6IDE2LFxuICAgICAgICBzcHJlYWRTZWxsOiAxNlxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICAnU1dBUC1CVEMnOiB7XG4gICAgYWN0aXZlOiB0cnVlLFxuICAgIGJ1eTogdHJ1ZSxcbiAgICBzZWxsOiB0cnVlLFxuICAgIHR5cGU6ICdjb2luJyxcbiAgICBvcmRlcnM6IFtcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAwMDEsXG4gICAgICAgIHNwcmVhZEJ1eTogOTMuMjUsXG4gICAgICAgIHNwcmVhZFNlbGw6IDRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMDA1LFxuICAgICAgICBzcHJlYWRCdXk6IDkzLjI1LFxuICAgICAgICBzcHJlYWRTZWxsOiA0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDA1LFxuICAgICAgICBzcHJlYWRCdXk6IDkzLjI1LFxuICAgICAgICBzcHJlYWRTZWxsOiA0XG4gICAgICB9XG4gICAgXSxcbiAgfSxcbiAgJ0dIT1NULUJUQyc6IHtcbiAgICBhY3RpdmU6IHRydWUsXG4gICAgYnV5OiBmYWxzZSxcbiAgICBzZWxsOiB0cnVlLFxuICAgIHR5cGU6ICdjb2luJyxcbiAgICBvcmRlcnM6IFtcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxMCxcbiAgICAgICAgc3ByZWFkU2VsbDogMTBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMSxcbiAgICAgICAgc3ByZWFkQnV5OiAxMCxcbiAgICAgICAgc3ByZWFkU2VsbDogMTBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxMCxcbiAgICAgICAgc3ByZWFkU2VsbDogMTBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4yNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxMCxcbiAgICAgICAgc3ByZWFkU2VsbDogMTAsXG4gICAgICB9XG4gICAgXSxcbiAgfSxcbiAgJ1VTRFQtQlRDJzoge1xuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICBidXk6IHRydWUsXG4gICAgc2VsbDogdHJ1ZSxcbiAgICB0eXBlOiAnY29pbicsXG4gICAgb3JkZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogNCxcbiAgICAgICAgc3ByZWFkU2VsbDogNFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAxLFxuICAgICAgICBzcHJlYWRCdXk6IDUsXG4gICAgICAgIHNwcmVhZFNlbGw6IDVcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wNSxcbiAgICAgICAgc3ByZWFkQnV5OiA1LFxuICAgICAgICBzcHJlYWRTZWxsOiA1XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMjUsXG4gICAgICAgIHNwcmVhZEJ1eTogMixcbiAgICAgICAgc3ByZWFkU2VsbDogMixcbiAgICAgIH1cbiAgICBdLFxuICB9LFxuICAnSkFDSy1CVEMnOiB7XG4gICAgYWN0aXZlOiB0cnVlLFxuICAgIGJ1eTogZmFsc2UsXG4gICAgc2VsbDogdHJ1ZSxcbiAgICB0eXBlOiAnY29pbicsXG4gICAgb3JkZXJzOiBbXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMSxcbiAgICAgICAgc3ByZWFkQnV5OiAxLFxuICAgICAgICBzcHJlYWRTZWxsOiAxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDIsXG4gICAgICAgIHNwcmVhZEJ1eTogMSxcbiAgICAgICAgc3ByZWFkU2VsbDogMVxuICAgICAgfVxuICAgIF0sXG4gIH0sXG4gICdKT1QtQlRDJyA6IHtcbiAgICBhY3RpdmU6IGZhbHNlLFxuICAgIGJ1eTogZmFsc2UsXG4gICAgc2VsbDogZmFsc2UsXG4gICAgdHlwZTogJ2NvaW4nLFxuICAgIG9yZGVyczogW1xuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiA1MCxcbiAgICAgICAgc3ByZWFkU2VsbDogNTBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogNjAsXG4gICAgICAgIHNwcmVhZFNlbGw6IDYwXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogNzAsXG4gICAgICAgIHNwcmVhZFNlbGw6IDcwXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuNSxcbiAgICAgICAgc3ByZWFkQnV5OiA4MCxcbiAgICAgICAgc3ByZWFkU2VsbDogODBcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbiAgJ1NOTS1CVEMnIDoge1xuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICBidXk6IHRydWUsXG4gICAgc2VsbDogZmFsc2UsXG4gICAgdHlwZTogJ2NvaW4nLFxuICAgIG9yZGVyczogW1xuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiAyLFxuICAgICAgICBzcHJlYWRTZWxsOiAyXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDA1LFxuICAgICAgICBzcHJlYWRCdXk6IDQsXG4gICAgICAgIHNwcmVhZFNlbGw6IDRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wNSxcbiAgICAgICAgc3ByZWFkQnV5OiA4LFxuICAgICAgICBzcHJlYWRTZWxsOiA4XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxNixcbiAgICAgICAgc3ByZWFkU2VsbDogMTZcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbiAgJ1dCVEMtQlRDJyA6IHtcbiAgICBhY3RpdmUgOiB0cnVlLFxuICAgIGJ1eTogdHJ1ZSxcbiAgICBzZWxsOiB0cnVlLFxuICAgIHR5cGU6ICdjb2luJyxcbiAgICBvcmRlcnM6IFtcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxLFxuICAgICAgICBzcHJlYWRTZWxsOiAxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDEsXG4gICAgICAgIHNwcmVhZEJ1eTogMSxcbiAgICAgICAgc3ByZWFkU2VsbDogMVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjA1LFxuICAgICAgICBzcHJlYWRCdXk6IDEsXG4gICAgICAgIHNwcmVhZFNlbGw6IDFcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4yNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxLFxuICAgICAgICBzcHJlYWRTZWxsOiAxLFxuICAgICAgfVxuICAgIF0sXG4gIH0sXG4gICdYU0FULUJUQyc6IHtcbiAgICBhY3RpdmU6IHRydWUsXG4gICAgYnV5OiBmYWxzZSxcbiAgICBzZWxsOiB0cnVlLFxuICAgIHR5cGU6ICdjb2luJyxcbiAgICBvcmRlcnM6IFtcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAwMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogMixcbiAgICAgICAgc3ByZWFkU2VsbDogMlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiA0LFxuICAgICAgICBzcHJlYWRTZWxsOiA0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDUsXG4gICAgICAgIHNwcmVhZEJ1eTogOCxcbiAgICAgICAgc3ByZWFkU2VsbDogOFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYW1vdW50OiAwLjUsXG4gICAgICAgIHNwcmVhZEJ1eTogMTYsXG4gICAgICAgIHNwcmVhZFNlbGw6IDE2XG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gICdIRFAtQlRDJzoge1xuICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICBidXk6IGZhbHNlLFxuICAgIHNlbGw6IHRydWUsXG4gICAgc2VsbFByaWNlOiAwLjAwMDM1LFxuICAgIG9yZGVyczogW1xuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDAwNSxcbiAgICAgICAgc3ByZWFkQnV5OiAyLFxuICAgICAgICBzcHJlYWRTZWxsOiAyXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuMDA1LFxuICAgICAgICBzcHJlYWRCdXk6IDQsXG4gICAgICAgIHNwcmVhZFNlbGw6IDRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGFtb3VudDogMC4wNSxcbiAgICAgICAgc3ByZWFkQnV5OiA4LFxuICAgICAgICBzcHJlYWRTZWxsOiA4XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBhbW91bnQ6IDAuNSxcbiAgICAgICAgc3ByZWFkQnV5OiAxNixcbiAgICAgICAgc3ByZWFkU2VsbDogMTZcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TRADE_CONFIG.js"
      ],
      "names": [
        "active",
        "buy",
        "sell",
        "type",
        "orders",
        "amount",
        "spreadBuy",
        "spreadSell",
        "sellPrice"
      ],
      "mappings": "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",
      "file": "TRADE_CONFIG.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "/*\n\n  Example how is used spread:\n\n            /  100 - spread(%) \\\n  price *  |  –––––––––––––––  |\n           \\       100         /\n\n  Example of orders config:\n\n  'ETH-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005, // must be greater than 0\n        buy: true,      // default true\n        sell: true,     // default true\n        spreadBuy: 2,   // must be greater than 0\n        spreadSell: 2,  // must be greater than 0\n      },\n    ],\n  }\n\n */\n\n\nexport default {\n  'ETH-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005,\n        spreadBuy: 2,\n        spreadSell: 2\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 4,\n        spreadSell: 4\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 8,\n        spreadSell: 8\n      },\n      {\n        amount: 0.5,\n        spreadBuy: 16,\n        spreadSell: 16\n      },\n    ],\n  },\n  'SWAP-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0001,\n        spreadBuy: 93.25,\n        spreadSell: 4\n      },\n      {\n        amount: 0.0005,\n        spreadBuy: 93.25,\n        spreadSell: 4\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 93.25,\n        spreadSell: 4\n      }\n    ],\n  },\n  'GHOST-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.005,\n        spreadBuy: 10,\n        spreadSell: 10\n      },\n      {\n        amount: 0.01,\n        spreadBuy: 10,\n        spreadSell: 10\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 10,\n        spreadSell: 10\n      },\n      {\n        amount: 0.25,\n        spreadBuy: 10,\n        spreadSell: 10,\n      }\n    ],\n  },\n  'USDT-BTC': {\n    active: true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.005,\n        spreadBuy: 4,\n        spreadSell: 4\n      },\n      {\n        amount: 0.01,\n        spreadBuy: 5,\n        spreadSell: 5\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 5,\n        spreadSell: 5\n      },\n      {\n        amount: 0.25,\n        spreadBuy: 2,\n        spreadSell: 2,\n      }\n    ],\n  },\n  'JACK-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.01,\n        spreadBuy: 1,\n        spreadSell: 1\n      },\n      {\n        amount: 0.02,\n        spreadBuy: 1,\n        spreadSell: 1\n      }\n    ],\n  },\n  'JOT-BTC' : {\n    active: false,\n    buy: false,\n    sell: false,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005,\n        spreadBuy: 50,\n        spreadSell: 50\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 60,\n        spreadSell: 60\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 70,\n        spreadSell: 70\n      },\n      {\n        amount: 0.5,\n        spreadBuy: 80,\n        spreadSell: 80\n      },\n    ],\n  },\n  'SNM-BTC' : {\n    active: true,\n    buy: true,\n    sell: false,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005,\n        spreadBuy: 2,\n        spreadSell: 2\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 4,\n        spreadSell: 4\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 8,\n        spreadSell: 8\n      },\n      {\n        amount: 0.5,\n        spreadBuy: 16,\n        spreadSell: 16\n      },\n    ],\n  },\n  'WBTC-BTC' : {\n    active : true,\n    buy: true,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.005,\n        spreadBuy: 1,\n        spreadSell: 1\n      },\n      {\n        amount: 0.01,\n        spreadBuy: 1,\n        spreadSell: 1\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 1,\n        spreadSell: 1\n      },\n      {\n        amount: 0.25,\n        spreadBuy: 1,\n        spreadSell: 1,\n      }\n    ],\n  },\n  'XSAT-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    type: 'coin',\n    orders: [\n      {\n        amount: 0.0005,\n        spreadBuy: 2,\n        spreadSell: 2\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 4,\n        spreadSell: 4\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 8,\n        spreadSell: 8\n      },\n      {\n        amount: 0.5,\n        spreadBuy: 16,\n        spreadSell: 16\n      },\n    ],\n  },\n  'HDP-BTC': {\n    active: true,\n    buy: false,\n    sell: true,\n    sellPrice: 0.00035,\n    orders: [\n      {\n        amount: 0.0005,\n        spreadBuy: 2,\n        spreadSell: 2\n      },\n      {\n        amount: 0.005,\n        spreadBuy: 4,\n        spreadSell: 4\n      },\n      {\n        amount: 0.05,\n        spreadBuy: 8,\n        spreadSell: 8\n      },\n      {\n        amount: 0.5,\n        spreadBuy: 16,\n        spreadSell: 16\n      },\n    ],\n  },\n}\n"
      ]
    },
    "mtime": 1592905790000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TRADE_ORDER_MINAMOUNTS.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TRADE_ORDER_MINAMOUNTS.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TRADE_ORDER_MINAMOUNTS.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TRADE_ORDER_MINAMOUNTS.js",
      "sourceFileName": "TRADE_ORDER_MINAMOUNTS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TRADE_ORDER_MINAMOUNTS"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  'ETH': 0.0005,\n  'BTC': 0.0005,\n  'NOXON': 0.005,\n  'USDT': 0.005,\n  'SWAP': 0.0005,\n  'XSAT': 0.0005,\n  'HDP': 0.0005,\n  'default': 0.0005 // BTC\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRSQURFX09SREVSX01JTkFNT1VOVFMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBQWU7QUFDYixTQUFRLE1BREs7QUFFYixTQUFPLE1BRk07QUFHYixXQUFTLEtBSEk7QUFJYixVQUFRLEtBSks7QUFLYixVQUFTLE1BTEk7QUFNYixVQUFTLE1BTkk7QUFPYixTQUFRLE1BUEs7QUFRYixhQUFZLE1BUkMsQ0FRTTtBQVJOLEMiLCJmaWxlIjoiVFJBREVfT1JERVJfTUlOQU1PVU5UUy5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L2NvbmZpZy9jb25zdGFudHMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gICdFVEgnOiAgMC4wMDA1LFxuICAnQlRDJzogMC4wMDA1LFxuICAnTk9YT04nOiAwLjAwNSxcbiAgJ1VTRFQnOiAwLjAwNSxcbiAgJ1NXQVAnOiAgMC4wMDA1LFxuICAnWFNBVCc6ICAwLjAwMDUsXG4gICdIRFAnOiAgMC4wMDA1LFxuICAnZGVmYXVsdCcgOiAwLjAwMDUgLy8gQlRDXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TRADE_ORDER_MINAMOUNTS.js"
      ],
      "names": [],
      "mappings": ";;;;;kBAAe;AACb,SAAQ,MADK;AAEb,SAAO,MAFM;AAGb,WAAS,KAHI;AAIb,UAAQ,KAJK;AAKb,UAAS,MALI;AAMb,UAAS,MANI;AAOb,SAAQ,MAPK;AAQb,aAAY,MARC,CAQM;AARN,C",
      "file": "TRADE_ORDER_MINAMOUNTS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "export default {\n  'ETH':  0.0005,\n  'BTC': 0.0005,\n  'NOXON': 0.005,\n  'USDT': 0.005,\n  'SWAP':  0.0005,\n  'XSAT':  0.0005,\n  'HDP':  0.0005,\n  'default' : 0.0005 // BTC\n}\n"
      ]
    },
    "mtime": 1553265780000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/orders.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "createOrder",
            "removeOrder",
            "getItems",
            "removeMyOrders"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createOrder",
              "exported": "createOrder"
            },
            {
              "kind": "local",
              "local": "removeOrder",
              "exported": "removeOrder"
            },
            {
              "kind": "local",
              "local": "getItems",
              "exported": "getItems"
            },
            {
              "kind": "local",
              "local": "removeMyOrders",
              "exported": "removeMyOrders"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/orders.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/orders.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "orders.js",
      "sourceFileName": "orders.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "orders"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst createOrder = exports.createOrder = orders => order => {\n  const created = orders.create(order);\n  return created;\n};\n\nconst removeOrder = exports.removeOrder = orders => order => {\n  if (!order.id) return;\n\n  orders.remove(order.id);\n};\n\nconst getItems = exports.getItems = orders => {\n  return orders.items;\n};\n\nconst removeMyOrders = exports.removeMyOrders = Orders => {\n  getItems(Orders).filter(o => o.isMy && !o.isRequested && !o.isProcessing).map(removeOrder(Orders));\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVycy5qcyJdLCJuYW1lcyI6WyJjcmVhdGVPcmRlciIsIm9yZGVycyIsIm9yZGVyIiwiY3JlYXRlZCIsImNyZWF0ZSIsInJlbW92ZU9yZGVyIiwiaWQiLCJyZW1vdmUiLCJnZXRJdGVtcyIsIml0ZW1zIiwicmVtb3ZlTXlPcmRlcnMiLCJPcmRlcnMiLCJmaWx0ZXIiLCJvIiwiaXNNeSIsImlzUmVxdWVzdGVkIiwiaXNQcm9jZXNzaW5nIiwibWFwIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLG9DQUFjQyxVQUFVQyxTQUFTO0FBQzVDLFFBQU1DLFVBQVVGLE9BQU9HLE1BQVAsQ0FBY0YsS0FBZCxDQUFoQjtBQUNBLFNBQU9DLE9BQVA7QUFDRCxDQUhNOztBQUtBLE1BQU1FLG9DQUFjSixVQUFVQyxTQUFTO0FBQzVDLE1BQUksQ0FBQ0EsTUFBTUksRUFBWCxFQUFlOztBQUVmTCxTQUFPTSxNQUFQLENBQWNMLE1BQU1JLEVBQXBCO0FBQ0QsQ0FKTTs7QUFNQSxNQUFNRSw4QkFBV1AsVUFBVTtBQUNoQyxTQUFPQSxPQUFPUSxLQUFkO0FBQ0QsQ0FGTTs7QUFJQSxNQUFNQywwQ0FBa0JDLE1BQUQsSUFBWTtBQUN4Q0gsV0FBU0csTUFBVCxFQUNHQyxNQURILENBQ1VDLEtBQUtBLEVBQUVDLElBQUYsSUFBVSxDQUFDRCxFQUFFRSxXQUFiLElBQTRCLENBQUNGLEVBQUVHLFlBRDlDLEVBRUdDLEdBRkgsQ0FFT1osWUFBWU0sTUFBWixDQUZQO0FBR0QsQ0FKTSIsImZpbGUiOiJvcmRlcnMuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9jb3JlIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNyZWF0ZU9yZGVyID0gb3JkZXJzID0+IG9yZGVyID0+IHtcbiAgY29uc3QgY3JlYXRlZCA9IG9yZGVycy5jcmVhdGUob3JkZXIpXG4gIHJldHVybiBjcmVhdGVkXG59XG5cbmV4cG9ydCBjb25zdCByZW1vdmVPcmRlciA9IG9yZGVycyA9PiBvcmRlciA9PiB7XG4gIGlmICghb3JkZXIuaWQpIHJldHVyblxuXG4gIG9yZGVycy5yZW1vdmUob3JkZXIuaWQpXG59XG5cbmV4cG9ydCBjb25zdCBnZXRJdGVtcyA9IG9yZGVycyA9PiB7XG4gIHJldHVybiBvcmRlcnMuaXRlbXNcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZU15T3JkZXJzID0gKE9yZGVycykgPT4ge1xuICBnZXRJdGVtcyhPcmRlcnMpXG4gICAgLmZpbHRlcihvID0+IG8uaXNNeSAmJiAhby5pc1JlcXVlc3RlZCAmJiAhby5pc1Byb2Nlc3NpbmcpXG4gICAgLm1hcChyZW1vdmVPcmRlcihPcmRlcnMpKVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "orders.js"
      ],
      "names": [
        "createOrder",
        "orders",
        "order",
        "created",
        "create",
        "removeOrder",
        "id",
        "remove",
        "getItems",
        "items",
        "removeMyOrders",
        "Orders",
        "filter",
        "o",
        "isMy",
        "isRequested",
        "isProcessing",
        "map"
      ],
      "mappings": ";;;;;AAAO,MAAMA,oCAAcC,UAAUC,SAAS;AAC5C,QAAMC,UAAUF,OAAOG,MAAP,CAAcF,KAAd,CAAhB;AACA,SAAOC,OAAP;AACD,CAHM;;AAKA,MAAME,oCAAcJ,UAAUC,SAAS;AAC5C,MAAI,CAACA,MAAMI,EAAX,EAAe;;AAEfL,SAAOM,MAAP,CAAcL,MAAMI,EAApB;AACD,CAJM;;AAMA,MAAME,8BAAWP,UAAU;AAChC,SAAOA,OAAOQ,KAAd;AACD,CAFM;;AAIA,MAAMC,0CAAkBC,MAAD,IAAY;AACxCH,WAASG,MAAT,EACGC,MADH,CACUC,KAAKA,EAAEC,IAAF,IAAU,CAACD,EAAEE,WAAb,IAA4B,CAACF,EAAEG,YAD9C,EAEGC,GAFH,CAEOZ,YAAYM,MAAZ,CAFP;AAGD,CAJM",
      "file": "orders.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "export const createOrder = orders => order => {\n  const created = orders.create(order)\n  return created\n}\n\nexport const removeOrder = orders => order => {\n  if (!order.id) return\n\n  orders.remove(order.id)\n}\n\nexport const getItems = orders => {\n  return orders.items\n}\n\nexport const removeMyOrders = (Orders) => {\n  getItems(Orders)\n    .filter(o => o.isMy && !o.isRequested && !o.isProcessing)\n    .map(removeOrder(Orders))\n}\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/incoming/handleRequest.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/incoming\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../start/beginSwap",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "beginSwap"
              }
            ]
          },
          {
            "source": "../../core/fetchOrder",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fetchOrder"
              }
            ]
          },
          {
            "source": "../../core/replyToRequest",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "replyToRequest"
              }
            ]
          },
          {
            "source": "../../core/checkAddress",
            "imported": [
              "checkParticipantAddress"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "checkParticipantAddress",
                "local": "checkParticipantAddress"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/incoming/handleRequest.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/incoming/handleRequest.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handleRequest.js",
      "sourceFileName": "handleRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/incoming",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/incoming",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handleRequest"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _beginSwap = require('../start/beginSwap');\n\nvar _beginSwap2 = _interopRequireDefault(_beginSwap);\n\nvar _fetchOrder = require('../../core/fetchOrder');\n\nvar _fetchOrder2 = _interopRequireDefault(_fetchOrder);\n\nvar _replyToRequest = require('../../core/replyToRequest');\n\nvar _replyToRequest2 = _interopRequireDefault(_replyToRequest);\n\nvar _checkAddress = require('../../core/checkAddress');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst debug = (0, _debug3.default)('swap.bot');\n\nexports.default = (app, wallet, orders) => (() => {\n  var _ref = _asyncToGenerator(function* ({ orderId, participant }) {\n    debug(`[REQUEST] from ${participant.peer} at order ${orderId}`);\n\n    const order = (0, _fetchOrder2.default)(orders)(orderId);\n\n    if (!order) {\n      return (0, _handleError2.default)(new Error(`not found such order, maybe creator is offline? id: ${orderId}`));\n    }\n\n    const balances = yield wallet.getBalance([order.sellCurrency]);\n    const balance = balances[0].value;\n\n    const participantAddress = order.requests[0].participant.eth.address;\n\n    const isParticipantAddressOkay = yield (0, _checkAddress.checkParticipantAddress)({\n      participantAddress,\n      buyCurrency: order.buyCurrency,\n      buyAmount: order.buyAmount,\n      sellAmount: order.sellAmount\n    });\n\n    const isEnoughBalance = (0, _bignumber2.default)(balance).isGreaterThan(order.sellAmount);\n    const isAccepted = isEnoughBalance && isParticipantAddressOkay;\n\n    debug('handleRequest:', 'bot balance', balance, 'order amount', order.sellAmount.toString());\n\n    if (!isAccepted) {\n      (0, _replyToRequest2.default)(orders)({ orderId, participant }, isAccepted);\n\n      return (0, _handleError2.default)(new Error(`is enough balance: ${isEnoughBalance},\n      is participant address okay: ${isParticipantAddressOkay}`));\n    }\n\n    (0, _replyToRequest2.default)(orders)({ orderId, participant }, isAccepted);\n\n    (0, _beginSwap2.default)(app, order, function (swap) {\n      const { buyAmount, buyCurrency, sellAmount, sellCurrency } = swap;\n      orders.create({ buyAmount, buyCurrency, sellAmount, sellCurrency });\n    });\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZVJlcXVlc3QuanMiXSwibmFtZXMiOlsiZGVidWciLCJhcHAiLCJ3YWxsZXQiLCJvcmRlcnMiLCJvcmRlcklkIiwicGFydGljaXBhbnQiLCJwZWVyIiwib3JkZXIiLCJFcnJvciIsImJhbGFuY2VzIiwiZ2V0QmFsYW5jZSIsInNlbGxDdXJyZW5jeSIsImJhbGFuY2UiLCJ2YWx1ZSIsInBhcnRpY2lwYW50QWRkcmVzcyIsInJlcXVlc3RzIiwiZXRoIiwiYWRkcmVzcyIsImlzUGFydGljaXBhbnRBZGRyZXNzT2theSIsImJ1eUN1cnJlbmN5IiwiYnV5QW1vdW50Iiwic2VsbEFtb3VudCIsImlzRW5vdWdoQmFsYW5jZSIsImlzR3JlYXRlclRoYW4iLCJpc0FjY2VwdGVkIiwidG9TdHJpbmciLCJzd2FwIiwiY3JlYXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBR0EsTUFBTUEsUUFBUSxxQkFBTyxVQUFQLENBQWQ7O2tCQUVlLENBQUNDLEdBQUQsRUFBTUMsTUFBTixFQUFjQyxNQUFkO0FBQUEsK0JBQXlCLFdBQU8sRUFBRUMsT0FBRixFQUFXQyxXQUFYLEVBQVAsRUFBb0M7QUFDMUVMLFVBQU8sa0JBQWlCSyxZQUFZQyxJQUFLLGFBQVlGLE9BQVEsRUFBN0Q7O0FBRUEsVUFBTUcsUUFBUSwwQkFBV0osTUFBWCxFQUFtQkMsT0FBbkIsQ0FBZDs7QUFFQSxRQUFJLENBQUNHLEtBQUwsRUFBWTtBQUNWLGFBQU8sMkJBQVksSUFBSUMsS0FBSixDQUFXLHVEQUFzREosT0FBUSxFQUF6RSxDQUFaLENBQVA7QUFDRDs7QUFFRCxVQUFNSyxXQUFXLE1BQU1QLE9BQU9RLFVBQVAsQ0FBa0IsQ0FBQ0gsTUFBTUksWUFBUCxDQUFsQixDQUF2QjtBQUNBLFVBQU1DLFVBQVVILFNBQVMsQ0FBVCxFQUFZSSxLQUE1Qjs7QUFFQSxVQUFNQyxxQkFBcUJQLE1BQU1RLFFBQU4sQ0FBZSxDQUFmLEVBQWtCVixXQUFsQixDQUE4QlcsR0FBOUIsQ0FBa0NDLE9BQTdEOztBQUVBLFVBQU1DLDJCQUEyQixNQUFNLDJDQUF3QjtBQUM3REosd0JBRDZEO0FBRTdESyxtQkFBYVosTUFBTVksV0FGMEM7QUFHN0RDLGlCQUFXYixNQUFNYSxTQUg0QztBQUk3REMsa0JBQVlkLE1BQU1jO0FBSjJDLEtBQXhCLENBQXZDOztBQU9BLFVBQU1DLGtCQUFrQix5QkFBVVYsT0FBVixFQUFtQlcsYUFBbkIsQ0FBaUNoQixNQUFNYyxVQUF2QyxDQUF4QjtBQUNBLFVBQU1HLGFBQWFGLG1CQUFtQkosd0JBQXRDOztBQUVBbEIsVUFBTSxnQkFBTixFQUF3QixhQUF4QixFQUF1Q1ksT0FBdkMsRUFBZ0QsY0FBaEQsRUFBZ0VMLE1BQU1jLFVBQU4sQ0FBaUJJLFFBQWpCLEVBQWhFOztBQUVBLFFBQUksQ0FBQ0QsVUFBTCxFQUFpQjtBQUNmLG9DQUFlckIsTUFBZixFQUF1QixFQUFFQyxPQUFGLEVBQVdDLFdBQVgsRUFBdkIsRUFBaURtQixVQUFqRDs7QUFFQSxhQUFPLDJCQUFZLElBQUloQixLQUFKLENBQVcsc0JBQXFCYyxlQUFnQjtxQ0FDbENKLHdCQUF5QixFQUR2QyxDQUFaLENBQVA7QUFFRDs7QUFFRCxrQ0FBZWYsTUFBZixFQUF1QixFQUFFQyxPQUFGLEVBQVdDLFdBQVgsRUFBdkIsRUFBaURtQixVQUFqRDs7QUFFQSw2QkFBVXZCLEdBQVYsRUFBZU0sS0FBZixFQUFzQixVQUFDbUIsSUFBRCxFQUFVO0FBQzlCLFlBQU0sRUFBRU4sU0FBRixFQUFhRCxXQUFiLEVBQTBCRSxVQUExQixFQUFzQ1YsWUFBdEMsS0FBdURlLElBQTdEO0FBQ0F2QixhQUFPd0IsTUFBUCxDQUFjLEVBQUVQLFNBQUYsRUFBYUQsV0FBYixFQUEwQkUsVUFBMUIsRUFBc0NWLFlBQXRDLEVBQWQ7QUFDRCxLQUhEO0FBSUQsR0F2Q2M7O0FBQUE7QUFBQTtBQUFBO0FBQUEsSSIsImZpbGUiOiJoYW5kbGVSZXF1ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucy9pbmNvbWluZyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCaWdOdW1iZXIgZnJvbSAnYmlnbnVtYmVyLmpzJ1xuaW1wb3J0IF9kZWJ1ZyBmcm9tICdkZWJ1ZydcblxuaW1wb3J0IGhhbmRsZUVycm9yIGZyb20gJy4uLy4uLy4uL2FwcC9hY3Rpb25zL2Vycm9ycy9oYW5kbGVFcnJvcidcbmltcG9ydCBiZWdpblN3YXAgZnJvbSAnLi4vc3RhcnQvYmVnaW5Td2FwJ1xuXG5pbXBvcnQgZmV0Y2hPcmRlciBmcm9tICcuLi8uLi9jb3JlL2ZldGNoT3JkZXInXG5pbXBvcnQgcmVwbHlUb1JlcXVlc3QgZnJvbSAnLi4vLi4vY29yZS9yZXBseVRvUmVxdWVzdCdcbmltcG9ydCB7IGNoZWNrUGFydGljaXBhbnRBZGRyZXNzIH0gZnJvbSAnLi4vLi4vY29yZS9jaGVja0FkZHJlc3MnXG5cblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3N3YXAuYm90JylcblxuZXhwb3J0IGRlZmF1bHQgKGFwcCwgd2FsbGV0LCBvcmRlcnMpID0+IGFzeW5jICh7IG9yZGVySWQsIHBhcnRpY2lwYW50IH0pID0+IHtcbiAgZGVidWcoYFtSRVFVRVNUXSBmcm9tICR7cGFydGljaXBhbnQucGVlcn0gYXQgb3JkZXIgJHtvcmRlcklkfWApXG5cbiAgY29uc3Qgb3JkZXIgPSBmZXRjaE9yZGVyKG9yZGVycykob3JkZXJJZClcblxuICBpZiAoIW9yZGVyKSB7XG4gICAgcmV0dXJuIGhhbmRsZUVycm9yKG5ldyBFcnJvcihgbm90IGZvdW5kIHN1Y2ggb3JkZXIsIG1heWJlIGNyZWF0b3IgaXMgb2ZmbGluZT8gaWQ6ICR7b3JkZXJJZH1gKSlcbiAgfVxuXG4gIGNvbnN0IGJhbGFuY2VzID0gYXdhaXQgd2FsbGV0LmdldEJhbGFuY2UoW29yZGVyLnNlbGxDdXJyZW5jeV0pXG4gIGNvbnN0IGJhbGFuY2UgPSBiYWxhbmNlc1swXS52YWx1ZVxuXG4gIGNvbnN0IHBhcnRpY2lwYW50QWRkcmVzcyA9IG9yZGVyLnJlcXVlc3RzWzBdLnBhcnRpY2lwYW50LmV0aC5hZGRyZXNzXG5cbiAgY29uc3QgaXNQYXJ0aWNpcGFudEFkZHJlc3NPa2F5ID0gYXdhaXQgY2hlY2tQYXJ0aWNpcGFudEFkZHJlc3Moe1xuICAgIHBhcnRpY2lwYW50QWRkcmVzcyxcbiAgICBidXlDdXJyZW5jeTogb3JkZXIuYnV5Q3VycmVuY3ksXG4gICAgYnV5QW1vdW50OiBvcmRlci5idXlBbW91bnQsXG4gICAgc2VsbEFtb3VudDogb3JkZXIuc2VsbEFtb3VudCxcbiAgfSlcblxuICBjb25zdCBpc0Vub3VnaEJhbGFuY2UgPSBCaWdOdW1iZXIoYmFsYW5jZSkuaXNHcmVhdGVyVGhhbihvcmRlci5zZWxsQW1vdW50KVxuICBjb25zdCBpc0FjY2VwdGVkID0gaXNFbm91Z2hCYWxhbmNlICYmIGlzUGFydGljaXBhbnRBZGRyZXNzT2theVxuXG4gIGRlYnVnKCdoYW5kbGVSZXF1ZXN0OicsICdib3QgYmFsYW5jZScsIGJhbGFuY2UsICdvcmRlciBhbW91bnQnLCBvcmRlci5zZWxsQW1vdW50LnRvU3RyaW5nKCkpXG5cbiAgaWYgKCFpc0FjY2VwdGVkKSB7XG4gICAgcmVwbHlUb1JlcXVlc3Qob3JkZXJzKSh7IG9yZGVySWQsIHBhcnRpY2lwYW50IH0sIGlzQWNjZXB0ZWQpXG5cbiAgICByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKGBpcyBlbm91Z2ggYmFsYW5jZTogJHtpc0Vub3VnaEJhbGFuY2V9LFxuICAgICAgaXMgcGFydGljaXBhbnQgYWRkcmVzcyBva2F5OiAke2lzUGFydGljaXBhbnRBZGRyZXNzT2theX1gKSlcbiAgfVxuXG4gIHJlcGx5VG9SZXF1ZXN0KG9yZGVycykoeyBvcmRlcklkLCBwYXJ0aWNpcGFudCB9LCBpc0FjY2VwdGVkKVxuXG4gIGJlZ2luU3dhcChhcHAsIG9yZGVyLCAoc3dhcCkgPT4ge1xuICAgIGNvbnN0IHsgYnV5QW1vdW50LCBidXlDdXJyZW5jeSwgc2VsbEFtb3VudCwgc2VsbEN1cnJlbmN5IH0gPSBzd2FwXG4gICAgb3JkZXJzLmNyZWF0ZSh7IGJ1eUFtb3VudCwgYnV5Q3VycmVuY3ksIHNlbGxBbW91bnQsIHNlbGxDdXJyZW5jeSB9KVxuICB9KVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handleRequest.js"
      ],
      "names": [
        "debug",
        "app",
        "wallet",
        "orders",
        "orderId",
        "participant",
        "peer",
        "order",
        "Error",
        "balances",
        "getBalance",
        "sellCurrency",
        "balance",
        "value",
        "participantAddress",
        "requests",
        "eth",
        "address",
        "isParticipantAddressOkay",
        "buyCurrency",
        "buyAmount",
        "sellAmount",
        "isEnoughBalance",
        "isGreaterThan",
        "isAccepted",
        "toString",
        "swap",
        "create"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAGA,MAAMA,QAAQ,qBAAO,UAAP,CAAd;;kBAEe,CAACC,GAAD,EAAMC,MAAN,EAAcC,MAAd;AAAA,+BAAyB,WAAO,EAAEC,OAAF,EAAWC,WAAX,EAAP,EAAoC;AAC1EL,UAAO,kBAAiBK,YAAYC,IAAK,aAAYF,OAAQ,EAA7D;;AAEA,UAAMG,QAAQ,0BAAWJ,MAAX,EAAmBC,OAAnB,CAAd;;AAEA,QAAI,CAACG,KAAL,EAAY;AACV,aAAO,2BAAY,IAAIC,KAAJ,CAAW,uDAAsDJ,OAAQ,EAAzE,CAAZ,CAAP;AACD;;AAED,UAAMK,WAAW,MAAMP,OAAOQ,UAAP,CAAkB,CAACH,MAAMI,YAAP,CAAlB,CAAvB;AACA,UAAMC,UAAUH,SAAS,CAAT,EAAYI,KAA5B;;AAEA,UAAMC,qBAAqBP,MAAMQ,QAAN,CAAe,CAAf,EAAkBV,WAAlB,CAA8BW,GAA9B,CAAkCC,OAA7D;;AAEA,UAAMC,2BAA2B,MAAM,2CAAwB;AAC7DJ,wBAD6D;AAE7DK,mBAAaZ,MAAMY,WAF0C;AAG7DC,iBAAWb,MAAMa,SAH4C;AAI7DC,kBAAYd,MAAMc;AAJ2C,KAAxB,CAAvC;;AAOA,UAAMC,kBAAkB,yBAAUV,OAAV,EAAmBW,aAAnB,CAAiChB,MAAMc,UAAvC,CAAxB;AACA,UAAMG,aAAaF,mBAAmBJ,wBAAtC;;AAEAlB,UAAM,gBAAN,EAAwB,aAAxB,EAAuCY,OAAvC,EAAgD,cAAhD,EAAgEL,MAAMc,UAAN,CAAiBI,QAAjB,EAAhE;;AAEA,QAAI,CAACD,UAAL,EAAiB;AACf,oCAAerB,MAAf,EAAuB,EAAEC,OAAF,EAAWC,WAAX,EAAvB,EAAiDmB,UAAjD;;AAEA,aAAO,2BAAY,IAAIhB,KAAJ,CAAW,sBAAqBc,eAAgB;qCAClCJ,wBAAyB,EADvC,CAAZ,CAAP;AAED;;AAED,kCAAef,MAAf,EAAuB,EAAEC,OAAF,EAAWC,WAAX,EAAvB,EAAiDmB,UAAjD;;AAEA,6BAAUvB,GAAV,EAAeM,KAAf,EAAsB,UAACmB,IAAD,EAAU;AAC9B,YAAM,EAAEN,SAAF,EAAaD,WAAb,EAA0BE,UAA1B,EAAsCV,YAAtC,KAAuDe,IAA7D;AACAvB,aAAOwB,MAAP,CAAc,EAAEP,SAAF,EAAaD,WAAb,EAA0BE,UAA1B,EAAsCV,YAAtC,EAAd;AACD,KAHD;AAID,GAvCc;;AAAA;AAAA;AAAA;AAAA,I",
      "file": "handleRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/incoming",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\nimport _debug from 'debug'\n\nimport handleError from '../../../app/actions/errors/handleError'\nimport beginSwap from '../start/beginSwap'\n\nimport fetchOrder from '../../core/fetchOrder'\nimport replyToRequest from '../../core/replyToRequest'\nimport { checkParticipantAddress } from '../../core/checkAddress'\n\n\nconst debug = _debug('swap.bot')\n\nexport default (app, wallet, orders) => async ({ orderId, participant }) => {\n  debug(`[REQUEST] from ${participant.peer} at order ${orderId}`)\n\n  const order = fetchOrder(orders)(orderId)\n\n  if (!order) {\n    return handleError(new Error(`not found such order, maybe creator is offline? id: ${orderId}`))\n  }\n\n  const balances = await wallet.getBalance([order.sellCurrency])\n  const balance = balances[0].value\n\n  const participantAddress = order.requests[0].participant.eth.address\n\n  const isParticipantAddressOkay = await checkParticipantAddress({\n    participantAddress,\n    buyCurrency: order.buyCurrency,\n    buyAmount: order.buyAmount,\n    sellAmount: order.sellAmount,\n  })\n\n  const isEnoughBalance = BigNumber(balance).isGreaterThan(order.sellAmount)\n  const isAccepted = isEnoughBalance && isParticipantAddressOkay\n\n  debug('handleRequest:', 'bot balance', balance, 'order amount', order.sellAmount.toString())\n\n  if (!isAccepted) {\n    replyToRequest(orders)({ orderId, participant }, isAccepted)\n\n    return handleError(new Error(`is enough balance: ${isEnoughBalance},\n      is participant address okay: ${isParticipantAddressOkay}`))\n  }\n\n  replyToRequest(orders)({ orderId, participant }, isAccepted)\n\n  beginSwap(app, order, (swap) => {\n    const { buyAmount, buyCurrency, sellAmount, sellCurrency } = swap\n    orders.create({ buyAmount, buyCurrency, sellAmount, sellCurrency })\n  })\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/fetchOrder.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/fetchOrder.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/fetchOrder.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "fetchOrder.js",
      "sourceFileName": "fetchOrder.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "fetchOrder"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n// swap.app.services.orders\n\nexports.default = orders => id => {\n  return orders.getByKey(id);\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZldGNoT3JkZXIuanMiXSwibmFtZXMiOlsib3JkZXJzIiwiaWQiLCJnZXRCeUtleSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7O2tCQUVlQSxVQUFVQyxNQUFNO0FBQzdCLFNBQU9ELE9BQU9FLFFBQVAsQ0FBZ0JELEVBQWhCLENBQVA7QUFDRCxDIiwiZmlsZSI6ImZldGNoT3JkZXIuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9jb3JlIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyBzd2FwLmFwcC5zZXJ2aWNlcy5vcmRlcnNcblxuZXhwb3J0IGRlZmF1bHQgb3JkZXJzID0+IGlkID0+IHtcbiAgcmV0dXJuIG9yZGVycy5nZXRCeUtleShpZClcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "fetchOrder.js"
      ],
      "names": [
        "orders",
        "id",
        "getByKey"
      ],
      "mappings": ";;;;;;AACA;;kBAEeA,UAAUC,MAAM;AAC7B,SAAOD,OAAOE,QAAP,CAAgBD,EAAhB,CAAP;AACD,C",
      "file": "fetchOrder.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "\n// swap.app.services.orders\n\nexport default orders => id => {\n  return orders.getByKey(id)\n}\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/replyToRequest.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./fetchOrder",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fetchOrder"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/replyToRequest.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/replyToRequest.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "replyToRequest.js",
      "sourceFileName": "replyToRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "replyToRequest"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _fetchOrder = require('./fetchOrder');\n\nvar _fetchOrder2 = _interopRequireDefault(_fetchOrder);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// swap.app.services.orders\n\nexports.default = orders => (request, accepted) => {\n  console.log(new Date().toISOString(), `trying to accept`, request, accepted);\n\n  const { orderId: id, participant: { peer } } = request;\n\n  const order = (0, _fetchOrder2.default)(orders)(id);\n\n  if (accepted) {\n    order.acceptRequest(peer);\n  } else {\n    order.declineRequest(peer);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcGx5VG9SZXF1ZXN0LmpzIl0sIm5hbWVzIjpbIm9yZGVycyIsInJlcXVlc3QiLCJhY2NlcHRlZCIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJvcmRlcklkIiwiaWQiLCJwYXJ0aWNpcGFudCIsInBlZXIiLCJvcmRlciIsImFjY2VwdFJlcXVlc3QiLCJkZWNsaW5lUmVxdWVzdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7OztBQUVBOztrQkFFZ0JBLE1BQUQsSUFBWSxDQUFDQyxPQUFELEVBQVVDLFFBQVYsS0FBdUI7QUFDaERDLFVBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxrQkFBdkMsRUFBMERMLE9BQTFELEVBQW1FQyxRQUFuRTs7QUFFQSxRQUFNLEVBQUVLLFNBQVNDLEVBQVgsRUFBZUMsYUFBYSxFQUFFQyxJQUFGLEVBQTVCLEtBQXlDVCxPQUEvQzs7QUFFQSxRQUFNVSxRQUFRLDBCQUFXWCxNQUFYLEVBQW1CUSxFQUFuQixDQUFkOztBQUVBLE1BQUlOLFFBQUosRUFBYztBQUNaUyxVQUFNQyxhQUFOLENBQW9CRixJQUFwQjtBQUNELEdBRkQsTUFFTztBQUNMQyxVQUFNRSxjQUFOLENBQXFCSCxJQUFyQjtBQUNEO0FBQ0YsQyIsImZpbGUiOiJyZXBseVRvUmVxdWVzdC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L21pY3JvYm90L2NvcmUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2hPcmRlciBmcm9tICcuL2ZldGNoT3JkZXInXG5cbi8vIHN3YXAuYXBwLnNlcnZpY2VzLm9yZGVyc1xuXG5leHBvcnQgZGVmYXVsdCAob3JkZXJzKSA9PiAocmVxdWVzdCwgYWNjZXB0ZWQpID0+IHtcbiAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgdHJ5aW5nIHRvIGFjY2VwdGAsIHJlcXVlc3QsIGFjY2VwdGVkKVxuXG4gIGNvbnN0IHsgb3JkZXJJZDogaWQsIHBhcnRpY2lwYW50OiB7IHBlZXIgfSB9ID0gcmVxdWVzdFxuXG4gIGNvbnN0IG9yZGVyID0gZmV0Y2hPcmRlcihvcmRlcnMpKGlkKVxuXG4gIGlmIChhY2NlcHRlZCkge1xuICAgIG9yZGVyLmFjY2VwdFJlcXVlc3QocGVlcilcbiAgfSBlbHNlIHtcbiAgICBvcmRlci5kZWNsaW5lUmVxdWVzdChwZWVyKVxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "replyToRequest.js"
      ],
      "names": [
        "orders",
        "request",
        "accepted",
        "console",
        "log",
        "Date",
        "toISOString",
        "orderId",
        "id",
        "participant",
        "peer",
        "order",
        "acceptRequest",
        "declineRequest"
      ],
      "mappings": ";;;;;;AAAA;;;;;;AAEA;;kBAEgBA,MAAD,IAAY,CAACC,OAAD,EAAUC,QAAV,KAAuB;AAChDC,UAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,kBAAvC,EAA0DL,OAA1D,EAAmEC,QAAnE;;AAEA,QAAM,EAAEK,SAASC,EAAX,EAAeC,aAAa,EAAEC,IAAF,EAA5B,KAAyCT,OAA/C;;AAEA,QAAMU,QAAQ,0BAAWX,MAAX,EAAmBQ,EAAnB,CAAd;;AAEA,MAAIN,QAAJ,EAAc;AACZS,UAAMC,aAAN,CAAoBF,IAApB;AACD,GAFD,MAEO;AACLC,UAAME,cAAN,CAAqBH,IAArB;AACD;AACF,C",
      "file": "replyToRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "import fetchOrder from './fetchOrder'\n\n// swap.app.services.orders\n\nexport default (orders) => (request, accepted) => {\n  console.log(new Date().toISOString(), `trying to accept`, request, accepted)\n\n  const { orderId: id, participant: { peer } } = request\n\n  const order = fetchOrder(orders)(id)\n\n  if (accepted) {\n    order.acceptRequest(peer)\n  } else {\n    order.declineRequest(peer)\n  }\n}\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/checkAddress.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "request-promise-cache",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "request"
              }
            ]
          },
          {
            "source": "debug",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_debug"
              }
            ]
          },
          {
            "source": "../../config/constants/TRADE_CONFIG",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_CONFIG"
              }
            ]
          },
          {
            "source": "../../config/constants/TRADE_LIMITS",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "TRADE_LIMITS"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "checkParticipantAddress"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "checkParticipantAddress",
              "exported": "checkParticipantAddress"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/checkAddress.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/checkAddress.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "checkAddress.js",
      "sourceFileName": "checkAddress.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "checkAddress"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.checkParticipantAddress = undefined;\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _requestPromiseCache = require('request-promise-cache');\n\nvar _requestPromiseCache2 = _interopRequireDefault(_requestPromiseCache);\n\nvar _debug2 = require('debug');\n\nvar _debug3 = _interopRequireDefault(_debug2);\n\nvar _TRADE_CONFIG = require('../../config/constants/TRADE_CONFIG');\n\nvar _TRADE_CONFIG2 = _interopRequireDefault(_TRADE_CONFIG);\n\nvar _TRADE_LIMITS = require('../../config/constants/TRADE_LIMITS');\n\nvar _TRADE_LIMITS2 = _interopRequireDefault(_TRADE_LIMITS);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst CHECK_SWAP_API = 'https://noxon.io/swapantisliv/checkSwapSellerAddress.php';\n\nconst debug = (0, _debug3.default)('swap.bot');\n\n/**\n *\n * @param {object} options\n * @param {string} options.participantAddress\n * @param {string} options.buyCurrency\n * @param {string} options.buyAmount\n * @param {string} options.sellAmount\n * @returns {Promise.<boolean>}\n */\nconst checkParticipantAddress = exports.checkParticipantAddress = options => {\n  const { buyCurrency } = options;\n\n  switch (buyCurrency) {\n    case 'SWAP':\n      return checkSWAP(options);\n    default:\n      return true;\n  }\n};\n\n/**\n *\n * @param {object} options\n * @param {string} options.participantAddress\n * @param {string} options.sellAmount\n * @returns {Promise.<boolean>}\n */\nconst checkSWAP = options => {\n  const { buyAmount, sellAmount, participantAddress } = options;\n\n  const amountWithTheSmallestSpread = _TRADE_CONFIG2.default['SWAP-BTC'].orders.sort((prev, next) => prev.spreadBuy > next.spreadBuy)[0].amount;\n\n  if ((0, _bignumber2.default)(sellAmount).isGreaterThan(amountWithTheSmallestSpread)) {\n    return true;\n  }\n  if (participantAddress == \"0x51748D982C21f0C8f4e3752d9F1DF48b6C8750A7\") return false;\n  if (participantAddress == \"0x141f18432eb50b8203f11cdf12a7ca86a41dacae\") return false;\n  return true;\n\n  return (0, _requestPromiseCache2.default)(`${CHECK_SWAP_API}?addr=${participantAddress}`).then(json => JSON.parse(json)).then(data => {\n    const tradeLimit = _TRADE_LIMITS2.default.swap;\n    const soldAmount = data.alreadySoldTokensAmount;\n    const areTokensNotFromUs = !data.recivedTokenFromUs;\n\n    const isBuyAmountGreaterThanLimit = (0, _bignumber2.default)(buyAmount).isGreaterThan(tradeLimit);\n    const isLimitExceeded = (0, _bignumber2.default)(soldAmount).isGreaterThan(tradeLimit);\n    const canAcceptRequest = !(areTokensNotFromUs || isLimitExceeded || isBuyAmountGreaterThanLimit);\n\n    if (areTokensNotFromUs) {\n      debug('checkSWAP:', 'tokens are not from us');\n    }\n    if (isLimitExceeded) {\n      debug('checkSWAP:', `trade limit is exceeded. Limit: ${tradeLimit} Sold: ${soldAmount}`);\n    }\n    if (isBuyAmountGreaterThanLimit) {\n      debug('checkSWAP:', `buy amount is greater than limit. Limit: ${tradeLimit} Buy amount: ${buyAmount}`);\n    }\n\n    return canAcceptRequest;\n  }).catch(error => {\n    debug('checkSWAP:', 'error requst for CHECK_SWAP_API', error);\n\n    return false;\n  });\n};\n\nexports.default = {\n  checkParticipantAddress\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrQWRkcmVzcy5qcyJdLCJuYW1lcyI6WyJDSEVDS19TV0FQX0FQSSIsImRlYnVnIiwiY2hlY2tQYXJ0aWNpcGFudEFkZHJlc3MiLCJvcHRpb25zIiwiYnV5Q3VycmVuY3kiLCJjaGVja1NXQVAiLCJidXlBbW91bnQiLCJzZWxsQW1vdW50IiwicGFydGljaXBhbnRBZGRyZXNzIiwiYW1vdW50V2l0aFRoZVNtYWxsZXN0U3ByZWFkIiwiVFJBREVfQ09ORklHIiwib3JkZXJzIiwic29ydCIsInByZXYiLCJuZXh0Iiwic3ByZWFkQnV5IiwiYW1vdW50IiwiaXNHcmVhdGVyVGhhbiIsInRoZW4iLCJqc29uIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInRyYWRlTGltaXQiLCJUUkFERV9MSU1JVFMiLCJzd2FwIiwic29sZEFtb3VudCIsImFscmVhZHlTb2xkVG9rZW5zQW1vdW50IiwiYXJlVG9rZW5zTm90RnJvbVVzIiwicmVjaXZlZFRva2VuRnJvbVVzIiwiaXNCdXlBbW91bnRHcmVhdGVyVGhhbkxpbWl0IiwiaXNMaW1pdEV4Y2VlZGVkIiwiY2FuQWNjZXB0UmVxdWVzdCIsImNhdGNoIiwiZXJyb3IiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFFQTs7OztBQUNBOzs7Ozs7QUFHQSxNQUFNQSxpQkFBaUIsMERBQXZCOztBQUVBLE1BQU1DLFFBQVEscUJBQU8sVUFBUCxDQUFkOztBQUVBOzs7Ozs7Ozs7QUFTTyxNQUFNQyw0REFBMkJDLE9BQUQsSUFBYTtBQUNsRCxRQUFNLEVBQUVDLFdBQUYsS0FBa0JELE9BQXhCOztBQUVBLFVBQVFDLFdBQVI7QUFDRSxTQUFLLE1BQUw7QUFDRSxhQUFPQyxVQUFVRixPQUFWLENBQVA7QUFDRjtBQUNFLGFBQU8sSUFBUDtBQUpKO0FBTUQsQ0FUTTs7QUFXUDs7Ozs7OztBQU9BLE1BQU1FLFlBQWFGLE9BQUQsSUFBYTtBQUM3QixRQUFNLEVBQUVHLFNBQUYsRUFBYUMsVUFBYixFQUF5QkMsa0JBQXpCLEtBQWdETCxPQUF0RDs7QUFFQSxRQUFNTSw4QkFBOEJDLHVCQUFhLFVBQWIsRUFBeUJDLE1BQXpCLENBQWdDQyxJQUFoQyxDQUFxQyxDQUFDQyxJQUFELEVBQU9DLElBQVAsS0FDdkVELEtBQUtFLFNBQUwsR0FBaUJELEtBQUtDLFNBRFksRUFFbEMsQ0FGa0MsRUFFL0JDLE1BRkw7O0FBSUEsTUFBSSx5QkFBVVQsVUFBVixFQUFzQlUsYUFBdEIsQ0FBb0NSLDJCQUFwQyxDQUFKLEVBQXNFO0FBQ3BFLFdBQU8sSUFBUDtBQUNEO0FBQ0QsTUFBSUQsc0JBQXNCLDRDQUExQixFQUF3RSxPQUFPLEtBQVA7QUFDeEUsTUFBSUEsc0JBQXNCLDRDQUExQixFQUF3RSxPQUFPLEtBQVA7QUFDeEUsU0FBTyxJQUFQOztBQUVBLFNBQU8sbUNBQVMsR0FBRVIsY0FBZSxTQUFRUSxrQkFBbUIsRUFBckQsRUFDSlUsSUFESSxDQUNDQyxRQUFRQyxLQUFLQyxLQUFMLENBQVdGLElBQVgsQ0FEVCxFQUVKRCxJQUZJLENBRUNJLFFBQVE7QUFDWixVQUFNQyxhQUFhQyx1QkFBYUMsSUFBaEM7QUFDQSxVQUFNQyxhQUFhSixLQUFLSyx1QkFBeEI7QUFDQSxVQUFNQyxxQkFBcUIsQ0FBQ04sS0FBS08sa0JBQWpDOztBQUVBLFVBQU1DLDhCQUE4Qix5QkFBVXhCLFNBQVYsRUFBcUJXLGFBQXJCLENBQW1DTSxVQUFuQyxDQUFwQztBQUNBLFVBQU1RLGtCQUFrQix5QkFBVUwsVUFBVixFQUFzQlQsYUFBdEIsQ0FBb0NNLFVBQXBDLENBQXhCO0FBQ0EsVUFBTVMsbUJBQW1CLEVBQUVKLHNCQUFzQkcsZUFBdEIsSUFBeUNELDJCQUEzQyxDQUF6Qjs7QUFFQSxRQUFJRixrQkFBSixFQUF3QjtBQUN0QjNCLFlBQU0sWUFBTixFQUFvQix3QkFBcEI7QUFDRDtBQUNELFFBQUk4QixlQUFKLEVBQXFCO0FBQ25COUIsWUFBTSxZQUFOLEVBQXFCLG1DQUFrQ3NCLFVBQVcsVUFBU0csVUFBVyxFQUF0RjtBQUNEO0FBQ0QsUUFBSUksMkJBQUosRUFBaUM7QUFDL0I3QixZQUFNLFlBQU4sRUFBcUIsNENBQTJDc0IsVUFBVyxnQkFBZWpCLFNBQVUsRUFBcEc7QUFDRDs7QUFFRCxXQUFPMEIsZ0JBQVA7QUFDRCxHQXRCSSxFQXVCSkMsS0F2QkksQ0F1QkVDLFNBQVM7QUFDZGpDLFVBQU0sWUFBTixFQUFvQixpQ0FBcEIsRUFBdURpQyxLQUF2RDs7QUFFQSxXQUFPLEtBQVA7QUFDRCxHQTNCSSxDQUFQO0FBNEJELENBMUNEOztrQkE2Q2U7QUFDYmhDO0FBRGEsQyIsImZpbGUiOiJjaGVja0FkZHJlc3MuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9taWNyb2JvdC9jb3JlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpZ051bWJlciBmcm9tICdiaWdudW1iZXIuanMnXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdyZXF1ZXN0LXByb21pc2UtY2FjaGUnXG5pbXBvcnQgX2RlYnVnIGZyb20gJ2RlYnVnJ1xuXG5pbXBvcnQgVFJBREVfQ09ORklHIGZyb20gJy4uLy4uL2NvbmZpZy9jb25zdGFudHMvVFJBREVfQ09ORklHJ1xuaW1wb3J0IFRSQURFX0xJTUlUUyBmcm9tICcuLi8uLi9jb25maWcvY29uc3RhbnRzL1RSQURFX0xJTUlUUydcblxuXG5jb25zdCBDSEVDS19TV0FQX0FQSSA9ICdodHRwczovL25veG9uLmlvL3N3YXBhbnRpc2xpdi9jaGVja1N3YXBTZWxsZXJBZGRyZXNzLnBocCdcblxuY29uc3QgZGVidWcgPSBfZGVidWcoJ3N3YXAuYm90JylcblxuLyoqXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnBhcnRpY2lwYW50QWRkcmVzc1xuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuYnV5Q3VycmVuY3lcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmJ1eUFtb3VudFxuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuc2VsbEFtb3VudFxuICogQHJldHVybnMge1Byb21pc2UuPGJvb2xlYW4+fVxuICovXG5leHBvcnQgY29uc3QgY2hlY2tQYXJ0aWNpcGFudEFkZHJlc3MgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCB7IGJ1eUN1cnJlbmN5IH0gPSBvcHRpb25zXG5cbiAgc3dpdGNoIChidXlDdXJyZW5jeSkge1xuICAgIGNhc2UgJ1NXQVAnOlxuICAgICAgcmV0dXJuIGNoZWNrU1dBUChvcHRpb25zKVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdHJ1ZVxuICB9XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5wYXJ0aWNpcGFudEFkZHJlc3NcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnNlbGxBbW91bnRcbiAqIEByZXR1cm5zIHtQcm9taXNlLjxib29sZWFuPn1cbiAqL1xuY29uc3QgY2hlY2tTV0FQID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgeyBidXlBbW91bnQsIHNlbGxBbW91bnQsIHBhcnRpY2lwYW50QWRkcmVzcyB9ID0gb3B0aW9uc1xuXG4gIGNvbnN0IGFtb3VudFdpdGhUaGVTbWFsbGVzdFNwcmVhZCA9IFRSQURFX0NPTkZJR1snU1dBUC1CVEMnXS5vcmRlcnMuc29ydCgocHJldiwgbmV4dCkgPT5cbiAgICBwcmV2LnNwcmVhZEJ1eSA+IG5leHQuc3ByZWFkQnV5XG4gIClbMF0uYW1vdW50XG5cbiAgaWYgKEJpZ051bWJlcihzZWxsQW1vdW50KS5pc0dyZWF0ZXJUaGFuKGFtb3VudFdpdGhUaGVTbWFsbGVzdFNwcmVhZCkpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIGlmIChwYXJ0aWNpcGFudEFkZHJlc3MgPT0gXCIweDUxNzQ4RDk4MkMyMWYwQzhmNGUzNzUyZDlGMURGNDhiNkM4NzUwQTdcIikgcmV0dXJuIGZhbHNlO1xuICBpZiAocGFydGljaXBhbnRBZGRyZXNzID09IFwiMHgxNDFmMTg0MzJlYjUwYjgyMDNmMTFjZGYxMmE3Y2E4NmE0MWRhY2FlXCIpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG4gIFxuICByZXR1cm4gcmVxdWVzdChgJHtDSEVDS19TV0FQX0FQSX0/YWRkcj0ke3BhcnRpY2lwYW50QWRkcmVzc31gKVxuICAgIC50aGVuKGpzb24gPT4gSlNPTi5wYXJzZShqc29uKSlcbiAgICAudGhlbihkYXRhID0+IHtcbiAgICAgIGNvbnN0IHRyYWRlTGltaXQgPSBUUkFERV9MSU1JVFMuc3dhcFxuICAgICAgY29uc3Qgc29sZEFtb3VudCA9IGRhdGEuYWxyZWFkeVNvbGRUb2tlbnNBbW91bnRcbiAgICAgIGNvbnN0IGFyZVRva2Vuc05vdEZyb21VcyA9ICFkYXRhLnJlY2l2ZWRUb2tlbkZyb21Vc1xuICAgICAgXG4gICAgICBjb25zdCBpc0J1eUFtb3VudEdyZWF0ZXJUaGFuTGltaXQgPSBCaWdOdW1iZXIoYnV5QW1vdW50KS5pc0dyZWF0ZXJUaGFuKHRyYWRlTGltaXQpXG4gICAgICBjb25zdCBpc0xpbWl0RXhjZWVkZWQgPSBCaWdOdW1iZXIoc29sZEFtb3VudCkuaXNHcmVhdGVyVGhhbih0cmFkZUxpbWl0KVxuICAgICAgY29uc3QgY2FuQWNjZXB0UmVxdWVzdCA9ICEoYXJlVG9rZW5zTm90RnJvbVVzIHx8IGlzTGltaXRFeGNlZWRlZCB8fCBpc0J1eUFtb3VudEdyZWF0ZXJUaGFuTGltaXQpXG5cbiAgICAgIGlmIChhcmVUb2tlbnNOb3RGcm9tVXMpIHtcbiAgICAgICAgZGVidWcoJ2NoZWNrU1dBUDonLCAndG9rZW5zIGFyZSBub3QgZnJvbSB1cycpXG4gICAgICB9XG4gICAgICBpZiAoaXNMaW1pdEV4Y2VlZGVkKSB7XG4gICAgICAgIGRlYnVnKCdjaGVja1NXQVA6JywgYHRyYWRlIGxpbWl0IGlzIGV4Y2VlZGVkLiBMaW1pdDogJHt0cmFkZUxpbWl0fSBTb2xkOiAke3NvbGRBbW91bnR9YClcbiAgICAgIH1cbiAgICAgIGlmIChpc0J1eUFtb3VudEdyZWF0ZXJUaGFuTGltaXQpIHtcbiAgICAgICAgZGVidWcoJ2NoZWNrU1dBUDonLCBgYnV5IGFtb3VudCBpcyBncmVhdGVyIHRoYW4gbGltaXQuIExpbWl0OiAke3RyYWRlTGltaXR9IEJ1eSBhbW91bnQ6ICR7YnV5QW1vdW50fWApXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjYW5BY2NlcHRSZXF1ZXN0XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgZGVidWcoJ2NoZWNrU1dBUDonLCAnZXJyb3IgcmVxdXN0IGZvciBDSEVDS19TV0FQX0FQSScsIGVycm9yKVxuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgY2hlY2tQYXJ0aWNpcGFudEFkZHJlc3MsXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "checkAddress.js"
      ],
      "names": [
        "CHECK_SWAP_API",
        "debug",
        "checkParticipantAddress",
        "options",
        "buyCurrency",
        "checkSWAP",
        "buyAmount",
        "sellAmount",
        "participantAddress",
        "amountWithTheSmallestSpread",
        "TRADE_CONFIG",
        "orders",
        "sort",
        "prev",
        "next",
        "spreadBuy",
        "amount",
        "isGreaterThan",
        "then",
        "json",
        "JSON",
        "parse",
        "data",
        "tradeLimit",
        "TRADE_LIMITS",
        "swap",
        "soldAmount",
        "alreadySoldTokensAmount",
        "areTokensNotFromUs",
        "recivedTokenFromUs",
        "isBuyAmountGreaterThanLimit",
        "isLimitExceeded",
        "canAcceptRequest",
        "catch",
        "error"
      ],
      "mappings": ";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAGA,MAAMA,iBAAiB,0DAAvB;;AAEA,MAAMC,QAAQ,qBAAO,UAAP,CAAd;;AAEA;;;;;;;;;AASO,MAAMC,4DAA2BC,OAAD,IAAa;AAClD,QAAM,EAAEC,WAAF,KAAkBD,OAAxB;;AAEA,UAAQC,WAAR;AACE,SAAK,MAAL;AACE,aAAOC,UAAUF,OAAV,CAAP;AACF;AACE,aAAO,IAAP;AAJJ;AAMD,CATM;;AAWP;;;;;;;AAOA,MAAME,YAAaF,OAAD,IAAa;AAC7B,QAAM,EAAEG,SAAF,EAAaC,UAAb,EAAyBC,kBAAzB,KAAgDL,OAAtD;;AAEA,QAAMM,8BAA8BC,uBAAa,UAAb,EAAyBC,MAAzB,CAAgCC,IAAhC,CAAqC,CAACC,IAAD,EAAOC,IAAP,KACvED,KAAKE,SAAL,GAAiBD,KAAKC,SADY,EAElC,CAFkC,EAE/BC,MAFL;;AAIA,MAAI,yBAAUT,UAAV,EAAsBU,aAAtB,CAAoCR,2BAApC,CAAJ,EAAsE;AACpE,WAAO,IAAP;AACD;AACD,MAAID,sBAAsB,4CAA1B,EAAwE,OAAO,KAAP;AACxE,MAAIA,sBAAsB,4CAA1B,EAAwE,OAAO,KAAP;AACxE,SAAO,IAAP;;AAEA,SAAO,mCAAS,GAAER,cAAe,SAAQQ,kBAAmB,EAArD,EACJU,IADI,CACCC,QAAQC,KAAKC,KAAL,CAAWF,IAAX,CADT,EAEJD,IAFI,CAECI,QAAQ;AACZ,UAAMC,aAAaC,uBAAaC,IAAhC;AACA,UAAMC,aAAaJ,KAAKK,uBAAxB;AACA,UAAMC,qBAAqB,CAACN,KAAKO,kBAAjC;;AAEA,UAAMC,8BAA8B,yBAAUxB,SAAV,EAAqBW,aAArB,CAAmCM,UAAnC,CAApC;AACA,UAAMQ,kBAAkB,yBAAUL,UAAV,EAAsBT,aAAtB,CAAoCM,UAApC,CAAxB;AACA,UAAMS,mBAAmB,EAAEJ,sBAAsBG,eAAtB,IAAyCD,2BAA3C,CAAzB;;AAEA,QAAIF,kBAAJ,EAAwB;AACtB3B,YAAM,YAAN,EAAoB,wBAApB;AACD;AACD,QAAI8B,eAAJ,EAAqB;AACnB9B,YAAM,YAAN,EAAqB,mCAAkCsB,UAAW,UAASG,UAAW,EAAtF;AACD;AACD,QAAII,2BAAJ,EAAiC;AAC/B7B,YAAM,YAAN,EAAqB,4CAA2CsB,UAAW,gBAAejB,SAAU,EAApG;AACD;;AAED,WAAO0B,gBAAP;AACD,GAtBI,EAuBJC,KAvBI,CAuBEC,SAAS;AACdjC,UAAM,YAAN,EAAoB,iCAApB,EAAuDiC,KAAvD;;AAEA,WAAO,KAAP;AACD,GA3BI,CAAP;AA4BD,CA1CD;;kBA6Ce;AACbhC;AADa,C",
      "file": "checkAddress.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\nimport request from 'request-promise-cache'\nimport _debug from 'debug'\n\nimport TRADE_CONFIG from '../../config/constants/TRADE_CONFIG'\nimport TRADE_LIMITS from '../../config/constants/TRADE_LIMITS'\n\n\nconst CHECK_SWAP_API = 'https://noxon.io/swapantisliv/checkSwapSellerAddress.php'\n\nconst debug = _debug('swap.bot')\n\n/**\n *\n * @param {object} options\n * @param {string} options.participantAddress\n * @param {string} options.buyCurrency\n * @param {string} options.buyAmount\n * @param {string} options.sellAmount\n * @returns {Promise.<boolean>}\n */\nexport const checkParticipantAddress = (options) => {\n  const { buyCurrency } = options\n\n  switch (buyCurrency) {\n    case 'SWAP':\n      return checkSWAP(options)\n    default:\n      return true\n  }\n}\n\n/**\n *\n * @param {object} options\n * @param {string} options.participantAddress\n * @param {string} options.sellAmount\n * @returns {Promise.<boolean>}\n */\nconst checkSWAP = (options) => {\n  const { buyAmount, sellAmount, participantAddress } = options\n\n  const amountWithTheSmallestSpread = TRADE_CONFIG['SWAP-BTC'].orders.sort((prev, next) =>\n    prev.spreadBuy > next.spreadBuy\n  )[0].amount\n\n  if (BigNumber(sellAmount).isGreaterThan(amountWithTheSmallestSpread)) {\n    return true\n  }\n  if (participantAddress == \"0x51748D982C21f0C8f4e3752d9F1DF48b6C8750A7\") return false;\n  if (participantAddress == \"0x141f18432eb50b8203f11cdf12a7ca86a41dacae\") return false;\n  return true;\n  \n  return request(`${CHECK_SWAP_API}?addr=${participantAddress}`)\n    .then(json => JSON.parse(json))\n    .then(data => {\n      const tradeLimit = TRADE_LIMITS.swap\n      const soldAmount = data.alreadySoldTokensAmount\n      const areTokensNotFromUs = !data.recivedTokenFromUs\n      \n      const isBuyAmountGreaterThanLimit = BigNumber(buyAmount).isGreaterThan(tradeLimit)\n      const isLimitExceeded = BigNumber(soldAmount).isGreaterThan(tradeLimit)\n      const canAcceptRequest = !(areTokensNotFromUs || isLimitExceeded || isBuyAmountGreaterThanLimit)\n\n      if (areTokensNotFromUs) {\n        debug('checkSWAP:', 'tokens are not from us')\n      }\n      if (isLimitExceeded) {\n        debug('checkSWAP:', `trade limit is exceeded. Limit: ${tradeLimit} Sold: ${soldAmount}`)\n      }\n      if (isBuyAmountGreaterThanLimit) {\n        debug('checkSWAP:', `buy amount is greater than limit. Limit: ${tradeLimit} Buy amount: ${buyAmount}`)\n      }\n\n      return canAcceptRequest\n    })\n    .catch(error => {\n      debug('checkSWAP:', 'error requst for CHECK_SWAP_API', error)\n\n      return false\n    })\n}\n\n\nexport default {\n  checkParticipantAddress,\n}\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TRADE_LIMITS.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TRADE_LIMITS.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TRADE_LIMITS.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TRADE_LIMITS.js",
      "sourceFileName": "TRADE_LIMITS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TRADE_LIMITS"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  swap: 1\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRSQURFX0xJTUlUUy5qcyJdLCJuYW1lcyI6WyJzd2FwIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFBZTtBQUNiQSxRQUFNO0FBRE8sQyIsImZpbGUiOiJUUkFERV9MSU1JVFMuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9jb25maWcvY29uc3RhbnRzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBzd2FwOiAxLFxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TRADE_LIMITS.js"
      ],
      "names": [
        "swap"
      ],
      "mappings": ";;;;;kBAAe;AACbA,QAAM;AADO,C",
      "file": "TRADE_LIMITS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "export default {\n  swap: 1,\n}\n"
      ]
    },
    "mtime": 1553589900000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/outcoming/handleOrder.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/outcoming\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "bignumber.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "BigNumber"
              }
            ]
          },
          {
            "source": "../../../app/actions/fetchPrice",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "fetchPrice"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../../Pair",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Pair"
              }
            ]
          },
          {
            "source": "./doRequest",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "proceed"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/outcoming/handleOrder.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/outcoming/handleOrder.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handleOrder.js",
      "sourceFileName": "handleOrder.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handleOrder"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bignumber = require('bignumber.js');\n\nvar _bignumber2 = _interopRequireDefault(_bignumber);\n\nvar _fetchPrice = require('../../../app/actions/fetchPrice');\n\nvar _fetchPrice2 = _interopRequireDefault(_fetchPrice);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _Pair = require('../../Pair');\n\nvar _Pair2 = _interopRequireDefault(_Pair);\n\nvar _doRequest = require('./doRequest');\n\nvar _doRequest2 = _interopRequireDefault(_doRequest);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = (app, orders) => (() => {\n  var _ref = _asyncToGenerator(function* (order) {\n    console.log(new Date().toISOString(), `new order ${order.id}`);\n    if (order.isMy) return;\n\n    // turn off autorequest\n    // return\n\n    const fee = (0, _bignumber2.default)(0.01);\n\n    let pair;\n    try {\n      pair = _Pair2.default.fromOrder(order);\n\n      console.log(new Date().toISOString(), `[ORDER] my=${order.isMy ? 1 : 0}, ${pair}`);\n    } catch (err) {\n      return false;\n    }\n\n    let marketPrice;\n    try {\n      marketPrice = yield (0, _fetchPrice2.default)(pair);\n    } catch (err) {\n      (0, _handleError2.default)(err);\n    }\n\n    console.log(new Date().toISOString(), `[PRICE] market: ${marketPrice}`);\n    console.log(new Date().toISOString(), `${pair} ${pair.price.minus(fee)} ${marketPrice}`);\n\n    const _ok = pair.isBid() && pair.price.minus(fee).isGreaterThan(marketPrice) || pair.isAsk() && pair.price.plus(fee).isLessThan(marketPrice);\n\n    console.log(new Date().toISOString(), 'ok', _ok);\n    if (_ok) (0, _doRequest2.default)(app, orders)(order);\n\n    // if not, just ignore\n    // TODO mark this order so we don't touch it for a while\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZU9yZGVyLmpzIl0sIm5hbWVzIjpbImFwcCIsIm9yZGVycyIsIm9yZGVyIiwiY29uc29sZSIsImxvZyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlkIiwiaXNNeSIsImZlZSIsInBhaXIiLCJQYWlyIiwiZnJvbU9yZGVyIiwiZXJyIiwibWFya2V0UHJpY2UiLCJwcmljZSIsIm1pbnVzIiwiX29rIiwiaXNCaWQiLCJpc0dyZWF0ZXJUaGFuIiwiaXNBc2siLCJwbHVzIiwiaXNMZXNzVGhhbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFFQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFFQTs7Ozs7Ozs7a0JBRWUsQ0FBQ0EsR0FBRCxFQUFNQyxNQUFOO0FBQUEsK0JBQWlCLFdBQU9DLEtBQVAsRUFBaUI7QUFDL0NDLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxhQUFZSixNQUFNSyxFQUFHLEVBQTVEO0FBQ0EsUUFBSUwsTUFBTU0sSUFBVixFQUFnQjs7QUFFaEI7QUFDQTs7QUFFQSxVQUFNQyxNQUFNLHlCQUFVLElBQVYsQ0FBWjs7QUFFQSxRQUFJQyxJQUFKO0FBQ0EsUUFBSTtBQUNGQSxhQUFPQyxlQUFLQyxTQUFMLENBQWVWLEtBQWYsQ0FBUDs7QUFFQUMsY0FBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXVDLGNBQWFKLE1BQU1NLElBQU4sR0FBYSxDQUFiLEdBQWlCLENBQUUsS0FBSUUsSUFBSyxFQUFoRjtBQUNELEtBSkQsQ0FJRSxPQUFPRyxHQUFQLEVBQVk7QUFDWixhQUFPLEtBQVA7QUFDRDs7QUFFRCxRQUFJQyxXQUFKO0FBQ0EsUUFBSTtBQUNGQSxvQkFBYyxNQUFNLDBCQUFXSixJQUFYLENBQXBCO0FBQ0QsS0FGRCxDQUVFLE9BQU9HLEdBQVAsRUFBWTtBQUNaLGlDQUFZQSxHQUFaO0FBQ0Q7O0FBRURWLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUF1QyxtQkFBa0JRLFdBQVksRUFBckU7QUFDQVgsWUFBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXVDLEdBQUVJLElBQUssSUFBR0EsS0FBS0ssS0FBTCxDQUFXQyxLQUFYLENBQWlCUCxHQUFqQixDQUFzQixJQUFJSyxXQUFhLEVBQXhGOztBQUVBLFVBQU1HLE1BQ0hQLEtBQUtRLEtBQUwsTUFBZ0JSLEtBQUtLLEtBQUwsQ0FBV0MsS0FBWCxDQUFpQlAsR0FBakIsRUFBc0JVLGFBQXRCLENBQW9DTCxXQUFwQyxDQUFqQixJQUNDSixLQUFLVSxLQUFMLE1BQWdCVixLQUFLSyxLQUFMLENBQVdNLElBQVgsQ0FBZ0JaLEdBQWhCLEVBQXFCYSxVQUFyQixDQUFnQ1IsV0FBaEMsQ0FGbkI7O0FBSUFYLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxJQUF0QyxFQUE0Q1csR0FBNUM7QUFDQSxRQUFJQSxHQUFKLEVBQVMseUJBQVFqQixHQUFSLEVBQWFDLE1BQWIsRUFBcUJDLEtBQXJCOztBQUVUO0FBQ0E7QUFDRCxHQXJDYzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJIiwiZmlsZSI6ImhhbmRsZU9yZGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucy9vdXRjb21pbmciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmlnTnVtYmVyIGZyb20gJ2JpZ251bWJlci5qcydcblxuaW1wb3J0IGZldGNoUHJpY2UgZnJvbSAnLi4vLi4vLi4vYXBwL2FjdGlvbnMvZmV0Y2hQcmljZSdcbmltcG9ydCBoYW5kbGVFcnJvciBmcm9tICcuLi8uLi8uLi9hcHAvYWN0aW9ucy9lcnJvcnMvaGFuZGxlRXJyb3InXG5cbmltcG9ydCBQYWlyIGZyb20gJy4uLy4uL1BhaXInXG5cbmltcG9ydCBwcm9jZWVkIGZyb20gJy4vZG9SZXF1ZXN0J1xuXG5leHBvcnQgZGVmYXVsdCAoYXBwLCBvcmRlcnMpID0+IGFzeW5jIChvcmRlcikgPT4ge1xuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBuZXcgb3JkZXIgJHtvcmRlci5pZH1gKVxuICBpZiAob3JkZXIuaXNNeSkgcmV0dXJuXG5cbiAgLy8gdHVybiBvZmYgYXV0b3JlcXVlc3RcbiAgLy8gcmV0dXJuXG5cbiAgY29uc3QgZmVlID0gQmlnTnVtYmVyKDAuMDEpXG5cbiAgbGV0IHBhaXJcbiAgdHJ5IHtcbiAgICBwYWlyID0gUGFpci5mcm9tT3JkZXIob3JkZXIpXG5cbiAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGBbT1JERVJdIG15PSR7b3JkZXIuaXNNeSA/IDEgOiAwfSwgJHtwYWlyfWApXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgbGV0IG1hcmtldFByaWNlXG4gIHRyeSB7XG4gICAgbWFya2V0UHJpY2UgPSBhd2FpdCBmZXRjaFByaWNlKHBhaXIpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGhhbmRsZUVycm9yKGVycilcbiAgfVxuXG4gIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYFtQUklDRV0gbWFya2V0OiAke21hcmtldFByaWNlfWApXG4gIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgYCR7cGFpcn0gJHtwYWlyLnByaWNlLm1pbnVzKGZlZSl9ICR7KG1hcmtldFByaWNlKX1gKVxuXG4gIGNvbnN0IF9vayA9XG4gICAgKHBhaXIuaXNCaWQoKSAmJiBwYWlyLnByaWNlLm1pbnVzKGZlZSkuaXNHcmVhdGVyVGhhbihtYXJrZXRQcmljZSkpIHx8XG4gICAgKHBhaXIuaXNBc2soKSAmJiBwYWlyLnByaWNlLnBsdXMoZmVlKS5pc0xlc3NUaGFuKG1hcmtldFByaWNlKSlcblxuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdvaycsIF9vaylcbiAgaWYgKF9vaykgcHJvY2VlZChhcHAsIG9yZGVycykob3JkZXIpXG5cbiAgLy8gaWYgbm90LCBqdXN0IGlnbm9yZVxuICAvLyBUT0RPIG1hcmsgdGhpcyBvcmRlciBzbyB3ZSBkb24ndCB0b3VjaCBpdCBmb3IgYSB3aGlsZVxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handleOrder.js"
      ],
      "names": [
        "app",
        "orders",
        "order",
        "console",
        "log",
        "Date",
        "toISOString",
        "id",
        "isMy",
        "fee",
        "pair",
        "Pair",
        "fromOrder",
        "err",
        "marketPrice",
        "price",
        "minus",
        "_ok",
        "isBid",
        "isGreaterThan",
        "isAsk",
        "plus",
        "isLessThan"
      ],
      "mappings": ";;;;;;AAAA;;;;AAEA;;;;AACA;;;;AAEA;;;;AAEA;;;;;;;;kBAEe,CAACA,GAAD,EAAMC,MAAN;AAAA,+BAAiB,WAAOC,KAAP,EAAiB;AAC/CC,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,aAAYJ,MAAMK,EAAG,EAA5D;AACA,QAAIL,MAAMM,IAAV,EAAgB;;AAEhB;AACA;;AAEA,UAAMC,MAAM,yBAAU,IAAV,CAAZ;;AAEA,QAAIC,IAAJ;AACA,QAAI;AACFA,aAAOC,eAAKC,SAAL,CAAeV,KAAf,CAAP;;AAEAC,cAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,cAAaJ,MAAMM,IAAN,GAAa,CAAb,GAAiB,CAAE,KAAIE,IAAK,EAAhF;AACD,KAJD,CAIE,OAAOG,GAAP,EAAY;AACZ,aAAO,KAAP;AACD;;AAED,QAAIC,WAAJ;AACA,QAAI;AACFA,oBAAc,MAAM,0BAAWJ,IAAX,CAApB;AACD,KAFD,CAEE,OAAOG,GAAP,EAAY;AACZ,iCAAYA,GAAZ;AACD;;AAEDV,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,mBAAkBQ,WAAY,EAArE;AACAX,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,GAAEI,IAAK,IAAGA,KAAKK,KAAL,CAAWC,KAAX,CAAiBP,GAAjB,CAAsB,IAAIK,WAAa,EAAxF;;AAEA,UAAMG,MACHP,KAAKQ,KAAL,MAAgBR,KAAKK,KAAL,CAAWC,KAAX,CAAiBP,GAAjB,EAAsBU,aAAtB,CAAoCL,WAApC,CAAjB,IACCJ,KAAKU,KAAL,MAAgBV,KAAKK,KAAL,CAAWM,IAAX,CAAgBZ,GAAhB,EAAqBa,UAArB,CAAgCR,WAAhC,CAFnB;;AAIAX,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,IAAtC,EAA4CW,GAA5C;AACA,QAAIA,GAAJ,EAAS,yBAAQjB,GAAR,EAAaC,MAAb,EAAqBC,KAArB;;AAET;AACA;AACD,GArCc;;AAAA;AAAA;AAAA;AAAA,I",
      "file": "handleOrder.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "sourcesContent": [
        "import BigNumber from 'bignumber.js'\n\nimport fetchPrice from '../../../app/actions/fetchPrice'\nimport handleError from '../../../app/actions/errors/handleError'\n\nimport Pair from '../../Pair'\n\nimport proceed from './doRequest'\n\nexport default (app, orders) => async (order) => {\n  console.log(new Date().toISOString(), `new order ${order.id}`)\n  if (order.isMy) return\n\n  // turn off autorequest\n  // return\n\n  const fee = BigNumber(0.01)\n\n  let pair\n  try {\n    pair = Pair.fromOrder(order)\n\n    console.log(new Date().toISOString(), `[ORDER] my=${order.isMy ? 1 : 0}, ${pair}`)\n  } catch (err) {\n    return false\n  }\n\n  let marketPrice\n  try {\n    marketPrice = await fetchPrice(pair)\n  } catch (err) {\n    handleError(err)\n  }\n\n  console.log(new Date().toISOString(), `[PRICE] market: ${marketPrice}`)\n  console.log(new Date().toISOString(), `${pair} ${pair.price.minus(fee)} ${(marketPrice)}`)\n\n  const _ok =\n    (pair.isBid() && pair.price.minus(fee).isGreaterThan(marketPrice)) ||\n    (pair.isAsk() && pair.price.plus(fee).isLessThan(marketPrice))\n\n  console.log(new Date().toISOString(), 'ok', _ok)\n  if (_ok) proceed(app, orders)(order)\n\n  // if not, just ignore\n  // TODO mark this order so we don't touch it for a while\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/actions/outcoming/doRequest.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/actions/outcoming\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../start/beginSwap",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "beginSwap"
              }
            ]
          },
          {
            "source": "../../../app/actions/errors/handleError",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handleError"
              }
            ]
          },
          {
            "source": "../../core/doRequest",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "doRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/actions/outcoming/doRequest.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/actions/outcoming/doRequest.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "doRequest.js",
      "sourceFileName": "doRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "doRequest"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _beginSwap = require('../start/beginSwap');\n\nvar _beginSwap2 = _interopRequireDefault(_beginSwap);\n\nvar _handleError = require('../../../app/actions/errors/handleError');\n\nvar _handleError2 = _interopRequireDefault(_handleError);\n\nvar _doRequest = require('../../core/doRequest');\n\nvar _doRequest2 = _interopRequireDefault(_doRequest);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = (app, orders) => (() => {\n  var _ref = _asyncToGenerator(function* (order) {\n    const timeout = setTimeout(function () {\n      return (0, _handleError2.default)(new Error(`timeout on requesting order ${order.id}`));\n    }, 10 * 1000);\n\n    console.log(new Date().toISOString(), `request order ${order.id}`);\n    const accepted = yield (0, _doRequest2.default)(order);\n\n    console.log(new Date().toISOString(), `accepted`, accepted);\n\n    clearTimeout(timeout);\n\n    if (!accepted) return (0, _handleError2.default)(new Error(`reject on order ${order}`));\n\n    (0, _beginSwap2.default)(app, order, function (swap) {\n      return orders.create(swap);\n    });\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvUmVxdWVzdC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJvcmRlcnMiLCJvcmRlciIsInRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJpZCIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJhY2NlcHRlZCIsImNsZWFyVGltZW91dCIsInN3YXAiLCJjcmVhdGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7Ozs7a0JBRWUsQ0FBQ0EsR0FBRCxFQUFNQyxNQUFOO0FBQUEsK0JBQWlCLFdBQU9DLEtBQVAsRUFBaUI7QUFDL0MsVUFBTUMsVUFBVUMsV0FBVztBQUFBLGFBQ3pCLDJCQUFZLElBQUlDLEtBQUosQ0FBVywrQkFBOEJILE1BQU1JLEVBQUcsRUFBbEQsQ0FBWixDQUR5QjtBQUFBLEtBQVgsRUFFaEIsS0FBSyxJQUZXLENBQWhCOztBQUlBQyxZQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBdUMsaUJBQWdCUixNQUFNSSxFQUFHLEVBQWhFO0FBQ0EsVUFBTUssV0FBVyxNQUFNLHlCQUFVVCxLQUFWLENBQXZCOztBQUVBSyxZQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBdUMsVUFBdkMsRUFBa0RDLFFBQWxEOztBQUVBQyxpQkFBYVQsT0FBYjs7QUFFQSxRQUFJLENBQUNRLFFBQUwsRUFBZSxPQUFPLDJCQUFZLElBQUlOLEtBQUosQ0FBVyxtQkFBa0JILEtBQU0sRUFBbkMsQ0FBWixDQUFQOztBQUVmLDZCQUFVRixHQUFWLEVBQWVFLEtBQWYsRUFBc0IsVUFBQ1csSUFBRDtBQUFBLGFBQVVaLE9BQU9hLE1BQVAsQ0FBY0QsSUFBZCxDQUFWO0FBQUEsS0FBdEI7QUFDRCxHQWZjOztBQUFBO0FBQUE7QUFBQTtBQUFBLEkiLCJmaWxlIjoiZG9SZXF1ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvYWN0aW9ucy9vdXRjb21pbmciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmVnaW5Td2FwIGZyb20gJy4uL3N0YXJ0L2JlZ2luU3dhcCdcbmltcG9ydCBoYW5kbGVFcnJvciBmcm9tICcuLi8uLi8uLi9hcHAvYWN0aW9ucy9lcnJvcnMvaGFuZGxlRXJyb3InXG5cbmltcG9ydCBkb1JlcXVlc3QgZnJvbSAnLi4vLi4vY29yZS9kb1JlcXVlc3QnXG5cbmV4cG9ydCBkZWZhdWx0IChhcHAsIG9yZGVycykgPT4gYXN5bmMgKG9yZGVyKSA9PiB7XG4gIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+XG4gICAgaGFuZGxlRXJyb3IobmV3IEVycm9yKGB0aW1lb3V0IG9uIHJlcXVlc3Rpbmcgb3JkZXIgJHtvcmRlci5pZH1gKSksXG4gIDEwICogMTAwMClcblxuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIGByZXF1ZXN0IG9yZGVyICR7b3JkZXIuaWR9YClcbiAgY29uc3QgYWNjZXB0ZWQgPSBhd2FpdCBkb1JlcXVlc3Qob3JkZXIpXG5cbiAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgYWNjZXB0ZWRgLCBhY2NlcHRlZClcblxuICBjbGVhclRpbWVvdXQodGltZW91dClcblxuICBpZiAoIWFjY2VwdGVkKSByZXR1cm4gaGFuZGxlRXJyb3IobmV3IEVycm9yKGByZWplY3Qgb24gb3JkZXIgJHtvcmRlcn1gKSlcblxuICBiZWdpblN3YXAoYXBwLCBvcmRlciwgKHN3YXApID0+IG9yZGVycy5jcmVhdGUoc3dhcCkpXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "doRequest.js"
      ],
      "names": [
        "app",
        "orders",
        "order",
        "timeout",
        "setTimeout",
        "Error",
        "id",
        "console",
        "log",
        "Date",
        "toISOString",
        "accepted",
        "clearTimeout",
        "swap",
        "create"
      ],
      "mappings": ";;;;;;AAAA;;;;AACA;;;;AAEA;;;;;;;;kBAEe,CAACA,GAAD,EAAMC,MAAN;AAAA,+BAAiB,WAAOC,KAAP,EAAiB;AAC/C,UAAMC,UAAUC,WAAW;AAAA,aACzB,2BAAY,IAAIC,KAAJ,CAAW,+BAA8BH,MAAMI,EAAG,EAAlD,CAAZ,CADyB;AAAA,KAAX,EAEhB,KAAK,IAFW,CAAhB;;AAIAC,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,iBAAgBR,MAAMI,EAAG,EAAhE;AACA,UAAMK,WAAW,MAAM,yBAAUT,KAAV,CAAvB;;AAEAK,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAuC,UAAvC,EAAkDC,QAAlD;;AAEAC,iBAAaT,OAAb;;AAEA,QAAI,CAACQ,QAAL,EAAe,OAAO,2BAAY,IAAIN,KAAJ,CAAW,mBAAkBH,KAAM,EAAnC,CAAZ,CAAP;;AAEf,6BAAUF,GAAV,EAAeE,KAAf,EAAsB,UAACW,IAAD;AAAA,aAAUZ,OAAOa,MAAP,CAAcD,IAAd,CAAV;AAAA,KAAtB;AACD,GAfc;;AAAA;AAAA;AAAA;AAAA,I",
      "file": "doRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/actions/outcoming",
      "sourcesContent": [
        "import beginSwap from '../start/beginSwap'\nimport handleError from '../../../app/actions/errors/handleError'\n\nimport doRequest from '../../core/doRequest'\n\nexport default (app, orders) => async (order) => {\n  const timeout = setTimeout(() =>\n    handleError(new Error(`timeout on requesting order ${order.id}`)),\n  10 * 1000)\n\n  console.log(new Date().toISOString(), `request order ${order.id}`)\n  const accepted = await doRequest(order)\n\n  console.log(new Date().toISOString(), `accepted`, accepted)\n\n  clearTimeout(timeout)\n\n  if (!accepted) return handleError(new Error(`reject on order ${order}`))\n\n  beginSwap(app, order, (swap) => orders.create(swap))\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/core/doRequest.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot/core\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "simple.swap.core",
            "imported": [
              "helpers"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "helpers",
                "local": "helpers"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/core/doRequest.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/core/doRequest.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "doRequest.js",
      "sourceFileName": "doRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot/core",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "doRequest"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _simpleSwap = require('simple.swap.core');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nexports.default = orders => (() => {\n  var _ref = _asyncToGenerator(function* (order) {\n    return new Promise(function (resolve) {\n      return order.sendRequest(resolve);\n    });\n  });\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\n// const { orders: { request } } = helpers\n//\n// export default request\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvUmVxdWVzdC5qcyJdLCJuYW1lcyI6WyJvcmRlcnMiLCJvcmRlciIsIlByb21pc2UiLCJzZW5kUmVxdWVzdCIsInJlc29sdmUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O2tCQUVlQTtBQUFBLCtCQUFVLFdBQU1DLEtBQU47QUFBQSxXQUN2QixJQUFJQyxPQUFKLENBQVk7QUFBQSxhQUFXRCxNQUFNRSxXQUFOLENBQWtCQyxPQUFsQixDQUFYO0FBQUEsS0FBWixDQUR1QjtBQUFBLEdBQVY7O0FBQUE7QUFBQTtBQUFBO0FBQUEsSTs7QUFHZjtBQUNBO0FBQ0EiLCJmaWxlIjoiZG9SZXF1ZXN0LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QvY29yZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhlbHBlcnMgfSBmcm9tICdzaW1wbGUuc3dhcC5jb3JlJ1xuXG5leHBvcnQgZGVmYXVsdCBvcmRlcnMgPT4gYXN5bmMgb3JkZXIgPT5cbiAgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBvcmRlci5zZW5kUmVxdWVzdChyZXNvbHZlKSlcblxuLy8gY29uc3QgeyBvcmRlcnM6IHsgcmVxdWVzdCB9IH0gPSBoZWxwZXJzXG4vL1xuLy8gZXhwb3J0IGRlZmF1bHQgcmVxdWVzdFxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "doRequest.js"
      ],
      "names": [
        "orders",
        "order",
        "Promise",
        "sendRequest",
        "resolve"
      ],
      "mappings": ";;;;;;AAAA;;;;kBAEeA;AAAA,+BAAU,WAAMC,KAAN;AAAA,WACvB,IAAIC,OAAJ,CAAY;AAAA,aAAWD,MAAME,WAAN,CAAkBC,OAAlB,CAAX;AAAA,KAAZ,CADuB;AAAA,GAAV;;AAAA;AAAA;AAAA;AAAA,I;;AAGf;AACA;AACA",
      "file": "doRequest.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot/core",
      "sourcesContent": [
        "import { helpers } from 'simple.swap.core'\n\nexport default orders => async order =>\n  new Promise(resolve => order.sendRequest(resolve))\n\n// const { orders: { request } } = helpers\n//\n// export default request\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/config/constants/TOKENS.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/config/constants\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/config/constants/TOKENS.js",
      "filenameRelative": "/home/pm2user/swap.bot/config/constants/TOKENS.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "TOKENS.js",
      "sourceFileName": "TOKENS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/config/constants",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "TOKENS"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = {\n  swap: {\n    address: '0x14a52cf6B4F68431bd5D9524E4fcD6F41ce4ADe9',\n    decimals: 18,\n    fullName: 'Swap.online Token',\n    network: 'mainnet'\n  },\n  lev: {\n    address: '0x0f4ca92660efad97a9a70cb0fe969c755439772c',\n    decimals: 9,\n    fullName: 'Leverj'\n  },\n  syc2: {\n    address: '0x49feeF410293261c04F1d14600Ba427F8eED8723',\n    decimals: 2,\n    fullName: 'Synexcoin2'\n  },\n  arn: {\n    address: '0xBA5F11b16B155792Cf3B2E6880E8706859A8AEB6',\n    decimals: 8,\n    fullName: 'Aeron'\n  },\n  deb: {\n    address: '0x151202c9c18e495656f372281f493eb7698961d5',\n    decimals: 18,\n    fullName: 'Debitum'\n  },\n  gusd: {\n    address: '0x056fd409e1d7a124bd7017459dfea2f387b6d5cd',\n    decimals: 2,\n    fullName: 'Gemini dollar'\n  },\n  kn: {\n    address: '0xbfd18F20423694a69e35d65cB9c9D74396CC2c2d',\n    decimals: 18,\n    fullName: 'Know'\n  },\n  yup: {\n    address: '0xD9A12Cde03a86E800496469858De8581D3A5353d',\n    decimals: 18,\n    fullName: 'Yupie'\n  },\n  jot: {\n    address: '0xdb455c71c1bc2de4e80ca451184041ef32054001',\n    decimals: 18,\n    fullName: 'Jury'\n  },\n  noxon: {\n    address: '0x9E4AD79049282F942c1b4c9b418F0357A0637017',\n    decimals: 0,\n    fullName: 'noxon'\n  },\n  bxb: {\n    address: '0x60cbB964Db3f60D14f0d00B5109BccFB01981Aca',\n    decimals: 18,\n    fullName: 'Bobcoin'\n  },\n  dcn: {\n    address: '0x08d32b0da63e2C3bcF8019c9c5d849d7a9d791e6',\n    decimals: 0,\n    fullName: 'Dentacoin'\n  },\n  mbrs: {\n    address: '0x386467F1f3ddbE832448650418311a479EECFC57',\n    decimals: 0,\n    fullName: 'Embers'\n  },\n  sct: {\n    address: '0x63b992e6246d88f07fc35a056d2c365e6d441a3d',\n    decimals: 18,\n    fullName: 'Soma'\n  },\n  btrm: {\n    address: '0xae72146eb535607ee79f5d8834303ea18751845f',\n    decimals: 18,\n    fullName: 'Betrium'\n  },\n  bnty: {\n    address: '0xd2d6158683aee4cc838067727209a0aaf4359de3',\n    decimals: 18,\n    fullName: 'Bounty0x'\n  },\n  pbl: {\n    address: '0x55648de19836338549130b1af587f16bea46f66b',\n    decimals: 18,\n    fullName: 'Publica'\n  },\n  senc: {\n    address: '0xa13f0743951b4f6e3e3aa039f682e17279f52bc3',\n    decimals: 18,\n    fullName: 'Sentinel Chain'\n  },\n  star: {\n    address: '0xf70a642bd387f94380ffb90451c2c81d4eb82cbc',\n    decimals: 18,\n    fullName: 'Starbase'\n  },\n  loc: {\n    address: '0x5e3346444010135322268a4630d2ed5f8d09446c',\n    decimals: 18,\n    fullName: 'LockTrip'\n  },\n  key: {\n    address: '0x4cc19356f2d37338b9802aa8e8fc58b0373296e7',\n    decimals: 18,\n    fullName: 'SelfKey'\n  },\n  dai: {\n    address: '0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359',\n    decimals: 18,\n    fullName: 'Dai StableCoin'\n  },\n  avt: {\n    address: '0x0d88ed6e74bbfd96b831231638b66c05571e824f',\n    decimals: 18,\n    fullName: 'Aventus Protocol'\n  },\n  hbt: {\n    address: '0xdd6c68bb32462e01705011a4e2ad1a60740f217f',\n    decimals: 15,\n    fullName: 'Hubiits'\n  },\n  view: {\n    address: '0xf03f8d65bafa598611c3495124093c56e8f638f0',\n    decimals: 18,\n    fullName: 'View'\n  },\n  cs: {\n    address: '0x46b9ad944d1059450da1163511069c718f699d31',\n    decimals: 18,\n    fullName: 'Credits'\n  },\n  pix: {\n    address: '0x8eFFd494eB698cc399AF6231fCcd39E08fd20B15',\n    decimals: 0,\n    fullName: 'PIX Token'\n  },\n  gen: {\n    address: '0x543ff227f64aa17ea132bf9886cab5db55dcaddf',\n    decimals: 18,\n    fullName: 'DAO Stack'\n  },\n  gai: {\n    address: '0xf207ccfe6d1b90b0b7817ce2d5d262af1514e37b',\n    decimals: 18,\n    fullName: 'GraphGrailAi Token'\n  },\n  emtv: {\n    address: '0x07a7ed332c595b53a317afcee50733af571475e7',\n    decimals: 18,\n    fullName: 'Multiversum'\n  },\n  cgc: {\n    address: '0x2d9765a94ff22e0ca3afc3e3f4b116de2b67582a',\n    decimals: 16,\n    fullName: 'CGCOINS'\n  },\n  vite: {\n    address: '0x1b793E49237758dBD8b752AFC9Eb4b329d5Da016',\n    decimals: 18,\n    fullName: 'ViteToken'\n  },\n  mot: {\n    address: '0x263c618480dbe35c300d8d5ecda19bbb986acaed',\n    decimals: 18,\n    fullName: 'MOT'\n  },\n  dov: {\n    address: '0xac3211a5025414Af2866FF09c23FC18bc97e79b1',\n    decimals: 18,\n    fullName: 'DOVU'\n  },\n  xbx: {\n    address: '0x57C09A8de0b0F471F8567609777aDdFfb5c46a08',\n    decimals: 18,\n    fullName: 'BitexGlobal'\n  },\n  lif: {\n    address: '0xEB9951021698B42e4399f9cBb6267Aa35F82D59D',\n    decimals: 18,\n    fullName: 'WindingTree'\n  },\n  time: {\n    address: '0x6531f133e6DeeBe7F2dcE5A0441aA7ef330B4e53',\n    decimals: 8,\n    fullName: 'ChronoBank'\n  },\n  mth: {\n    address: '0xaf4dce16da2877f8c9e00544c93b62ac40631f16',\n    decimals: 5,\n    fullName: 'Monetha'\n  },\n  cbt: {\n    address: '0x076C97e1c869072eE22f8c91978C99B4bcB02591',\n    decimals: 18,\n    fullName: 'CommerceBlock'\n  },\n  ddm: {\n    address: '0x0e9030636b73858ad93fcbd5e1e783d5c4de1a5c',\n    decimals: 18,\n    fullName: 'Diadem'\n  },\n  wbtc: {\n    address: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n    decimals: 8,\n    fullName: 'WrappedBTC'\n  },\n  xsat: {\n    address: '0x0d9e614937a308438337a2999acf64fc86bf098a',\n    decimals: 18,\n    fullName: 'XSAT'\n  },\n  hdp: {\n    address: '0xc4d5545392f5fc57eba3af8981815669bb7e2a48',\n    decimals: 4,\n    fullName: 'HDP'\n  },\n  usdt: {\n    address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n    decimals: 6,\n    fullName: 'USDT'\n  },\n  snm: {\n    address: '0x983f6d60db79ea8ca4eb9968c6aff8cfa04b3c63',\n    decimals: 18,\n    fullName: 'snm'\n  },\n  jack: {\n    address: '0x4E12EB8e506Ccd1427F6b8F7faa3e88fB698EB28',\n    decimals: 18,\n    fullName: 'jack'\n  },\n  ghost: {\n    address: '0x4c327471c44b2dacd6e90525f9d629bd2e4f662c',\n    decimals: 18,\n    fullName: 'GHOST'\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRPS0VOUy5qcyJdLCJuYW1lcyI6WyJzd2FwIiwiYWRkcmVzcyIsImRlY2ltYWxzIiwiZnVsbE5hbWUiLCJuZXR3b3JrIiwibGV2Iiwic3ljMiIsImFybiIsImRlYiIsImd1c2QiLCJrbiIsInl1cCIsImpvdCIsIm5veG9uIiwiYnhiIiwiZGNuIiwibWJycyIsInNjdCIsImJ0cm0iLCJibnR5IiwicGJsIiwic2VuYyIsInN0YXIiLCJsb2MiLCJrZXkiLCJkYWkiLCJhdnQiLCJoYnQiLCJ2aWV3IiwiY3MiLCJwaXgiLCJnZW4iLCJnYWkiLCJlbXR2IiwiY2djIiwidml0ZSIsIm1vdCIsImRvdiIsInhieCIsImxpZiIsInRpbWUiLCJtdGgiLCJjYnQiLCJkZG0iLCJ3YnRjIiwieHNhdCIsImhkcCIsInVzZHQiLCJzbm0iLCJqYWNrIiwiZ2hvc3QiXSwibWFwcGluZ3MiOiI7Ozs7O2tCQUFlO0FBQ2JBLFFBQU07QUFDSkMsYUFBUyw0Q0FETDtBQUVKQyxjQUFVLEVBRk47QUFHSkMsY0FBVSxtQkFITjtBQUlKQyxhQUFTO0FBSkwsR0FETztBQU9iQyxPQUFLO0FBQ0hKLGFBQVMsNENBRE47QUFFSEMsY0FBVSxDQUZQO0FBR0hDLGNBQVU7QUFIUCxHQVBRO0FBWWJHLFFBQU07QUFDSkwsYUFBUyw0Q0FETDtBQUVKQyxjQUFVLENBRk47QUFHSkMsY0FBVTtBQUhOLEdBWk87QUFpQmJJLE9BQUs7QUFDSE4sYUFBUyw0Q0FETjtBQUVIQyxjQUFVLENBRlA7QUFHSEMsY0FBVTtBQUhQLEdBakJRO0FBc0JiSyxPQUFLO0FBQ0hQLGFBQVMsNENBRE47QUFFSEMsY0FBVSxFQUZQO0FBR0hDLGNBQVU7QUFIUCxHQXRCUTtBQTJCYk0sUUFBTTtBQUNKUixhQUFTLDRDQURMO0FBRUpDLGNBQVUsQ0FGTjtBQUdKQyxjQUFVO0FBSE4sR0EzQk87QUFnQ2JPLE1BQUk7QUFDRlQsYUFBUyw0Q0FEUDtBQUVGQyxjQUFVLEVBRlI7QUFHRkMsY0FBVTtBQUhSLEdBaENTO0FBcUNiUSxP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QUFFUEMsY0FBVSxFQUZIO0FBR1BDLGNBQVU7QUFISDtBQXhPTSxDIiwiZmlsZSI6IlRPS0VOUy5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L2NvbmZpZy9jb25zdGFudHMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIHN3YXA6IHtcbiAgICBhZGRyZXNzOiAnMHgxNGE1MmNmNkI0RjY4NDMxYmQ1RDk1MjRFNGZjRDZGNDFjZTRBRGU5JyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdTd2FwLm9ubGluZSBUb2tlbicsXG4gICAgbmV0d29yazogJ21haW5uZXQnLFxuICB9LFxuICBsZXY6IHtcbiAgICBhZGRyZXNzOiAnMHgwZjRjYTkyNjYwZWZhZDk3YTlhNzBjYjBmZTk2OWM3NTU0Mzk3NzJjJyxcbiAgICBkZWNpbWFsczogOSxcbiAgICBmdWxsTmFtZTogJ0xldmVyaicsXG4gIH0sXG4gIHN5YzI6IHtcbiAgICBhZGRyZXNzOiAnMHg0OWZlZUY0MTAyOTMyNjFjMDRGMWQxNDYwMEJhNDI3RjhlRUQ4NzIzJyxcbiAgICBkZWNpbWFsczogMixcbiAgICBmdWxsTmFtZTogJ1N5bmV4Y29pbjInLFxuICB9LFxuICBhcm46IHtcbiAgICBhZGRyZXNzOiAnMHhCQTVGMTFiMTZCMTU1NzkyQ2YzQjJFNjg4MEU4NzA2ODU5QThBRUI2JyxcbiAgICBkZWNpbWFsczogOCxcbiAgICBmdWxsTmFtZTogJ0Flcm9uJyxcbiAgfSxcbiAgZGViOiB7XG4gICAgYWRkcmVzczogJzB4MTUxMjAyYzljMThlNDk1NjU2ZjM3MjI4MWY0OTNlYjc2OTg5NjFkNScsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnRGViaXR1bScsXG4gIH0sXG4gIGd1c2Q6IHtcbiAgICBhZGRyZXNzOiAnMHgwNTZmZDQwOWUxZDdhMTI0YmQ3MDE3NDU5ZGZlYTJmMzg3YjZkNWNkJyxcbiAgICBkZWNpbWFsczogMixcbiAgICBmdWxsTmFtZTogJ0dlbWluaSBkb2xsYXInLFxuICB9LFxuICBrbjoge1xuICAgIGFkZHJlc3M6ICcweGJmZDE4RjIwNDIzNjk0YTY5ZTM1ZDY1Y0I5YzlENzQzOTZDQzJjMmQnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ0tub3cnLFxuICB9LFxuICB5dXA6IHtcbiAgICBhZGRyZXNzOiAnMHhEOUExMkNkZTAzYTg2RTgwMDQ5NjQ2OTg1OERlODU4MUQzQTUzNTNkJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdZdXBpZScsXG4gIH0sXG4gIGpvdDoge1xuICAgIGFkZHJlc3M6ICcweGRiNDU1YzcxYzFiYzJkZTRlODBjYTQ1MTE4NDA0MWVmMzIwNTQwMDEnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ0p1cnknLFxuICB9LFxuICBub3hvbjoge1xuICAgIGFkZHJlc3M6ICcweDlFNEFENzkwNDkyODJGOTQyYzFiNGM5YjQxOEYwMzU3QTA2MzcwMTcnLFxuICAgIGRlY2ltYWxzOiAwLFxuICAgIGZ1bGxOYW1lOiAnbm94b24nLFxuICB9LFxuICBieGI6IHtcbiAgICBhZGRyZXNzOiAnMHg2MGNiQjk2NERiM2Y2MEQxNGYwZDAwQjUxMDlCY2NGQjAxOTgxQWNhJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdCb2Jjb2luJyxcbiAgfSxcbiAgZGNuOiB7XG4gICAgYWRkcmVzczogJzB4MDhkMzJiMGRhNjNlMkMzYmNGODAxOWM5YzVkODQ5ZDdhOWQ3OTFlNicsXG4gICAgZGVjaW1hbHM6IDAsXG4gICAgZnVsbE5hbWU6ICdEZW50YWNvaW4nLFxuICB9LFxuICBtYnJzOiB7XG4gICAgYWRkcmVzczogJzB4Mzg2NDY3RjFmM2RkYkU4MzI0NDg2NTA0MTgzMTFhNDc5RUVDRkM1NycsXG4gICAgZGVjaW1hbHM6IDAsXG4gICAgZnVsbE5hbWU6ICdFbWJlcnMnLFxuICB9LFxuICBzY3Q6IHtcbiAgICBhZGRyZXNzOiAnMHg2M2I5OTJlNjI0NmQ4OGYwN2ZjMzVhMDU2ZDJjMzY1ZTZkNDQxYTNkJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdTb21hJyxcbiAgfSxcbiAgYnRybToge1xuICAgIGFkZHJlc3M6ICcweGFlNzIxNDZlYjUzNTYwN2VlNzlmNWQ4ODM0MzAzZWExODc1MTg0NWYnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ0JldHJpdW0nLFxuICB9LFxuICBibnR5OiB7XG4gICAgYWRkcmVzczogJzB4ZDJkNjE1ODY4M2FlZTRjYzgzODA2NzcyNzIwOWEwYWFmNDM1OWRlMycsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnQm91bnR5MHgnLFxuICB9LFxuICBwYmw6IHtcbiAgICBhZGRyZXNzOiAnMHg1NTY0OGRlMTk4MzYzMzg1NDkxMzBiMWFmNTg3ZjE2YmVhNDZmNjZiJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdQdWJsaWNhJyxcbiAgfSxcbiAgc2VuYzoge1xuICAgIGFkZHJlc3M6ICcweGExM2YwNzQzOTUxYjRmNmUzZTNhYTAzOWY2ODJlMTcyNzlmNTJiYzMnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ1NlbnRpbmVsIENoYWluJyxcbiAgfSxcbiAgc3Rhcjoge1xuICAgIGFkZHJlc3M6ICcweGY3MGE2NDJiZDM4N2Y5NDM4MGZmYjkwNDUxYzJjODFkNGViODJjYmMnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ1N0YXJiYXNlJyxcbiAgfSxcbiAgbG9jOiB7XG4gICAgYWRkcmVzczogJzB4NWUzMzQ2NDQ0MDEwMTM1MzIyMjY4YTQ2MzBkMmVkNWY4ZDA5NDQ2YycsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnTG9ja1RyaXAnLFxuICB9LFxuICBrZXk6IHtcbiAgICBhZGRyZXNzOiAnMHg0Y2MxOTM1NmYyZDM3MzM4Yjk4MDJhYThlOGZjNThiMDM3MzI5NmU3JyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdTZWxmS2V5JyxcbiAgfSxcbiAgZGFpOiB7XG4gICAgYWRkcmVzczogJzB4ODlkMjRhNmI0Y2NiMWI2ZmFhMjYyNWZlNTYyYmRkOWEyMzI2MDM1OScsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnRGFpIFN0YWJsZUNvaW4nLFxuICB9LFxuICBhdnQ6IHtcbiAgICBhZGRyZXNzOiAnMHgwZDg4ZWQ2ZTc0YmJmZDk2YjgzMTIzMTYzOGI2NmMwNTU3MWU4MjRmJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdBdmVudHVzIFByb3RvY29sJyxcbiAgfSxcbiAgaGJ0OiB7XG4gICAgYWRkcmVzczogJzB4ZGQ2YzY4YmIzMjQ2MmUwMTcwNTAxMWE0ZTJhZDFhNjA3NDBmMjE3ZicsXG4gICAgZGVjaW1hbHM6IDE1LFxuICAgIGZ1bGxOYW1lOiAnSHViaWl0cycsXG4gIH0sXG4gIHZpZXc6IHtcbiAgICBhZGRyZXNzOiAnMHhmMDNmOGQ2NWJhZmE1OTg2MTFjMzQ5NTEyNDA5M2M1NmU4ZjYzOGYwJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdWaWV3JyxcbiAgfSxcbiAgY3M6IHtcbiAgICBhZGRyZXNzOiAnMHg0NmI5YWQ5NDRkMTA1OTQ1MGRhMTE2MzUxMTA2OWM3MThmNjk5ZDMxJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdDcmVkaXRzJyxcbiAgfSxcbiAgcGl4OiB7XG4gICAgYWRkcmVzczogJzB4OGVGRmQ0OTRlQjY5OGNjMzk5QUY2MjMxZkNjZDM5RTA4ZmQyMEIxNScsXG4gICAgZGVjaW1hbHM6IDAsXG4gICAgZnVsbE5hbWU6ICdQSVggVG9rZW4nLFxuICB9LFxuICBnZW46IHtcbiAgICBhZGRyZXNzOiAnMHg1NDNmZjIyN2Y2NGFhMTdlYTEzMmJmOTg4NmNhYjVkYjU1ZGNhZGRmJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdEQU8gU3RhY2snLFxuICB9LFxuICBnYWk6IHtcbiAgICBhZGRyZXNzOiAnMHhmMjA3Y2NmZTZkMWI5MGIwYjc4MTdjZTJkNWQyNjJhZjE1MTRlMzdiJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdHcmFwaEdyYWlsQWkgVG9rZW4nLFxuICB9LFxuICBlbXR2OiB7XG4gICAgYWRkcmVzczogJzB4MDdhN2VkMzMyYzU5NWI1M2EzMTdhZmNlZTUwNzMzYWY1NzE0NzVlNycsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnTXVsdGl2ZXJzdW0nLFxuICB9LFxuICBjZ2M6IHtcbiAgICBhZGRyZXNzOiAnMHgyZDk3NjVhOTRmZjIyZTBjYTNhZmMzZTNmNGIxMTZkZTJiNjc1ODJhJyxcbiAgICBkZWNpbWFsczogMTYsXG4gICAgZnVsbE5hbWU6ICdDR0NPSU5TJyxcbiAgfSxcbiAgdml0ZToge1xuICAgIGFkZHJlc3M6ICcweDFiNzkzRTQ5MjM3NzU4ZEJEOGI3NTJBRkM5RWI0YjMyOWQ1RGEwMTYnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ1ZpdGVUb2tlbicsXG4gIH0sXG4gIG1vdDoge1xuICAgIGFkZHJlc3M6ICcweDI2M2M2MTg0ODBkYmUzNWMzMDBkOGQ1ZWNkYTE5YmJiOTg2YWNhZWQnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ01PVCcsXG4gIH0sXG4gIGRvdjoge1xuICAgIGFkZHJlc3M6ICcweGFjMzIxMWE1MDI1NDE0QWYyODY2RkYwOWMyM0ZDMThiYzk3ZTc5YjEnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ0RPVlUnLFxuICB9LFxuICB4Yng6IHtcbiAgICBhZGRyZXNzOiAnMHg1N0MwOUE4ZGUwYjBGNDcxRjg1Njc2MDk3NzdhRGRGZmI1YzQ2YTA4JyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdCaXRleEdsb2JhbCcsXG4gIH0sXG4gIGxpZjoge1xuICAgIGFkZHJlc3M6ICcweEVCOTk1MTAyMTY5OEI0MmU0Mzk5ZjljQmI2MjY3QWEzNUY4MkQ1OUQnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ1dpbmRpbmdUcmVlJyxcbiAgfSxcbiAgdGltZToge1xuICAgIGFkZHJlc3M6ICcweDY1MzFmMTMzZTZEZWVCZTdGMmRjRTVBMDQ0MWFBN2VmMzMwQjRlNTMnLFxuICAgIGRlY2ltYWxzOiA4LFxuICAgIGZ1bGxOYW1lOiAnQ2hyb25vQmFuaycsXG4gIH0sXG4gIG10aDoge1xuICAgIGFkZHJlc3M6ICcweGFmNGRjZTE2ZGEyODc3ZjhjOWUwMDU0NGM5M2I2MmFjNDA2MzFmMTYnLFxuICAgIGRlY2ltYWxzOiA1LFxuICAgIGZ1bGxOYW1lOiAnTW9uZXRoYScsXG4gIH0sXG4gIGNidDoge1xuICAgIGFkZHJlc3M6ICcweDA3NkM5N2UxYzg2OTA3MmVFMjJmOGM5MTk3OEM5OUI0YmNCMDI1OTEnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ0NvbW1lcmNlQmxvY2snLFxuICB9LFxuICBkZG06IHtcbiAgICBhZGRyZXNzOiAnMHgwZTkwMzA2MzZiNzM4NThhZDkzZmNiZDVlMWU3ODNkNWM0ZGUxYTVjJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdEaWFkZW0nLFxuICB9LFxuICB3YnRjOiB7XG4gICAgYWRkcmVzczogJzB4MjI2MGZhYzVlNTU0MmE3NzNhYTQ0ZmJjZmVkZjdjMTkzYmMyYzU5OScsXG4gICAgZGVjaW1hbHM6IDgsXG4gICAgZnVsbE5hbWU6ICdXcmFwcGVkQlRDJyxcbiAgfSxcbiAgeHNhdDoge1xuICAgIGFkZHJlc3M6ICcweDBkOWU2MTQ5MzdhMzA4NDM4MzM3YTI5OTlhY2Y2NGZjODZiZjA5OGEnLFxuICAgIGRlY2ltYWxzOiAxOCxcbiAgICBmdWxsTmFtZTogJ1hTQVQnLFxuICB9LFxuICBoZHA6IHtcbiAgICBhZGRyZXNzOiAnMHhjNGQ1NTQ1MzkyZjVmYzU3ZWJhM2FmODk4MTgxNTY2OWJiN2UyYTQ4JyxcbiAgICBkZWNpbWFsczogNCxcbiAgICBmdWxsTmFtZTogJ0hEUCcsXG4gIH0sXG4gIHVzZHQ6IHtcbiAgICBhZGRyZXNzOiAnMHhkYWMxN2Y5NThkMmVlNTIzYTIyMDYyMDY5OTQ1OTdjMTNkODMxZWM3JyxcbiAgICBkZWNpbWFsczogNixcbiAgICBmdWxsTmFtZTogJ1VTRFQnLFxuICB9LFxuICBzbm06IHtcbiAgICBhZGRyZXNzOiAnMHg5ODNmNmQ2MGRiNzllYThjYTRlYjk5NjhjNmFmZjhjZmEwNGIzYzYzJyxcbiAgICBkZWNpbWFsczogMTgsXG4gICAgZnVsbE5hbWU6ICdzbm0nLFxuICB9LFxuICBqYWNrOiB7XG4gICAgYWRkcmVzczogJzB4NEUxMkVCOGU1MDZDY2QxNDI3RjZiOEY3ZmFhM2U4OGZCNjk4RUIyOCcsXG4gICAgZGVjaW1hbHM6IDE4LFxuICAgIGZ1bGxOYW1lOiAnamFjaycsXG4gIH0sXG4gIGdob3N0OiB7XG5cdFx0YWRkcmVzczogJzB4NGMzMjc0NzFjNDRiMmRhY2Q2ZTkwNTI1ZjlkNjI5YmQyZTRmNjYyYycsXG5cdFx0ZGVjaW1hbHM6IDE4LFxuXHRcdGZ1bGxOYW1lOiAnR0hPU1QnLFxuICB9LFxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "TOKENS.js"
      ],
      "names": [
        "swap",
        "address",
        "decimals",
        "fullName",
        "network",
        "lev",
        "syc2",
        "arn",
        "deb",
        "gusd",
        "kn",
        "yup",
        "jot",
        "noxon",
        "bxb",
        "dcn",
        "mbrs",
        "sct",
        "btrm",
        "bnty",
        "pbl",
        "senc",
        "star",
        "loc",
        "key",
        "dai",
        "avt",
        "hbt",
        "view",
        "cs",
        "pix",
        "gen",
        "gai",
        "emtv",
        "cgc",
        "vite",
        "mot",
        "dov",
        "xbx",
        "lif",
        "time",
        "mth",
        "cbt",
        "ddm",
        "wbtc",
        "xsat",
        "hdp",
        "usdt",
        "snm",
        "jack",
        "ghost"
      ],
      "mappings": "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",
      "file": "TOKENS.js",
      "sourceRoot": "/home/pm2user/swap.bot/config/constants",
      "sourcesContent": [
        "export default {\n  swap: {\n    address: '0x14a52cf6B4F68431bd5D9524E4fcD6F41ce4ADe9',\n    decimals: 18,\n    fullName: 'Swap.online Token',\n    network: 'mainnet',\n  },\n  lev: {\n    address: '0x0f4ca92660efad97a9a70cb0fe969c755439772c',\n    decimals: 9,\n    fullName: 'Leverj',\n  },\n  syc2: {\n    address: '0x49feeF410293261c04F1d14600Ba427F8eED8723',\n    decimals: 2,\n    fullName: 'Synexcoin2',\n  },\n  arn: {\n    address: '0xBA5F11b16B155792Cf3B2E6880E8706859A8AEB6',\n    decimals: 8,\n    fullName: 'Aeron',\n  },\n  deb: {\n    address: '0x151202c9c18e495656f372281f493eb7698961d5',\n    decimals: 18,\n    fullName: 'Debitum',\n  },\n  gusd: {\n    address: '0x056fd409e1d7a124bd7017459dfea2f387b6d5cd',\n    decimals: 2,\n    fullName: 'Gemini dollar',\n  },\n  kn: {\n    address: '0xbfd18F20423694a69e35d65cB9c9D74396CC2c2d',\n    decimals: 18,\n    fullName: 'Know',\n  },\n  yup: {\n    address: '0xD9A12Cde03a86E800496469858De8581D3A5353d',\n    decimals: 18,\n    fullName: 'Yupie',\n  },\n  jot: {\n    address: '0xdb455c71c1bc2de4e80ca451184041ef32054001',\n    decimals: 18,\n    fullName: 'Jury',\n  },\n  noxon: {\n    address: '0x9E4AD79049282F942c1b4c9b418F0357A0637017',\n    decimals: 0,\n    fullName: 'noxon',\n  },\n  bxb: {\n    address: '0x60cbB964Db3f60D14f0d00B5109BccFB01981Aca',\n    decimals: 18,\n    fullName: 'Bobcoin',\n  },\n  dcn: {\n    address: '0x08d32b0da63e2C3bcF8019c9c5d849d7a9d791e6',\n    decimals: 0,\n    fullName: 'Dentacoin',\n  },\n  mbrs: {\n    address: '0x386467F1f3ddbE832448650418311a479EECFC57',\n    decimals: 0,\n    fullName: 'Embers',\n  },\n  sct: {\n    address: '0x63b992e6246d88f07fc35a056d2c365e6d441a3d',\n    decimals: 18,\n    fullName: 'Soma',\n  },\n  btrm: {\n    address: '0xae72146eb535607ee79f5d8834303ea18751845f',\n    decimals: 18,\n    fullName: 'Betrium',\n  },\n  bnty: {\n    address: '0xd2d6158683aee4cc838067727209a0aaf4359de3',\n    decimals: 18,\n    fullName: 'Bounty0x',\n  },\n  pbl: {\n    address: '0x55648de19836338549130b1af587f16bea46f66b',\n    decimals: 18,\n    fullName: 'Publica',\n  },\n  senc: {\n    address: '0xa13f0743951b4f6e3e3aa039f682e17279f52bc3',\n    decimals: 18,\n    fullName: 'Sentinel Chain',\n  },\n  star: {\n    address: '0xf70a642bd387f94380ffb90451c2c81d4eb82cbc',\n    decimals: 18,\n    fullName: 'Starbase',\n  },\n  loc: {\n    address: '0x5e3346444010135322268a4630d2ed5f8d09446c',\n    decimals: 18,\n    fullName: 'LockTrip',\n  },\n  key: {\n    address: '0x4cc19356f2d37338b9802aa8e8fc58b0373296e7',\n    decimals: 18,\n    fullName: 'SelfKey',\n  },\n  dai: {\n    address: '0x89d24a6b4ccb1b6faa2625fe562bdd9a23260359',\n    decimals: 18,\n    fullName: 'Dai StableCoin',\n  },\n  avt: {\n    address: '0x0d88ed6e74bbfd96b831231638b66c05571e824f',\n    decimals: 18,\n    fullName: 'Aventus Protocol',\n  },\n  hbt: {\n    address: '0xdd6c68bb32462e01705011a4e2ad1a60740f217f',\n    decimals: 15,\n    fullName: 'Hubiits',\n  },\n  view: {\n    address: '0xf03f8d65bafa598611c3495124093c56e8f638f0',\n    decimals: 18,\n    fullName: 'View',\n  },\n  cs: {\n    address: '0x46b9ad944d1059450da1163511069c718f699d31',\n    decimals: 18,\n    fullName: 'Credits',\n  },\n  pix: {\n    address: '0x8eFFd494eB698cc399AF6231fCcd39E08fd20B15',\n    decimals: 0,\n    fullName: 'PIX Token',\n  },\n  gen: {\n    address: '0x543ff227f64aa17ea132bf9886cab5db55dcaddf',\n    decimals: 18,\n    fullName: 'DAO Stack',\n  },\n  gai: {\n    address: '0xf207ccfe6d1b90b0b7817ce2d5d262af1514e37b',\n    decimals: 18,\n    fullName: 'GraphGrailAi Token',\n  },\n  emtv: {\n    address: '0x07a7ed332c595b53a317afcee50733af571475e7',\n    decimals: 18,\n    fullName: 'Multiversum',\n  },\n  cgc: {\n    address: '0x2d9765a94ff22e0ca3afc3e3f4b116de2b67582a',\n    decimals: 16,\n    fullName: 'CGCOINS',\n  },\n  vite: {\n    address: '0x1b793E49237758dBD8b752AFC9Eb4b329d5Da016',\n    decimals: 18,\n    fullName: 'ViteToken',\n  },\n  mot: {\n    address: '0x263c618480dbe35c300d8d5ecda19bbb986acaed',\n    decimals: 18,\n    fullName: 'MOT',\n  },\n  dov: {\n    address: '0xac3211a5025414Af2866FF09c23FC18bc97e79b1',\n    decimals: 18,\n    fullName: 'DOVU',\n  },\n  xbx: {\n    address: '0x57C09A8de0b0F471F8567609777aDdFfb5c46a08',\n    decimals: 18,\n    fullName: 'BitexGlobal',\n  },\n  lif: {\n    address: '0xEB9951021698B42e4399f9cBb6267Aa35F82D59D',\n    decimals: 18,\n    fullName: 'WindingTree',\n  },\n  time: {\n    address: '0x6531f133e6DeeBe7F2dcE5A0441aA7ef330B4e53',\n    decimals: 8,\n    fullName: 'ChronoBank',\n  },\n  mth: {\n    address: '0xaf4dce16da2877f8c9e00544c93b62ac40631f16',\n    decimals: 5,\n    fullName: 'Monetha',\n  },\n  cbt: {\n    address: '0x076C97e1c869072eE22f8c91978C99B4bcB02591',\n    decimals: 18,\n    fullName: 'CommerceBlock',\n  },\n  ddm: {\n    address: '0x0e9030636b73858ad93fcbd5e1e783d5c4de1a5c',\n    decimals: 18,\n    fullName: 'Diadem',\n  },\n  wbtc: {\n    address: '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599',\n    decimals: 8,\n    fullName: 'WrappedBTC',\n  },\n  xsat: {\n    address: '0x0d9e614937a308438337a2999acf64fc86bf098a',\n    decimals: 18,\n    fullName: 'XSAT',\n  },\n  hdp: {\n    address: '0xc4d5545392f5fc57eba3af8981815669bb7e2a48',\n    decimals: 4,\n    fullName: 'HDP',\n  },\n  usdt: {\n    address: '0xdac17f958d2ee523a2206206994597c13d831ec7',\n    decimals: 6,\n    fullName: 'USDT',\n  },\n  snm: {\n    address: '0x983f6d60db79ea8ca4eb9968c6aff8cfa04b3c63',\n    decimals: 18,\n    fullName: 'snm',\n  },\n  jack: {\n    address: '0x4E12EB8e506Ccd1427F6b8F7faa3e88fB698EB28',\n    decimals: 18,\n    fullName: 'jack',\n  },\n  ghost: {\n\t\taddress: '0x4c327471c44b2dacd6e90525f9d629bd2e4f662c',\n\t\tdecimals: 18,\n\t\tfullName: 'GHOST',\n  },\n}\n"
      ]
    },
    "mtime": 1592861824000
  },
  "{\"filename\":\"/home/pm2user/swap.bot/microbot/lineInput.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/microbot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "readline",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "readline"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/microbot/lineInput.js",
      "filenameRelative": "/home/pm2user/swap.bot/microbot/lineInput.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "lineInput.js",
      "sourceFileName": "lineInput.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/microbot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "lineInput"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _readline = require('readline');\n\nvar _readline2 = _interopRequireDefault(_readline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _readline2.default.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpbmVJbnB1dC5qcyJdLCJuYW1lcyI6WyJyZWFkbGluZSIsImNyZWF0ZUludGVyZmFjZSIsImlucHV0IiwicHJvY2VzcyIsInN0ZGluIiwib3V0cHV0Iiwic3Rkb3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7O2tCQUVlQSxtQkFBU0MsZUFBVCxDQUF5QjtBQUN0Q0MsU0FBT0MsUUFBUUMsS0FEdUI7QUFFdENDLFVBQVFGLFFBQVFHO0FBRnNCLENBQXpCLEMiLCJmaWxlIjoibGluZUlucHV0LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvbWljcm9ib3QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVhZGxpbmUgZnJvbSAncmVhZGxpbmUnXG5cbmV4cG9ydCBkZWZhdWx0IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gIGlucHV0OiBwcm9jZXNzLnN0ZGluLFxuICBvdXRwdXQ6IHByb2Nlc3Muc3Rkb3V0XG59KVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "lineInput.js"
      ],
      "names": [
        "readline",
        "createInterface",
        "input",
        "process",
        "stdin",
        "output",
        "stdout"
      ],
      "mappings": ";;;;;;AAAA;;;;;;kBAEeA,mBAASC,eAAT,CAAyB;AACtCC,SAAOC,QAAQC,KADuB;AAEtCC,UAAQF,QAAQG;AAFsB,CAAzB,C",
      "file": "lineInput.js",
      "sourceRoot": "/home/pm2user/swap.bot/microbot",
      "sourcesContent": [
        "import readline from 'readline'\n\nexport default readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n})\n"
      ]
    },
    "mtime": 1571923091186
  },
  "{\"filename\":\"/home/pm2user/swap.bot/ws.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/ws.js",
      "filenameRelative": "/home/pm2user/swap.bot/ws.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "ws.js",
      "sourceFileName": "ws.js",
      "sourceRoot": "/home/pm2user/swap.bot",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "ws"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst WebSocket = require('ws');\nconst http = require('http');\nconst WS_PORT = 7333;\n\nconst { app: { util } } = require('./swapApp');\n\nconst init = (app, SwapApp, router, port) => {\n  const server = http.createServer(app);\n\n  // initialize the WebSocket server instance\n  const wss = new WebSocket.Server({ server });\n\n  const swap = SwapApp.services;\n\n  const json = obj => JSON.stringify(obj);\n\n  const cleanOrder = order => util.pullProps(order, 'id', 'owner', 'buyCurrency', 'sellCurrency', 'buyAmount', 'sellAmount', 'isRequested', 'isProcessing');\n\n  const interval = setInterval(() => {\n    wss.clients.forEach(ws => {\n      if (ws.isAlive === false) return ws.terminate();\n\n      ws.isAlive = false;\n      ws.ping(() => {});\n    });\n  }, 30000);\n\n  const pipe = (from, to, type, handler = a => a) => {\n    from.on(type, payload => {\n      safeSend(to, { event: type, payload: handler(payload) });\n    });\n  };\n\n  const safeSend = (to, message) => {\n    try {\n      to.isAlive && to.send(json(message));\n    } catch ({ name, message }) {\n      if (!wss.clients.has(to) || /WebSocket is not open/g.test(message)) return ws.terminate();\n\n      safeSend(ws, { error: { name, message } });\n    }\n  };\n\n  wss.on('connection', ws => {\n    ws.isAlive = true;\n\n    ws.on('pong', () => ws.isAlive = true);\n    ws.on('close', () => ws.isAlive = false);\n\n    ws.send(json({ event: \"ready\", payload: \"server\" }));\n    ws.send(json({ event: \"ready\", payload: { mainnet: SwapApp.isMainNet() } }));\n\n    pipe(swap.room, ws, 'ready', () => ({ event: \"ready\", payload: { service: \"room\", room: swap.room.roomName, peer: swap.room.peer } }));\n\n    pipe(swap.room, ws, 'user online');\n    pipe(swap.room, ws, 'user offline');\n\n    pipe(swap.room, ws, 'accept swap request');\n    pipe(swap.room, ws, 'decline swap request');\n\n    pipe(swap.orders, ws, 'new order request');\n\n    pipe(swap.orders, ws, 'new orders', orders => orders.map(cleanOrder));\n    pipe(swap.orders, ws, 'new order', payload => cleanOrder(payload));\n    pipe(swap.orders, ws, 'remove order', () => {});\n\n    const stopListening = () => {\n      swap.room.off('ready');\n      swap.room.off('user online');\n      swap.room.off('user offline');\n      swap.room.off('accept swap request');\n      swap.room.off('decline swap request');\n\n      swap.orders.off('new order');\n      swap.orders.off('new orders');\n      swap.orders.off('new order request');\n      swap.orders.off('remove order');\n    };\n\n    ws.on('close', stopListening);\n  });\n\n  server.listen(port || WS_PORT, () => {\n    console.log(`[WS] listening on port ${server.address().port}`);\n  });\n\n  return wss;\n};\n\nmodule.exports = { init };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndzLmpzIl0sIm5hbWVzIjpbIldlYlNvY2tldCIsInJlcXVpcmUiLCJodHRwIiwiV1NfUE9SVCIsImFwcCIsInV0aWwiLCJpbml0IiwiU3dhcEFwcCIsInJvdXRlciIsInBvcnQiLCJzZXJ2ZXIiLCJjcmVhdGVTZXJ2ZXIiLCJ3c3MiLCJTZXJ2ZXIiLCJzd2FwIiwic2VydmljZXMiLCJqc29uIiwib2JqIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsZWFuT3JkZXIiLCJvcmRlciIsInB1bGxQcm9wcyIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGllbnRzIiwiZm9yRWFjaCIsIndzIiwiaXNBbGl2ZSIsInRlcm1pbmF0ZSIsInBpbmciLCJwaXBlIiwiZnJvbSIsInRvIiwidHlwZSIsImhhbmRsZXIiLCJhIiwib24iLCJwYXlsb2FkIiwic2FmZVNlbmQiLCJldmVudCIsIm1lc3NhZ2UiLCJzZW5kIiwibmFtZSIsImhhcyIsInRlc3QiLCJlcnJvciIsIm1haW5uZXQiLCJpc01haW5OZXQiLCJyb29tIiwic2VydmljZSIsInJvb21OYW1lIiwicGVlciIsIm9yZGVycyIsIm1hcCIsInN0b3BMaXN0ZW5pbmciLCJvZmYiLCJsaXN0ZW4iLCJjb25zb2xlIiwibG9nIiwiYWRkcmVzcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsWUFBWUMsUUFBUSxJQUFSLENBQWxCO0FBQ0EsTUFBTUMsT0FBT0QsUUFBUSxNQUFSLENBQWI7QUFDQSxNQUFNRSxVQUFVLElBQWhCOztBQUVBLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxJQUFGLEVBQVAsS0FBb0JKLFFBQVEsV0FBUixDQUExQjs7QUFFQSxNQUFNSyxPQUFPLENBQUNGLEdBQUQsRUFBTUcsT0FBTixFQUFlQyxNQUFmLEVBQXVCQyxJQUF2QixLQUFnQztBQUMzQyxRQUFNQyxTQUFTUixLQUFLUyxZQUFMLENBQWtCUCxHQUFsQixDQUFmOztBQUVBO0FBQ0EsUUFBTVEsTUFBTSxJQUFJ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LFFBQVFOLE9BQXRCLEVBQStCLE1BQU07QUFDbkN1RCxZQUFRQyxHQUFSLENBQWEsMEJBQXlCakQsT0FBT2tELE9BQVAsR0FBaUJuRCxJQUFLLEVBQTVEO0FBQ0QsR0FGRDs7QUFJQSxTQUFPRyxHQUFQO0FBQ0QsQ0E5RkQ7O0FBZ0dBaUQsT0FBT0MsT0FBUCxHQUFpQixFQUFFeEQsSUFBRixFQUFqQiIsImZpbGUiOiJ3cy5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90Iiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgV2ViU29ja2V0ID0gcmVxdWlyZSgnd3MnKVxuY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKVxuY29uc3QgV1NfUE9SVCA9IDczMzNcblxuY29uc3QgeyBhcHA6IHsgdXRpbCB9IH0gPSByZXF1aXJlKCcuL3N3YXBBcHAnKVxuXG5jb25zdCBpbml0ID0gKGFwcCwgU3dhcEFwcCwgcm91dGVyLCBwb3J0KSA9PiB7XG4gIGNvbnN0IHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKGFwcClcblxuICAvLyBpbml0aWFsaXplIHRoZSBXZWJTb2NrZXQgc2VydmVyIGluc3RhbmNlXG4gIGNvbnN0IHdzcyA9IG5ldyBXZWJTb2NrZXQuU2VydmVyKHsgc2VydmVyIH0pXG5cbiAgY29uc3Qgc3dhcCA9IFN3YXBBcHAuc2VydmljZXNcblxuICBjb25zdCBqc29uID0gKG9iaikgPT4gSlNPTi5zdHJpbmdpZnkob2JqKVxuXG4gIGNvbnN0IGNsZWFuT3JkZXIgPSAob3JkZXIpID0+IHV0aWwucHVsbFByb3BzKFxuICAgIG9yZGVyLFxuICAgICdpZCcsXG4gICAgJ293bmVyJyxcbiAgICAnYnV5Q3VycmVuY3knLFxuICAgICdzZWxsQ3VycmVuY3knLFxuICAgICdidXlBbW91bnQnLFxuICAgICdzZWxsQW1vdW50JyxcbiAgICAnaXNSZXF1ZXN0ZWQnLFxuICAgICdpc1Byb2Nlc3NpbmcnXG4gIClcblxuICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICB3c3MuY2xpZW50cy5mb3JFYWNoKCh3cykgPT4ge1xuICAgICAgaWYgKHdzLmlzQWxpdmUgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gd3MudGVybWluYXRlKClcblxuICAgICAgd3MuaXNBbGl2ZSA9IGZhbHNlXG4gICAgICB3cy5waW5nKCgpID0+IHt9KVxuICAgIH0pXG4gIH0sIDMwMDAwKVxuXG4gIGNvbnN0IHBpcGUgPSAoZnJvbSwgdG8sIHR5cGUsIGhhbmRsZXIgPSBhID0+IGEpID0+IHtcbiAgICBmcm9tLm9uKHR5cGUsIChwYXlsb2FkKSA9PiB7XG4gICAgICBzYWZlU2VuZCh0bywgeyBldmVudDogdHlwZSwgcGF5bG9hZDogaGFuZGxlcihwYXlsb2FkKSB9KVxuICAgIH0pXG4gIH1cblxuICBjb25zdCBzYWZlU2VuZCA9ICh0bywgbWVzc2FnZSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICB0by5pc0FsaXZlICYmIHRvLnNlbmQoanNvbihtZXNzYWdlKSlcbiAgICB9IGNhdGNoICh7IG5hbWUsIG1lc3NhZ2UgfSkge1xuICAgICAgaWYgKCF3c3MuY2xpZW50cy5oYXModG8pIHx8IC9XZWJTb2NrZXQgaXMgbm90IG9wZW4vZy50ZXN0KG1lc3NhZ2UpKVxuICAgICAgICByZXR1cm4gd3MudGVybWluYXRlKClcblxuICAgICAgc2FmZVNlbmQod3MsIHsgZXJyb3I6IHsgbmFtZSwgbWVzc2FnZSB9fSlcbiAgICB9XG4gIH1cblxuICB3c3Mub24oJ2Nvbm5lY3Rpb24nLCAod3MpID0+IHtcbiAgICB3cy5pc0FsaXZlID0gdHJ1ZVxuXG4gICAgd3Mub24oJ3BvbmcnLCAgICgpID0+IHdzLmlzQWxpdmUgPSB0cnVlKVxuICAgIHdzLm9uKCdjbG9zZScsICAoKSA9PiB3cy5pc0FsaXZlID0gZmFsc2UpXG5cbiAgICB3cy5zZW5kKGpzb24oeyBldmVudDogXCJyZWFkeVwiLCBwYXlsb2FkOiBcInNlcnZlclwiIH0pKVxuICAgIHdzLnNlbmQoanNvbih7IGV2ZW50OiBcInJlYWR5XCIsIHBheWxvYWQ6IHsgbWFpbm5ldDogU3dhcEFwcC5pc01haW5OZXQoKSB9IH0pKVxuXG4gICAgcGlwZShzd2FwLnJvb20sIHdzLCAncmVhZHknLCAoKSA9PiAoeyBldmVudDogXCJyZWFkeVwiLCBwYXlsb2FkOiB7IHNlcnZpY2U6IFwicm9vbVwiLCByb29tOiBzd2FwLnJvb20ucm9vbU5hbWUsIHBlZXI6IHN3YXAucm9vbS5wZWVyIH19KSlcblxuICAgIHBpcGUoc3dhcC5yb29tLCB3cywgJ3VzZXIgb25saW5lJylcbiAgICBwaXBlKHN3YXAucm9vbSwgd3MsICd1c2VyIG9mZmxpbmUnKVxuXG4gICAgcGlwZShzd2FwLnJvb20sIHdzLCAnYWNjZXB0IHN3YXAgcmVxdWVzdCcpXG4gICAgcGlwZShzd2FwLnJvb20sIHdzLCAnZGVjbGluZSBzd2FwIHJlcXVlc3QnKVxuXG4gICAgcGlwZShzd2FwLm9yZGVycywgd3MsICduZXcgb3JkZXIgcmVxdWVzdCcpXG5cbiAgICBwaXBlKHN3YXAub3JkZXJzLCB3cywgJ25ldyBvcmRlcnMnLCBvcmRlcnMgPT4gb3JkZXJzLm1hcChjbGVhbk9yZGVyKSlcbiAgICBwaXBlKHN3YXAub3JkZXJzLCB3cywgJ25ldyBvcmRlcicsIHBheWxvYWQgPT4gY2xlYW5PcmRlcihwYXlsb2FkKSlcbiAgICBwaXBlKHN3YXAub3JkZXJzLCB3cywgJ3JlbW92ZSBvcmRlcicsICgpID0+IHt9KVxuXG4gICAgY29uc3Qgc3RvcExpc3RlbmluZyA9ICgpID0+IHtcbiAgICAgIHN3YXAucm9vbS5vZmYoJ3JlYWR5JylcbiAgICAgIHN3YXAucm9vbS5vZmYoJ3VzZXIgb25saW5lJylcbiAgICAgIHN3YXAucm9vbS5vZmYoJ3VzZXIgb2ZmbGluZScpXG4gICAgICBzd2FwLnJvb20ub2ZmKCdhY2NlcHQgc3dhcCByZXF1ZXN0JylcbiAgICAgIHN3YXAucm9vbS5vZmYoJ2RlY2xpbmUgc3dhcCByZXF1ZXN0JylcblxuICAgICAgc3dhcC5vcmRlcnMub2ZmKCduZXcgb3JkZXInKVxuICAgICAgc3dhcC5vcmRlcnMub2ZmKCduZXcgb3JkZXJzJylcbiAgICAgIHN3YXAub3JkZXJzLm9mZignbmV3IG9yZGVyIHJlcXVlc3QnKVxuICAgICAgc3dhcC5vcmRlcnMub2ZmKCdyZW1vdmUgb3JkZXInKVxuICAgIH1cblxuICAgIHdzLm9uKCdjbG9zZScsIHN0b3BMaXN0ZW5pbmcpXG5cbiAgfSlcblxuICBzZXJ2ZXIubGlzdGVuKHBvcnQgfHwgV1NfUE9SVCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBbV1NdIGxpc3RlbmluZyBvbiBwb3J0ICR7c2VydmVyLmFkZHJlc3MoKS5wb3J0fWApXG4gIH0pXG5cbiAgcmV0dXJuIHdzc1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHsgaW5pdCB9XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "ws.js"
      ],
      "names": [
        "WebSocket",
        "require",
        "http",
        "WS_PORT",
        "app",
        "util",
        "init",
        "SwapApp",
        "router",
        "port",
        "server",
        "createServer",
        "wss",
        "Server",
        "swap",
        "services",
        "json",
        "obj",
        "JSON",
        "stringify",
        "cleanOrder",
        "order",
        "pullProps",
        "interval",
        "setInterval",
        "clients",
        "forEach",
        "ws",
        "isAlive",
        "terminate",
        "ping",
        "pipe",
        "from",
        "to",
        "type",
        "handler",
        "a",
        "on",
        "payload",
        "safeSend",
        "event",
        "message",
        "send",
        "name",
        "has",
        "test",
        "error",
        "mainnet",
        "isMainNet",
        "room",
        "service",
        "roomName",
        "peer",
        "orders",
        "map",
        "stopListening",
        "off",
        "listen",
        "console",
        "log",
        "address",
        "module",
        "exports"
      ],
      "mappings": "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",
      "file": "ws.js",
      "sourceRoot": "/home/pm2user/swap.bot",
      "sourcesContent": [
        "const WebSocket = require('ws')\nconst http = require('http')\nconst WS_PORT = 7333\n\nconst { app: { util } } = require('./swapApp')\n\nconst init = (app, SwapApp, router, port) => {\n  const server = http.createServer(app)\n\n  // initialize the WebSocket server instance\n  const wss = new WebSocket.Server({ server })\n\n  const swap = SwapApp.services\n\n  const json = (obj) => JSON.stringify(obj)\n\n  const cleanOrder = (order) => util.pullProps(\n    order,\n    'id',\n    'owner',\n    'buyCurrency',\n    'sellCurrency',\n    'buyAmount',\n    'sellAmount',\n    'isRequested',\n    'isProcessing'\n  )\n\n  const interval = setInterval(() => {\n    wss.clients.forEach((ws) => {\n      if (ws.isAlive === false)\n        return ws.terminate()\n\n      ws.isAlive = false\n      ws.ping(() => {})\n    })\n  }, 30000)\n\n  const pipe = (from, to, type, handler = a => a) => {\n    from.on(type, (payload) => {\n      safeSend(to, { event: type, payload: handler(payload) })\n    })\n  }\n\n  const safeSend = (to, message) => {\n    try {\n      to.isAlive && to.send(json(message))\n    } catch ({ name, message }) {\n      if (!wss.clients.has(to) || /WebSocket is not open/g.test(message))\n        return ws.terminate()\n\n      safeSend(ws, { error: { name, message }})\n    }\n  }\n\n  wss.on('connection', (ws) => {\n    ws.isAlive = true\n\n    ws.on('pong',   () => ws.isAlive = true)\n    ws.on('close',  () => ws.isAlive = false)\n\n    ws.send(json({ event: \"ready\", payload: \"server\" }))\n    ws.send(json({ event: \"ready\", payload: { mainnet: SwapApp.isMainNet() } }))\n\n    pipe(swap.room, ws, 'ready', () => ({ event: \"ready\", payload: { service: \"room\", room: swap.room.roomName, peer: swap.room.peer }}))\n\n    pipe(swap.room, ws, 'user online')\n    pipe(swap.room, ws, 'user offline')\n\n    pipe(swap.room, ws, 'accept swap request')\n    pipe(swap.room, ws, 'decline swap request')\n\n    pipe(swap.orders, ws, 'new order request')\n\n    pipe(swap.orders, ws, 'new orders', orders => orders.map(cleanOrder))\n    pipe(swap.orders, ws, 'new order', payload => cleanOrder(payload))\n    pipe(swap.orders, ws, 'remove order', () => {})\n\n    const stopListening = () => {\n      swap.room.off('ready')\n      swap.room.off('user online')\n      swap.room.off('user offline')\n      swap.room.off('accept swap request')\n      swap.room.off('decline swap request')\n\n      swap.orders.off('new order')\n      swap.orders.off('new orders')\n      swap.orders.off('new order request')\n      swap.orders.off('remove order')\n    }\n\n    ws.on('close', stopListening)\n\n  })\n\n  server.listen(port || WS_PORT, () => {\n    console.log(`[WS] listening on port ${server.address().port}`)\n  })\n\n  return wss\n}\n\nmodule.exports = { init }\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst { Router } = require('express');\nconst router = new Router();\n\nconst orders = require('./orders');\nconst me = require('./me');\nconst swaps = require('./swaps');\nconst homepage = require('./homepage');\nconst kraken = require('./kraken');\nconst info = require('./info');\n\nrouter.use('/orders', orders);\nrouter.use('/me', me);\nrouter.use('/swaps', swaps);\nrouter.use('/kraken', kraken);\nrouter.use('/info', info);\nrouter.use('/', homepage);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlJvdXRlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJvcmRlcnMiLCJtZSIsInN3YXBzIiwiaG9tZXBhZ2UiLCJrcmFrZW4iLCJpbmZvIiwidXNlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLEVBQUVBLE1BQUYsS0FBYUMsUUFBUSxTQUFSLENBQW5CO0FBQ0EsTUFBTUMsU0FBUyxJQUFJRixNQUFKLEVBQWY7O0FBRUEsTUFBTUcsU0FBU0YsUUFBUSxVQUFSLENBQWY7QUFDQSxNQUFNRyxLQUFLSCxRQUFRLE1BQVIsQ0FBWDtBQUNBLE1BQU1JLFFBQVFKLFFBQVEsU0FBUixDQUFkO0FBQ0EsTUFBTUssV0FBV0wsUUFBUSxZQUFSLENBQWpCO0FBQ0EsTUFBTU0sU0FBU04sUUFBUSxVQUFSLENBQWY7QUFDQSxNQUFNTyxPQUFPUCxRQUFRLFFBQVIsQ0FBYjs7QUFFQUMsT0FBT08sR0FBUCxDQUFXLFNBQVgsRUFBc0JOLE1BQXRCO0FBQ0FELE9BQU9PLEdBQVAsQ0FBVyxLQUFYLEVBQWtCTCxFQUFsQjtBQUNBRixPQUFPTyxHQUFQLENBQVcsUUFBWCxFQUFxQkosS0FBckI7QUFDQUgsT0FBT08sR0FBUCxDQUFXLFNBQVgsRUFBc0JGLE1BQXRCO0FBQ0FMLE9BQU9PLEdBQVAsQ0FBVyxPQUFYLEVBQW9CRCxJQUFwQjtBQUNBTixPQUFPTyxHQUFQLENBQVcsR0FBWCxFQUFnQkgsUUFBaEI7O0FBR0FJLE9BQU9DLE9BQVAsR0FBaUJULE1BQWpCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3Qvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBSb3V0ZXIgfSA9IHJlcXVpcmUoJ2V4cHJlc3MnKVxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpXG5cbmNvbnN0IG9yZGVycyA9IHJlcXVpcmUoJy4vb3JkZXJzJylcbmNvbnN0IG1lID0gcmVxdWlyZSgnLi9tZScpXG5jb25zdCBzd2FwcyA9IHJlcXVpcmUoJy4vc3dhcHMnKVxuY29uc3QgaG9tZXBhZ2UgPSByZXF1aXJlKCcuL2hvbWVwYWdlJylcbmNvbnN0IGtyYWtlbiA9IHJlcXVpcmUoJy4va3Jha2VuJylcbmNvbnN0IGluZm8gPSByZXF1aXJlKCcuL2luZm8nKVxuXG5yb3V0ZXIudXNlKCcvb3JkZXJzJywgb3JkZXJzKVxucm91dGVyLnVzZSgnL21lJywgbWUpXG5yb3V0ZXIudXNlKCcvc3dhcHMnLCBzd2FwcylcbnJvdXRlci51c2UoJy9rcmFrZW4nLCBrcmFrZW4pXG5yb3V0ZXIudXNlKCcvaW5mbycsIGluZm8pXG5yb3V0ZXIudXNlKCcvJywgaG9tZXBhZ2UpXG5cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "orders",
        "me",
        "swaps",
        "homepage",
        "kraken",
        "info",
        "use",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,SAAR,CAAnB;AACA,MAAMC,SAAS,IAAIF,MAAJ,EAAf;;AAEA,MAAMG,SAASF,QAAQ,UAAR,CAAf;AACA,MAAMG,KAAKH,QAAQ,MAAR,CAAX;AACA,MAAMI,QAAQJ,QAAQ,SAAR,CAAd;AACA,MAAMK,WAAWL,QAAQ,YAAR,CAAjB;AACA,MAAMM,SAASN,QAAQ,UAAR,CAAf;AACA,MAAMO,OAAOP,QAAQ,QAAR,CAAb;;AAEAC,OAAOO,GAAP,CAAW,SAAX,EAAsBN,MAAtB;AACAD,OAAOO,GAAP,CAAW,KAAX,EAAkBL,EAAlB;AACAF,OAAOO,GAAP,CAAW,QAAX,EAAqBJ,KAArB;AACAH,OAAOO,GAAP,CAAW,SAAX,EAAsBF,MAAtB;AACAL,OAAOO,GAAP,CAAW,OAAX,EAAoBD,IAApB;AACAN,OAAOO,GAAP,CAAW,GAAX,EAAgBH,QAAhB;;AAGAI,OAAOC,OAAP,GAAiBT,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes",
      "sourcesContent": [
        "const { Router } = require('express')\nconst router = new Router()\n\nconst orders = require('./orders')\nconst me = require('./me')\nconst swaps = require('./swaps')\nconst homepage = require('./homepage')\nconst kraken = require('./kraken')\nconst info = require('./info')\n\nrouter.use('/orders', orders)\nrouter.use('/me', me)\nrouter.use('/swaps', swaps)\nrouter.use('/kraken', kraken)\nrouter.use('/info', info)\nrouter.use('/', homepage)\n\n\nmodule.exports = router\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/orders/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/orders\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/orders/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/orders/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/orders",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/orders",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst { Router } = require('express');\nconst router = new Router();\n\nconst {\n  listOrders,\n  listAllOrders,\n  listMyOrders,\n  listOthersOrders,\n  filterOrders,\n  requestedOrders,\n\n  // orderStatus,\n  getOrder,\n  createOrder,\n  deleteOrder,\n  deleteAllOrders,\n  forceDeleteAllOrders,\n\n  requestOrder,\n  acceptRequest,\n  requestPartialFulfilment\n} = require('./controller');\n\n// order list\nrouter.get('/', listOrders);\nrouter.get('/all', listAllOrders);\nrouter.get('/my', listMyOrders);\nrouter.get('/others', listOthersOrders);\nrouter.get('/search', filterOrders);\nrouter.get('/requests', requestedOrders);\n\n// create new order\nrouter.post('/', createOrder);\n\n// delete order(s)\nrouter.delete('/all', deleteAllOrders);\nrouter.get('/all/delete', deleteAllOrders);\nrouter.get('/all/force-delete', forceDeleteAllOrders);\nrouter.delete('/:id', deleteOrder);\nrouter.get('/:id/delete', deleteOrder);\n\n// actions with order\nrouter.get('/:id', getOrder);\n\n// request swap\nrouter.put('/:id', requestOrder);\nrouter.get('/:id/request', requestOrder);\nrouter.get('/:id/request-partial', requestPartialFulfilment);\n\n// incoming request to swap\nrouter.get('/:id/accept', acceptRequest);\nrouter.get('/:id/accept/:peer', acceptRequest);\nrouter.get('/:id/decline/:peer', acceptRequest);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlJvdXRlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJsaXN0T3JkZXJzIiwibGlzdEFsbE9yZGVycyIsImxpc3RNeU9yZGVycyIsImxpc3RPdGhlcnNPcmRlcnMiLCJmaWx0ZXJPcmRlcnMiLCJyZXF1ZXN0ZWRPcmRlcnMiLCJnZXRPcmRlciIsImNyZWF0ZU9yZGVyIiwiZGVsZXRlT3JkZXIiLCJkZWxldGVBbGxPcmRlcnMiLCJmb3JjZURlbGV0ZUFsbE9yZGVycyIsInJlcXVlc3RPcmRlciIsImFjY2VwdFJlcXVlc3QiLCJyZXF1ZXN0UGFydGlhbEZ1bGZpbG1lbnQiLCJnZXQiLCJwb3N0IiwiZGVsZXRlIiwicHV0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLEVBQUVBLE1BQUYsS0FBYUMsUUFBUSxTQUFSLENBQW5CO0FBQ0EsTUFBTUMsU0FBUyxJQUFJRixNQUFKLEVBQWY7O0FBRUEsTUFBTTtBQUNKRyxZQURJO0FBRUpDLGVBRkk7QUFHSkMsY0FISTtBQUlKQyxrQkFKSTtBQUtKQyxjQUxJO0FBTUpDLGlCQU5JOztBQVFKO0FBQ0FDLFVBVEk7QUFVSkMsYUFWSTtBQVdKQyxhQVhJO0FBWUpDLGlCQVpJO0FBYUpDLHNCQWJJOztBQWVKQyxjQWZJO0FBZ0JKQyxlQWhCSTtBQWlCSkM7QUFqQkksSUFrQkZmLFFBQVEsY0FBUixDQWxCSjs7QUFvQkE7QUFDQUMsT0FBT2UsR0FBUCxDQUFXLEdBQVgsRUFBZ0JkLFVBQWhCO0FBQ0FELE9BQU9lLEdBQVAsQ0FBVyxNQUFYLEVBQW1CYixhQUFuQjtBQUNBRixPQUFPZSxHQUFQLENBQVcsS0FBWCxFQUFrQlosWUFBbEI7QUFDQUgsT0FBT2UsR0FBUCxDQUFXLFNBQVgsRUFBc0JYLGdCQUF0QjtBQUNBSixPQUFPZSxHQUFQLENBQVcsU0FBWCxFQUFzQlYsWUFBdEI7QUFDQUwsT0FBT2UsR0FBUCxDQUFXLFdBQVgsRUFBd0JULGVBQXhCOztBQUVBO0FBQ0FOLE9BQU9nQixJQUFQLENBQVksR0FBWixFQUFpQlIsV0FBakI7O0FBRUE7QUFDQVIsT0FBT2lCLE1BQVAsQ0FBYyxNQUFkLEVBQXNCUCxlQUF0QjtBQUNBVixPQUFPZSxHQUFQLENBQVcsYUFBWCxFQUEwQkwsZUFBMUI7QUFDQVYsT0FBT2UsR0FBUCxDQUFXLG1CQUFYLEVBQWdDSixvQkFBaEM7QUFDQVgsT0FBT2lCLE1BQVAsQ0FBYyxNQUFkLEVBQXNCUixXQUF0QjtBQUNBVCxPQUFPZSxHQUFQLENBQVcsYUFBWCxFQUEwQk4sV0FBMUI7O0FBRUE7QUFDQVQsT0FBT2UsR0FBUCxDQUFXLE1BQVgsRUFBbUJSLFFBQW5COztBQUVBO0FBQ0FQLE9BQU9rQixHQUFQLENBQVcsTUFBWCxFQUFtQk4sWUFBbkI7QUFDQVosT0FBT2UsR0FBUCxDQUFXLGNBQVgsRUFBMkJILFlBQTNCO0FBQ0FaLE9BQU9lLEdBQVAsQ0FBVyxzQkFBWCxFQUFtQ0Qsd0JBQW5DOztBQUVBO0FBQ0FkLE9BQU9lLEdBQVAsQ0FBVyxhQUFYLEVBQTBCRixhQUExQjtBQUNBYixPQUFPZSxHQUFQLENBQVcsbUJBQVgsRUFBZ0NGLGFBQWhDO0FBQ0FiLE9BQU9lLEdBQVAsQ0FBVyxvQkFBWCxFQUFpQ0YsYUFBakM7O0FBRUFNLE9BQU9DLE9BQVAsR0FBaUJwQixNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9vcmRlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFJvdXRlciB9ID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKClcblxuY29uc3Qge1xuICBsaXN0T3JkZXJzLFxuICBsaXN0QWxsT3JkZXJzLFxuICBsaXN0TXlPcmRlcnMsXG4gIGxpc3RPdGhlcnNPcmRlcnMsXG4gIGZpbHRlck9yZGVycyxcbiAgcmVxdWVzdGVkT3JkZXJzLFxuXG4gIC8vIG9yZGVyU3RhdHVzLFxuICBnZXRPcmRlcixcbiAgY3JlYXRlT3JkZXIsXG4gIGRlbGV0ZU9yZGVyLFxuICBkZWxldGVBbGxPcmRlcnMsXG4gIGZvcmNlRGVsZXRlQWxsT3JkZXJzLFxuXG4gIHJlcXVlc3RPcmRlcixcbiAgYWNjZXB0UmVxdWVzdCxcbiAgcmVxdWVzdFBhcnRpYWxGdWxmaWxtZW50LFxufSA9IHJlcXVpcmUoJy4vY29udHJvbGxlcicpXG5cbi8vIG9yZGVyIGxpc3RcbnJvdXRlci5nZXQoJy8nLCBsaXN0T3JkZXJzKVxucm91dGVyLmdldCgnL2FsbCcsIGxpc3RBbGxPcmRlcnMpXG5yb3V0ZXIuZ2V0KCcvbXknLCBsaXN0TXlPcmRlcnMpXG5yb3V0ZXIuZ2V0KCcvb3RoZXJzJywgbGlzdE90aGVyc09yZGVycylcbnJvdXRlci5nZXQoJy9zZWFyY2gnLCBmaWx0ZXJPcmRlcnMpXG5yb3V0ZXIuZ2V0KCcvcmVxdWVzdHMnLCByZXF1ZXN0ZWRPcmRlcnMpXG5cbi8vIGNyZWF0ZSBuZXcgb3JkZXJcbnJvdXRlci5wb3N0KCcvJywgY3JlYXRlT3JkZXIpXG5cbi8vIGRlbGV0ZSBvcmRlcihzKVxucm91dGVyLmRlbGV0ZSgnL2FsbCcsIGRlbGV0ZUFsbE9yZGVycylcbnJvdXRlci5nZXQoJy9hbGwvZGVsZXRlJywgZGVsZXRlQWxsT3JkZXJzKVxucm91dGVyLmdldCgnL2FsbC9mb3JjZS1kZWxldGUnLCBmb3JjZURlbGV0ZUFsbE9yZGVycylcbnJvdXRlci5kZWxldGUoJy86aWQnLCBkZWxldGVPcmRlcilcbnJvdXRlci5nZXQoJy86aWQvZGVsZXRlJywgZGVsZXRlT3JkZXIpXG5cbi8vIGFjdGlvbnMgd2l0aCBvcmRlclxucm91dGVyLmdldCgnLzppZCcsIGdldE9yZGVyKVxuXG4vLyByZXF1ZXN0IHN3YXBcbnJvdXRlci5wdXQoJy86aWQnLCByZXF1ZXN0T3JkZXIpXG5yb3V0ZXIuZ2V0KCcvOmlkL3JlcXVlc3QnLCByZXF1ZXN0T3JkZXIpXG5yb3V0ZXIuZ2V0KCcvOmlkL3JlcXVlc3QtcGFydGlhbCcsIHJlcXVlc3RQYXJ0aWFsRnVsZmlsbWVudClcblxuLy8gaW5jb21pbmcgcmVxdWVzdCB0byBzd2FwXG5yb3V0ZXIuZ2V0KCcvOmlkL2FjY2VwdCcsIGFjY2VwdFJlcXVlc3QpXG5yb3V0ZXIuZ2V0KCcvOmlkL2FjY2VwdC86cGVlcicsIGFjY2VwdFJlcXVlc3QpXG5yb3V0ZXIuZ2V0KCcvOmlkL2RlY2xpbmUvOnBlZXInLCBhY2NlcHRSZXF1ZXN0KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "listOrders",
        "listAllOrders",
        "listMyOrders",
        "listOthersOrders",
        "filterOrders",
        "requestedOrders",
        "getOrder",
        "createOrder",
        "deleteOrder",
        "deleteAllOrders",
        "forceDeleteAllOrders",
        "requestOrder",
        "acceptRequest",
        "requestPartialFulfilment",
        "get",
        "post",
        "delete",
        "put",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,SAAR,CAAnB;AACA,MAAMC,SAAS,IAAIF,MAAJ,EAAf;;AAEA,MAAM;AACJG,YADI;AAEJC,eAFI;AAGJC,cAHI;AAIJC,kBAJI;AAKJC,cALI;AAMJC,iBANI;;AAQJ;AACAC,UATI;AAUJC,aAVI;AAWJC,aAXI;AAYJC,iBAZI;AAaJC,sBAbI;;AAeJC,cAfI;AAgBJC,eAhBI;AAiBJC;AAjBI,IAkBFf,QAAQ,cAAR,CAlBJ;;AAoBA;AACAC,OAAOe,GAAP,CAAW,GAAX,EAAgBd,UAAhB;AACAD,OAAOe,GAAP,CAAW,MAAX,EAAmBb,aAAnB;AACAF,OAAOe,GAAP,CAAW,KAAX,EAAkBZ,YAAlB;AACAH,OAAOe,GAAP,CAAW,SAAX,EAAsBX,gBAAtB;AACAJ,OAAOe,GAAP,CAAW,SAAX,EAAsBV,YAAtB;AACAL,OAAOe,GAAP,CAAW,WAAX,EAAwBT,eAAxB;;AAEA;AACAN,OAAOgB,IAAP,CAAY,GAAZ,EAAiBR,WAAjB;;AAEA;AACAR,OAAOiB,MAAP,CAAc,MAAd,EAAsBP,eAAtB;AACAV,OAAOe,GAAP,CAAW,aAAX,EAA0BL,eAA1B;AACAV,OAAOe,GAAP,CAAW,mBAAX,EAAgCJ,oBAAhC;AACAX,OAAOiB,MAAP,CAAc,MAAd,EAAsBR,WAAtB;AACAT,OAAOe,GAAP,CAAW,aAAX,EAA0BN,WAA1B;;AAEA;AACAT,OAAOe,GAAP,CAAW,MAAX,EAAmBR,QAAnB;;AAEA;AACAP,OAAOkB,GAAP,CAAW,MAAX,EAAmBN,YAAnB;AACAZ,OAAOe,GAAP,CAAW,cAAX,EAA2BH,YAA3B;AACAZ,OAAOe,GAAP,CAAW,sBAAX,EAAmCD,wBAAnC;;AAEA;AACAd,OAAOe,GAAP,CAAW,aAAX,EAA0BF,aAA1B;AACAb,OAAOe,GAAP,CAAW,mBAAX,EAAgCF,aAAhC;AACAb,OAAOe,GAAP,CAAW,oBAAX,EAAiCF,aAAjC;;AAEAM,OAAOC,OAAP,GAAiBpB,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/orders",
      "sourcesContent": [
        "const { Router } = require('express')\nconst router = new Router()\n\nconst {\n  listOrders,\n  listAllOrders,\n  listMyOrders,\n  listOthersOrders,\n  filterOrders,\n  requestedOrders,\n\n  // orderStatus,\n  getOrder,\n  createOrder,\n  deleteOrder,\n  deleteAllOrders,\n  forceDeleteAllOrders,\n\n  requestOrder,\n  acceptRequest,\n  requestPartialFulfilment,\n} = require('./controller')\n\n// order list\nrouter.get('/', listOrders)\nrouter.get('/all', listAllOrders)\nrouter.get('/my', listMyOrders)\nrouter.get('/others', listOthersOrders)\nrouter.get('/search', filterOrders)\nrouter.get('/requests', requestedOrders)\n\n// create new order\nrouter.post('/', createOrder)\n\n// delete order(s)\nrouter.delete('/all', deleteAllOrders)\nrouter.get('/all/delete', deleteAllOrders)\nrouter.get('/all/force-delete', forceDeleteAllOrders)\nrouter.delete('/:id', deleteOrder)\nrouter.get('/:id/delete', deleteOrder)\n\n// actions with order\nrouter.get('/:id', getOrder)\n\n// request swap\nrouter.put('/:id', requestOrder)\nrouter.get('/:id/request', requestOrder)\nrouter.get('/:id/request-partial', requestPartialFulfilment)\n\n// incoming request to swap\nrouter.get('/:id/accept', acceptRequest)\nrouter.get('/:id/accept/:peer', acceptRequest)\nrouter.get('/:id/decline/:peer', acceptRequest)\n\nmodule.exports = router\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/orders/controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/orders\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/orders/controller.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/orders/controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "controller.js",
      "sourceFileName": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/orders",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/orders",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "controller"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst { app, wallet } = require('../../swapApp');\n\nconst { findOrder, orderView } = require('../../helpers');\n\nlet orders;\nconst Orders = app.services.orders;\n\nconst listMyOrders = (req, res) => {\n\n  orders = Orders.getMyOrders().filter(order => !!order);\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst listOthersOrders = (req, res) => {\n  orders = Orders.items.filter(order => !!order);\n  orders = orders.filter(order => !order.isMy);\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst listOrders = (req, res) => {\n  orders = Orders.items.filter(order => !!order);\n  orders = Orders.items.filter(order => !order.isProcessing);\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst listAllOrders = (req, res) => {\n  orders = Orders.items.filter(order => !!order);\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst filterOrders = (req, res) => {\n  const peer = req.query.peer;\n  const isProcessing = req.query.isProcessing;\n\n  orders = Orders.items.filter(order => !!order);\n\n  if (peer !== undefined) orders = orders.filter(order => order.owner.peer == peer);\n\n  if (isProcessing === 'false' || isProcessing === 'true') {\n    const filterProcessing = isProcessing == 'true' ? true : false;\n    orders = orders.filter(order => order.isProcessing === filterProcessing);\n  }\n\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst requestedOrders = (req, res) => {\n  orders = Orders.items.filter(order => !!order);\n\n  orders = orders.filter(({ requests }) => requests.length);\n  orders = orders.map(orderView);\n\n  res.json(orders);\n};\n\nconst getOrder = (req, res) => {\n  findOrder(app)(req, res, order => res.json(orderView(order)));\n};\n\nconst createOrder = (req, res) => {\n  try {\n    const { buyCurrency, sellCurrency, buyAmount, sellAmount, exchangeRate } = req.body;\n    const data = { buyCurrency, sellCurrency, buyAmount, sellAmount, exchangeRate };\n\n    const order = Orders.create(data);\n    console.log(new Date().toISOString(), 'new order', data);\n\n    res.status(201).json(orderView(order));\n  } catch (err) {\n    res.status(400).json({ error: 'cant create ' + err });\n    throw err;\n  }\n};\n\nconst deleteOrder = (req, res) => {\n  try {\n    findOrder(app)(req, res, order => {\n      Orders.remove(order.id);\n      res.status(200).json({});\n    });\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err });\n    throw err;\n  }\n};\n\nconst deleteAllOrders = (req, res) => {\n  try {\n    Orders.getMyOrders().filter(order => !order.isProcessing).map(order => Orders.remove(order.id));\n\n    res.status(200).json({});\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err });\n    throw err;\n  }\n};\n\nconst forceDeleteAllOrders = (req, res) => {\n  try {\n    Orders.getMyOrders().map(order => Orders.remove(order.id));\n\n    res.status(200).json({});\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err });\n    throw err;\n  }\n};\n\nconst requestOrder = (req, res) => {\n  findOrder(app)(req, res, order => {\n    order.sendRequest(accepted => {\n      order.isAccepted = accepted;\n      console.log(new Date().toISOString(), 'accepted', accepted);\n      if (!accepted) return;\n      console.log(new Date().toISOString(), 'peer accepted order', orderView(order));\n    });\n\n    order.isAccepted = false;\n    res.json(orderView(order));\n  });\n};\n\nconst requestPartialFulfilment = (req, res) => {\n  const buyAmount = req.query.buyAmount;\n  const sellAmount = req.query.sellAmount;\n  const updatedOrder = { buyAmount, sellAmount };\n\n  if (!buyAmount && !sellAmount) return res.status(404).json({ error: 'no updatedOrder buyAmount or sellAmount given' });\n\n  findOrder(app)(req, res, order => {\n    order.sendRequestForPartial(updatedOrder, (newOrder, accepted) => {\n      console.log('accepted', accepted);\n      order.isAccepted = accepted;\n\n      if (!accepted) return res.status(400).json(orderView(newOrder || {}));\n\n      console.log(new Date().toISOString(), 'peer accepted order', orderView(newOrder));\n\n      res.json(orderView(newOrder));\n    }, newOrderId => true);\n  });\n};\n\nconst acceptRequest = (req, res) => {\n  findOrder(app)(req, res, order => {\n    let peer = req.params.peer;\n\n    if (order.requests.length == 1) peer = order.requests[0].peer;\n\n    if (!peer) return res.status(404).json({ error: 'no peer' });\n\n    order.acceptRequest(peer);\n\n    console.log(new Date().toISOString(), 'peer', peer);\n    console.log(new Date().toISOString(), 'accepting order', orderView(order));\n\n    res.json(orderView(order));\n  });\n};\n\nmodule.exports = {\n  filterOrders,\n  listOrders,\n  listAllOrders,\n  listMyOrders,\n  listOthersOrders,\n  requestedOrders,\n\n  getOrder,\n  createOrder,\n  deleteOrder,\n  deleteAllOrders,\n  forceDeleteAllOrders,\n\n  requestOrder,\n  acceptRequest,\n  requestPartialFulfilment\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYXBwIiwid2FsbGV0IiwicmVxdWlyZSIsImZpbmRPcmRlciIsIm9yZGVyVmlldyIsIm9yZGVycyIsIk9yZGVycyIsInNlcnZpY2VzIiwibGlzdE15T3JkZXJzIiwicmVxIiwicmVzIiwiZ2V0TXlPcmRlcnMiLCJmaWx0ZXIiLCJvcmRlciIsIm1hcCIsImpzb24iLCJsaXN0T3RoZXJzT3JkZXJzIiwiaXRlbXMiLCJpc015IiwibGlzdE9yZGVycyIsImlzUHJvY2Vzc2luZyIsImxpc3RBbGxPcmRlcnMiLCJmaWx0ZXJPcmRlcnMiLCJwZWVyIiwicXVlcnkiLCJ1bmRlZmluZWQiLCJvd25lciIsImZpbHRlclByb2Nlc3NpbmciLCJyZXF1ZXN0ZWRPcmRlcnMiLCJyZXF1ZXN0cyIsImxlbmd0aCIsImdldE9yZGVyIiwiY3JlYXRlT3JkZXIiLCJidXlDdXJyZW5jeSIsInNlbGxDdXJyZW5jeSIsImJ1eUFtb3VudCIsInNlbGxBbW91bnQiLCJleGNoYW5nZVJhdGUiLCJib2R5IiwiZGF0YSIsImNyZWF0ZSIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdGF0dXMiLCJlcnIiLCJlcnJvciIsImRlbGV0ZU9yZGVyIiwicmVtb3ZlIiwiaWQiLCJkZWxldGVBbGxPcmRlcnMiLCJmb3JjZURlbGV0ZUFsbE9yZGVycyIsInJlcXVlc3RPcmRlciIsInNlbmRSZXF1ZXN0IiwiYWNjZXB0ZWQiLCJpc0FjY2VwdGVkIiwicmVxdWVzdFBhcnRpYWxGdWxmaWxtZW50IiwidXBkYXRlZE9yZGVyIiwic2VuZFJlcXVlc3RGb3JQYXJ0aWFsIiwibmV3T3JkZXIiLCJuZXdPcmRlcklkIiwiYWNjZXB0UmVxdWVzdCIsInBhcmFtcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxFQUFFQSxHQUFGLEVBQU9DLE1BQVAsS0FBa0JDLFFBQVEsZUFBUixDQUF4Qjs7QUFFQSxNQUFNLEVBQUVDLFNBQUYsRUFBYUMsU0FBYixLQUEyQkYsUUFBUSxlQUFSLENBQWpDOztBQUVBLElBQUlHLE1BQUo7QUFDQSxNQUFNQyxTQUFTTixJQUFJTyxRQUFKLENBQWFGLE1BQTVCOztBQUVBLE1BQU1HLGVBQWUsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEtBQWM7O0FBRWpDTCxXQUFTQyxPQUFPSyxXQUFQLEdBQXFCQyxNQUFyQixDQUE2QkMsU0FBUyxDQUFDLENBQUNBLEtBQXhDLENBQVQ7QUFDQVIsV0FBU0EsT0FBT1MsR0FBUCxDQUFXVixTQUFYLENBQVQ7O0FBRUFNLE1BQUlLLElBQUosQ0FBU1YsTUFBVDtBQUNELENBTkQ7O0FBUUEsTUFBTVcsbUJBQW1CLENBQUNQLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3JDTCxXQUFTQyxPQUFPVyxLQUFQLENBQWFMLE1BQWIsQ0FBcUJDLFNBQVMsQ0FBQyxDQUFDQSxLQUFoQyxDQUFUO0FBQ0FSLFdBQVNBLE9BQU9PLE1BQVAsQ0FBZUMsU0FBUyxDQUFDQSxNQUFNSyxJQUEvQixDQUFUO0FBQ0FiLFdBQVNBLE9BQU9TLEdBQVAsQ0FBV1YsU0FBWCxDQUFUOztBQUVBTSxNQUFJSyxJQUFKLENBQVNWLE1BQVQ7QUFDRCxDQU5EOztBQVFBLE1BQU1jLGFBQWEsQ0FBQ1YsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDL0JMLFdBQVNDLE9BQU9XLEtBQVAsQ0FBYUwsTUFBYixDQUFxQkMsU0FBUyxDQUFDLENBQUNBLEtBQWhDLENBQVQ7QUFDQVIsV0FBU0MsT0FBT1csS0FBUCxDQUFhTCxNQUFiLENBQXFCQyxTQUFTLENBQUNBLE1BQU1PLFlBQXJDLENBQVQ7QUFDQWYsV0FBU0EsT0FBT1MsR0FBUCxDQUFXVixTQUFYLENBQVQ7O0FBRUFNLE1BQUlLLElBQUosQ0FBU1YsTUFBVDtBQUNELENBTkQ7O0FBUUEsTUFBTWdCLGdCQUFnQixDQUFDWixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNsQ0wsV0FBU0MsT0FBT1csS0FBUCxDQUFhTCxNQUFiLENBQXFCQyxTQUFTLENBQUMsQ0FBQ0EsS0FBaEMsQ0FBVDtBQUNBUixXQUFTQSxPQUFPUyxHQUFQLENBQVdWLFNBQVgsQ0FBVDs7QUFFQU0sTUFBSUssSUFBSixDQUFTVixNQUFUO0FBQ0QsQ0FMRDs7QUFPQSxNQUFNaUIsZUFBZSxDQUFDYixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNqQyxRQUFNYSxPQUFPZCxJQUFJZSxLQUFKLENBQVVELElBQXZCO0FBQ0EsUUFBTUgsZUFBZVgsSUFBSWUsS0FBSixDQUFVSixZQUEvQjs7QUFFQWYsV0FBU0MsT0FBT1csS0FBUCxDQUFhTCxNQUFiLENBQXFCQyxTQUFTLENBQUMsQ0FBQ0EsS0FBaEMsQ0FBVDs7QUFFQSxNQUFJVSxTQUFTRSxTQUFiLEVBQ0VwQixTQUFTQSxPQUFPTyxNQUFQLENBQWVDLFNBQVNBLE1BQU1hLEtBQU4sQ0FBWUgsSUFBWixJQUFvQkEsSUFBNUMsQ0FBVDs7QUFFRixNQUFJSCxpQkFBaUIsT0FBakIsSUFBNEJBLGlCQUFpQixNQUFqRCxFQUF5RDtBQUN2RCxVQUFNTyxtQkFBbUJQLGdCQUFnQixNQUFoQixHQUF5QixJQUF6QixHQUFnQyxLQUF6RDtBQUNBZixhQUFTQSxPQUFPTyxNQUFQLENBQWVDLFNBQVNBLE1BQU1PLFlBQU4sS0FBdUJPLGdCQUEvQyxDQUFUO0FBQ0Q7O0FBRUR0QixXQUFTQSxPQUFPUyxHQUFQLENBQVdWLFNBQVgsQ0FBVDs7QUFFQU0sTUFBSUssSUFBSixDQUFTVixNQUFUO0FBQ0QsQ0FqQkQ7O0FBbUJBLE1BQU11QixrQkFBa0IsQ0FBQ25CLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3BDTCxXQUFTQyxPQUFPVyxLQUFQLENBQWFMLE1BQWIsQ0FBcUJDLFNBQVMsQ0FBQyxDQUFDQSxLQUFoQyxDQUFUOztBQUVBUixXQUFTQSxPQUFPTyxNQUFQLENBQWUsQ0FBQyxFQUFFaUIsUUFBRixFQUFELEtBQWtCQSxTQUFTQyxNQUExQyxDQUFUO0FBQ0F6QixXQUFTQSxPQUFPUyxHQUFQLENBQVdWLFNBQVgsQ0FBVDs7QUFFQU0sTUFBSUssSUFBSixDQUFTVixNQUFUO0FBQ0QsQ0FQRDs7QUFTQSxNQUFNMEIsV0FBVyxDQUFDdEIsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDN0JQLFlBQVVILEdBQVYsRUFBZVMsR0FBZixFQUFvQkMsR0FBcEIsRUFBMEJHLEtBQUQsSUFBV0gsSUFBSUssSUFBSixDQUFTWCxVQUFVUyxLQUFWLENBQVQsQ0FBcEM7QUFDRCxDQUZEOztBQUlBLE1BQU1tQixjQUFjLENBQUN2QixHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQyxNQUFJO0FBQ0YsVUFBTSxFQUFFdUIsV0FBRixFQUFlQyxZQUFmLEVBQTZCQyxTQUE3QixFQUF3Q0MsVUFBeEMsRUFBb0RDLFlBQXBELEtBQXFFNUIsSUFBSTZCLElBQS9FO0FBQ0EsVUFBTUMsT0FBTyxFQUFFTixXQUFGLEVBQWVDLFlBQWYsRUFBOEJDLFNBQTlCLEVBQXlDQyxVQUF6QyxFQUFxREMsWUFBckQsRUFBYjs7QUFFQSxVQUFNeEIsUUFBUVAsT0FBT2tDLE1BQVAsQ0FBY0QsSUFBZCxDQUFkO0FBQ0FFLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxXQUF0QyxFQUFtREwsSUFBbkQ7O0FBRUE3QixRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQlgsVUFBVVMsS0FBVixDQUFyQjtBQUNELEdBUkQsQ0FRRSxPQUFPaUMsR0FBUCxFQUFZO0FBQ1pwQyxRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQixFQUFFZ0MsT0FBTyxpQkFBaUJELEdBQTFCLEVBQXJCO0FBQ0EsVUFBTUEsR0FBTjtBQUNEO0FBQ0YsQ0FiRDs7QUFlQSxNQUFNRSxjQUFjLENBQUN2QyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNoQyxNQUFJO0FBQ0ZQLGNBQVVILEdBQVYsRUFBZVMsR0FBZixFQUFvQkMsR0FBcEIsRUFBMEJHLEtBQUQsSUFBVztBQUNsQ1AsYUFBTzJDLE1BQVAsQ0FBY3BDLE1BQU1xQyxFQUFwQjtBQUNBeEMsVUFBSW1DLE1BQUosQ0FBVyxHQUFYLEVBQWdCOUIsSUFBaEIsQ0FBcUIsRUFBckI7QUFDRCxLQUhEO0FBSUQsR0FMRCxDQUtFLE9BQU8rQixHQUFQLEVBQVk7QUFDWnBDLFFBQUltQyxNQUFKLENBQVcsR0FBWCxFQUFnQjlCLElBQWhCLENBQXFCLEVBQUVnQyxPQUFPLGlCQUFpQkQsR0FBMUIsRUFBckI7QUFDQSxVQUFNQSxHQUFOO0FBQ0Q7QUFDRixDQVZEOztBQVlBLE1BQU1LLGtCQUFrQixDQUFDMUMsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDcEMsTUFBSTtBQUNGSixXQUFPSyxXQUFQLEdBQ0dDLE1BREgsQ0FDV0MsU0FBUyxDQUFDQSxNQUFNTyxZQUQzQixFQUVHTixHQUZILENBRVFELFNBQVNQLE9BQU8yQyxNQUFQLENBQWNwQyxNQUFNcUMsRUFBcEIsQ0FGakI7O0FBSUF4QyxRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQixFQUFyQjtBQUNELEdBTkQsQ0FNRSxPQUFPK0IsR0FBUCxFQUFZO0FBQ1pwQyxRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQixFQUFFZ0MsT0FBTyxpQkFBaUJELEdBQTFCLEVBQXJCO0FBQ0EsVUFBTUEsR0FBTjtBQUNEO0FBQ0YsQ0FYRDs7QUFhQSxNQUFNTSx1QkFBdUIsQ0FBQzNDLEdBQUQsRUFBTUMsR0FBTixLQUFjO0FBQ3pDLE1BQUk7QUFDRkosV0FBT0ssV0FBUCxHQUNHRyxHQURILENBQ1FELFNBQVNQLE9BQU8yQyxNQUFQLENBQWNwQyxNQUFNcUMsRUFBcEIsQ0FEakI7O0FBR0F4QyxRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQixFQUFyQjtBQUNELEdBTEQsQ0FLRSxPQUFPK0IsR0FBUCxFQUFZO0FBQ1pwQyxRQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQixFQUFFZ0MsT0FBTyxpQkFBaUJELEdBQTFCLEVBQXJCO0FBQ0EsVUFBTUEsR0FBTjtBQUNEO0FBQ0YsQ0FWRDs7QUFhQSxNQUFNTyxlQUFlLENBQUM1QyxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNqQ1AsWUFBVUgsR0FBVixFQUFlUyxHQUFmLEVBQW9CQyxHQUFwQixFQUEwQkcsS0FBRCxJQUFXO0FBQ2xDQSxVQUFNeUMsV0FBTixDQUFtQkMsWUFBWTtBQUM3QjFDLFlBQU0yQyxVQUFOLEdBQW1CRCxRQUFuQjtBQUNBZCxjQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBc0MsVUFBdEMsRUFBa0RXLFFBQWxEO0FBQ0EsVUFBSSxDQUFDQSxRQUFMLEVBQWU7QUFDZmQsY0FBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXNDLHFCQUF0QyxFQUE2RHhDLFVBQVVTLEtBQVYsQ0FBN0Q7QUFDRCxLQUxEOztBQU9BQSxVQUFNMkMsVUFBTixHQUFtQixLQUFuQjtBQUNBOUMsUUFBSUssSUFBSixDQUFTWCxVQUFVUyxLQUFWLENBQVQ7QUFDRCxHQVZEO0FBV0QsQ0FaRDs7QUFjQSxNQUFNNEMsMkJBQTJCLENBQUNoRCxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUM3QyxRQUFNeUIsWUFBWTFCLElBQUllLEtBQUosQ0FBVVcsU0FBNUI7QUFDQSxRQUFNQyxhQUFhM0IsSUFBSWUsS0FBSixDQUFVWSxVQUE3QjtBQUNBLFFBQU1zQixlQUFlLEVBQUV2QixTQUFGLEVBQWFDLFVBQWIsRUFBckI7O0FBRUEsTUFBRyxDQUFDRCxTQUFELElBQWMsQ0FBQ0MsVUFBbEIsRUFDRSxPQUFPMUIsSUFBSW1DLE1BQUosQ0FBVyxHQUFYLEVBQWdCOUIsSUFBaEIsQ0FBcUIsRUFBRWdDLE9BQU8sK0NBQVQsRUFBckIsQ0FBUDs7QUFFRjVDLFlBQVVILEdBQVYsRUFBZVMsR0FBZixFQUFvQkMsR0FBcEIsRUFBMEJHLEtBQUQsSUFBVztBQUNsQ0EsVUFBTThDLHFCQUFOLENBQTRCRCxZQUE1QixFQUEwQyxDQUFDRSxRQUFELEVBQVdMLFFBQVgsS0FBd0I7QUFDaEVkLGNBQVFDLEdBQVIsQ0FBWSxVQUFaLEVBQXdCYSxRQUF4QjtBQUNBMUMsWUFBTTJDLFVBQU4sR0FBbUJELFFBQW5COztBQUVBLFVBQUksQ0FBQ0EsUUFBTCxFQUFlLE9BQU83QyxJQUFJbUMsTUFBSixDQUFXLEdBQVgsRUFBZ0I5QixJQUFoQixDQUFxQlgsVUFBVXdELFlBQVksRUFBdEIsQ0FBckIsQ0FBUDs7QUFFZm5CLGNBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxxQkFBdEMsRUFBNkR4QyxVQUFVd0QsUUFBVixDQUE3RDs7QUFFQWxELFVBQUlLLElBQUosQ0FBU1gsVUFBVXdELFFBQVYsQ0FBVDtBQUNELEtBVEQsRUFTR0MsY0FBYyxJQVRqQjtBQVVELEdBWEQ7QUFZRCxDQXBCRDs7QUFzQkEsTUFBTUMsZ0JBQWdCLENBQUNyRCxHQUFELEVBQU1DLEdBQU4sS0FBYztBQUNsQ1AsWUFBVUgsR0FBVixFQUFlUyxHQUFmLEVBQW9CQyxHQUFwQixFQUEwQkcsS0FBRCxJQUFXO0FBQ2xDLFFBQUlVLE9BQU9kLElBQUlzRCxNQUFKLENBQVd4QyxJQUF0Qjs7QUFFQSxRQUFJVixNQUFNZ0IsUUFBTixDQUFlQyxNQUFmLElBQXlCLENBQTdCLEVBQ0VQLE9BQU9WLE1BQU1nQixRQUFOLENBQWUsQ0FBZixFQUFrQk4sSUFBekI7O0FBRUYsUUFBSSxDQUFDQSxJQUFMLEVBQ0UsT0FBT2IsSUFBSW1DLE1BQUosQ0FBVyxHQUFYLEVBQWdCOUIsSUFBaEIsQ0FBcUIsRUFBRWdDLE9BQU8sU0FBVCxFQUFyQixDQUFQOztBQUVGbEMsVUFBTWlELGFBQU4sQ0FBb0J2QyxJQUFwQjs7QUFFQWtCLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxNQUF0QyxFQUE4Q3JCLElBQTlDO0FBQ0FrQixZQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBc0MsaUJBQXRDLEVBQXlEeEMsVUFBVVMsS0FBVixDQUF6RDs7QUFFQUgsUUFBSUssSUFBSixDQUFTWCxVQUFVUyxLQUFWLENBQVQ7QUFDRCxHQWZEO0FBZ0JELENBakJEOztBQW1CQW1ELE9BQU9DLE9BQVAsR0FBaUI7QUFDZjNDLGNBRGU7QUFFZkgsWUFGZTtBQUdmRSxlQUhlO0FBSWZiLGNBSmU7QUFLZlEsa0JBTGU7QUFNZlksaUJBTmU7O0FBUWZHLFVBUmU7QUFTZkMsYUFUZTtBQVVmZ0IsYUFWZTtBQVdmRyxpQkFYZTtBQVlmQyxzQkFaZTs7QUFjZkMsY0FkZTtBQWVmUyxlQWZlO0FBZ0JmTDtBQWhCZSxDQUFqQiIsImZpbGUiOiJjb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3Qvcm91dGVzL29yZGVycyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgYXBwLCB3YWxsZXQgfSA9IHJlcXVpcmUoJy4uLy4uL3N3YXBBcHAnKVxuXG5jb25zdCB7IGZpbmRPcmRlciwgb3JkZXJWaWV3IH0gPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzJylcblxubGV0IG9yZGVyc1xuY29uc3QgT3JkZXJzID0gYXBwLnNlcnZpY2VzLm9yZGVyc1xuXG5jb25zdCBsaXN0TXlPcmRlcnMgPSAocmVxLCByZXMpID0+IHtcblxuICBvcmRlcnMgPSBPcmRlcnMuZ2V0TXlPcmRlcnMoKS5maWx0ZXIoIG9yZGVyID0+ICEhb3JkZXIgKVxuICBvcmRlcnMgPSBvcmRlcnMubWFwKG9yZGVyVmlldylcblxuICByZXMuanNvbihvcmRlcnMpXG59XG5cbmNvbnN0IGxpc3RPdGhlcnNPcmRlcnMgPSAocmVxLCByZXMpID0+IHtcbiAgb3JkZXJzID0gT3JkZXJzLml0ZW1zLmZpbHRlciggb3JkZXIgPT4gISFvcmRlciApXG4gIG9yZGVycyA9IG9yZGVycy5maWx0ZXIoIG9yZGVyID0+ICFvcmRlci5pc015IClcbiAgb3JkZXJzID0gb3JkZXJzLm1hcChvcmRlclZpZXcpXG5cbiAgcmVzLmpzb24ob3JkZXJzKVxufVxuXG5jb25zdCBsaXN0T3JkZXJzID0gKHJlcSwgcmVzKSA9PiB7XG4gIG9yZGVycyA9IE9yZGVycy5pdGVtcy5maWx0ZXIoIG9yZGVyID0+ICEhb3JkZXIgKVxuICBvcmRlcnMgPSBPcmRlcnMuaXRlbXMuZmlsdGVyKCBvcmRlciA9PiAhb3JkZXIuaXNQcm9jZXNzaW5nIClcbiAgb3JkZXJzID0gb3JkZXJzLm1hcChvcmRlclZpZXcpXG5cbiAgcmVzLmpzb24ob3JkZXJzKVxufVxuXG5jb25zdCBsaXN0QWxsT3JkZXJzID0gKHJlcSwgcmVzKSA9PiB7XG4gIG9yZGVycyA9IE9yZGVycy5pdGVtcy5maWx0ZXIoIG9yZGVyID0+ICEhb3JkZXIgKVxuICBvcmRlcnMgPSBvcmRlcnMubWFwKG9yZGVyVmlldylcblxuICByZXMuanNvbihvcmRlcnMpXG59XG5cbmNvbnN0IGZpbHRlck9yZGVycyA9IChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwZWVyID0gcmVxLnF1ZXJ5LnBlZXJcbiAgY29uc3QgaXNQcm9jZXNzaW5nID0gcmVxLnF1ZXJ5LmlzUHJvY2Vzc2luZ1xuXG4gIG9yZGVycyA9IE9yZGVycy5pdGVtcy5maWx0ZXIoIG9yZGVyID0+ICEhb3JkZXIgKVxuXG4gIGlmIChwZWVyICE9PSB1bmRlZmluZWQpXG4gICAgb3JkZXJzID0gb3JkZXJzLmZpbHRlciggb3JkZXIgPT4gb3JkZXIub3duZXIucGVlciA9PSBwZWVyKVxuXG4gIGlmIChpc1Byb2Nlc3NpbmcgPT09ICdmYWxzZScgfHwgaXNQcm9jZXNzaW5nID09PSAndHJ1ZScpIHtcbiAgICBjb25zdCBmaWx0ZXJQcm9jZXNzaW5nID0gaXNQcm9jZXNzaW5nID09ICd0cnVlJyA/IHRydWUgOiBmYWxzZVxuICAgIG9yZGVycyA9IG9yZGVycy5maWx0ZXIoIG9yZGVyID0+IG9yZGVyLmlzUHJvY2Vzc2luZyA9PT0gZmlsdGVyUHJvY2Vzc2luZylcbiAgfVxuXG4gIG9yZGVycyA9IG9yZGVycy5tYXAob3JkZXJWaWV3KVxuXG4gIHJlcy5qc29uKG9yZGVycylcbn1cblxuY29uc3QgcmVxdWVzdGVkT3JkZXJzID0gKHJlcSwgcmVzKSA9PiB7XG4gIG9yZGVycyA9IE9yZGVycy5pdGVtcy5maWx0ZXIoIG9yZGVyID0+ICEhb3JkZXIgKVxuXG4gIG9yZGVycyA9IG9yZGVycy5maWx0ZXIoICh7IHJlcXVlc3RzIH0pID0+IHJlcXVlc3RzLmxlbmd0aCApXG4gIG9yZGVycyA9IG9yZGVycy5tYXAob3JkZXJWaWV3KVxuXG4gIHJlcy5qc29uKG9yZGVycylcbn1cblxuY29uc3QgZ2V0T3JkZXIgPSAocmVxLCByZXMpID0+IHtcbiAgZmluZE9yZGVyKGFwcCkocmVxLCByZXMsIChvcmRlcikgPT4gcmVzLmpzb24ob3JkZXJWaWV3KG9yZGVyKSkpXG59XG5cbmNvbnN0IGNyZWF0ZU9yZGVyID0gKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBidXlDdXJyZW5jeSwgc2VsbEN1cnJlbmN5LCBidXlBbW91bnQsIHNlbGxBbW91bnQsIGV4Y2hhbmdlUmF0ZSB9ID0gcmVxLmJvZHlcbiAgICBjb25zdCBkYXRhID0geyBidXlDdXJyZW5jeSwgc2VsbEN1cnJlbmN5LCAgYnV5QW1vdW50LCBzZWxsQW1vdW50LCBleGNoYW5nZVJhdGUgfVxuXG4gICAgY29uc3Qgb3JkZXIgPSBPcmRlcnMuY3JlYXRlKGRhdGEpXG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAnbmV3IG9yZGVyJywgZGF0YSlcblxuICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG9yZGVyVmlldyhvcmRlcikpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdjYW50IGNyZWF0ZSAnICsgZXJyIH0pXG4gICAgdGhyb3cgZXJyXG4gIH1cbn1cblxuY29uc3QgZGVsZXRlT3JkZXIgPSAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBmaW5kT3JkZXIoYXBwKShyZXEsIHJlcywgKG9yZGVyKSA9PiB7XG4gICAgICBPcmRlcnMucmVtb3ZlKG9yZGVyLmlkKVxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ2NhbnQgZGVsZXRlICcgKyBlcnIgfSlcbiAgICB0aHJvdyBlcnJcbiAgfVxufVxuXG5jb25zdCBkZWxldGVBbGxPcmRlcnMgPSAocmVxLCByZXMpID0+IHtcbiAgdHJ5IHtcbiAgICBPcmRlcnMuZ2V0TXlPcmRlcnMoKVxuICAgICAgLmZpbHRlciggb3JkZXIgPT4gIW9yZGVyLmlzUHJvY2Vzc2luZyApXG4gICAgICAubWFwKCBvcmRlciA9PiBPcmRlcnMucmVtb3ZlKG9yZGVyLmlkKSlcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHt9KVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnY2FudCBkZWxldGUgJyArIGVyciB9KVxuICAgIHRocm93IGVyclxuICB9XG59XG5cbmNvbnN0IGZvcmNlRGVsZXRlQWxsT3JkZXJzID0gKHJlcSwgcmVzKSA9PiB7XG4gIHRyeSB7XG4gICAgT3JkZXJzLmdldE15T3JkZXJzKClcbiAgICAgIC5tYXAoIG9yZGVyID0+IE9yZGVycy5yZW1vdmUob3JkZXIuaWQpKVxuXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oe30pXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdjYW50IGRlbGV0ZSAnICsgZXJyIH0pXG4gICAgdGhyb3cgZXJyXG4gIH1cbn1cblxuXG5jb25zdCByZXF1ZXN0T3JkZXIgPSAocmVxLCByZXMpID0+IHtcbiAgZmluZE9yZGVyKGFwcCkocmVxLCByZXMsIChvcmRlcikgPT4ge1xuICAgIG9yZGVyLnNlbmRSZXF1ZXN0KCBhY2NlcHRlZCA9PiB7XG4gICAgICBvcmRlci5pc0FjY2VwdGVkID0gYWNjZXB0ZWRcbiAgICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgJ2FjY2VwdGVkJywgYWNjZXB0ZWQpXG4gICAgICBpZiAoIWFjY2VwdGVkKSByZXR1cm5cbiAgICAgIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgJ3BlZXIgYWNjZXB0ZWQgb3JkZXInLCBvcmRlclZpZXcob3JkZXIpKVxuICAgIH0pXG5cbiAgICBvcmRlci5pc0FjY2VwdGVkID0gZmFsc2VcbiAgICByZXMuanNvbihvcmRlclZpZXcob3JkZXIpKVxuICB9KVxufVxuXG5jb25zdCByZXF1ZXN0UGFydGlhbEZ1bGZpbG1lbnQgPSAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgYnV5QW1vdW50ID0gcmVxLnF1ZXJ5LmJ1eUFtb3VudFxuICBjb25zdCBzZWxsQW1vdW50ID0gcmVxLnF1ZXJ5LnNlbGxBbW91bnRcbiAgY29uc3QgdXBkYXRlZE9yZGVyID0geyBidXlBbW91bnQsIHNlbGxBbW91bnQgfVxuXG4gIGlmKCFidXlBbW91bnQgJiYgIXNlbGxBbW91bnQpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdubyB1cGRhdGVkT3JkZXIgYnV5QW1vdW50IG9yIHNlbGxBbW91bnQgZ2l2ZW4nIH0pXG5cbiAgZmluZE9yZGVyKGFwcCkocmVxLCByZXMsIChvcmRlcikgPT4ge1xuICAgIG9yZGVyLnNlbmRSZXF1ZXN0Rm9yUGFydGlhbCh1cGRhdGVkT3JkZXIsIChuZXdPcmRlciwgYWNjZXB0ZWQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdhY2NlcHRlZCcsIGFjY2VwdGVkKVxuICAgICAgb3JkZXIuaXNBY2NlcHRlZCA9IGFjY2VwdGVkXG5cbiAgICAgIGlmICghYWNjZXB0ZWQpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihvcmRlclZpZXcobmV3T3JkZXIgfHwge30pKVxuXG4gICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdwZWVyIGFjY2VwdGVkIG9yZGVyJywgb3JkZXJWaWV3KG5ld09yZGVyKSlcblxuICAgICAgcmVzLmpzb24ob3JkZXJWaWV3KG5ld09yZGVyKSlcbiAgICB9LCBuZXdPcmRlcklkID0+IHRydWUpXG4gIH0pXG59XG5cbmNvbnN0IGFjY2VwdFJlcXVlc3QgPSAocmVxLCByZXMpID0+IHtcbiAgZmluZE9yZGVyKGFwcCkocmVxLCByZXMsIChvcmRlcikgPT4ge1xuICAgIGxldCBwZWVyID0gcmVxLnBhcmFtcy5wZWVyXG5cbiAgICBpZiAob3JkZXIucmVxdWVzdHMubGVuZ3RoID09IDEpXG4gICAgICBwZWVyID0gb3JkZXIucmVxdWVzdHNbMF0ucGVlclxuXG4gICAgaWYgKCFwZWVyKVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdubyBwZWVyJyB9KVxuXG4gICAgb3JkZXIuYWNjZXB0UmVxdWVzdChwZWVyKVxuXG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAncGVlcicsIHBlZXIpXG4gICAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAnYWNjZXB0aW5nIG9yZGVyJywgb3JkZXJWaWV3KG9yZGVyKSlcblxuICAgIHJlcy5qc29uKG9yZGVyVmlldyhvcmRlcikpXG4gIH0pXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBmaWx0ZXJPcmRlcnMsXG4gIGxpc3RPcmRlcnMsXG4gIGxpc3RBbGxPcmRlcnMsXG4gIGxpc3RNeU9yZGVycyxcbiAgbGlzdE90aGVyc09yZGVycyxcbiAgcmVxdWVzdGVkT3JkZXJzLFxuXG4gIGdldE9yZGVyLFxuICBjcmVhdGVPcmRlcixcbiAgZGVsZXRlT3JkZXIsXG4gIGRlbGV0ZUFsbE9yZGVycyxcbiAgZm9yY2VEZWxldGVBbGxPcmRlcnMsXG5cbiAgcmVxdWVzdE9yZGVyLFxuICBhY2NlcHRSZXF1ZXN0LFxuICByZXF1ZXN0UGFydGlhbEZ1bGZpbG1lbnQsXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "app",
        "wallet",
        "require",
        "findOrder",
        "orderView",
        "orders",
        "Orders",
        "services",
        "listMyOrders",
        "req",
        "res",
        "getMyOrders",
        "filter",
        "order",
        "map",
        "json",
        "listOthersOrders",
        "items",
        "isMy",
        "listOrders",
        "isProcessing",
        "listAllOrders",
        "filterOrders",
        "peer",
        "query",
        "undefined",
        "owner",
        "filterProcessing",
        "requestedOrders",
        "requests",
        "length",
        "getOrder",
        "createOrder",
        "buyCurrency",
        "sellCurrency",
        "buyAmount",
        "sellAmount",
        "exchangeRate",
        "body",
        "data",
        "create",
        "console",
        "log",
        "Date",
        "toISOString",
        "status",
        "err",
        "error",
        "deleteOrder",
        "remove",
        "id",
        "deleteAllOrders",
        "forceDeleteAllOrders",
        "requestOrder",
        "sendRequest",
        "accepted",
        "isAccepted",
        "requestPartialFulfilment",
        "updatedOrder",
        "sendRequestForPartial",
        "newOrder",
        "newOrderId",
        "acceptRequest",
        "params",
        "module",
        "exports"
      ],
      "mappings": "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",
      "file": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/orders",
      "sourcesContent": [
        "const { app, wallet } = require('../../swapApp')\n\nconst { findOrder, orderView } = require('../../helpers')\n\nlet orders\nconst Orders = app.services.orders\n\nconst listMyOrders = (req, res) => {\n\n  orders = Orders.getMyOrders().filter( order => !!order )\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst listOthersOrders = (req, res) => {\n  orders = Orders.items.filter( order => !!order )\n  orders = orders.filter( order => !order.isMy )\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst listOrders = (req, res) => {\n  orders = Orders.items.filter( order => !!order )\n  orders = Orders.items.filter( order => !order.isProcessing )\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst listAllOrders = (req, res) => {\n  orders = Orders.items.filter( order => !!order )\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst filterOrders = (req, res) => {\n  const peer = req.query.peer\n  const isProcessing = req.query.isProcessing\n\n  orders = Orders.items.filter( order => !!order )\n\n  if (peer !== undefined)\n    orders = orders.filter( order => order.owner.peer == peer)\n\n  if (isProcessing === 'false' || isProcessing === 'true') {\n    const filterProcessing = isProcessing == 'true' ? true : false\n    orders = orders.filter( order => order.isProcessing === filterProcessing)\n  }\n\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst requestedOrders = (req, res) => {\n  orders = Orders.items.filter( order => !!order )\n\n  orders = orders.filter( ({ requests }) => requests.length )\n  orders = orders.map(orderView)\n\n  res.json(orders)\n}\n\nconst getOrder = (req, res) => {\n  findOrder(app)(req, res, (order) => res.json(orderView(order)))\n}\n\nconst createOrder = (req, res) => {\n  try {\n    const { buyCurrency, sellCurrency, buyAmount, sellAmount, exchangeRate } = req.body\n    const data = { buyCurrency, sellCurrency,  buyAmount, sellAmount, exchangeRate }\n\n    const order = Orders.create(data)\n    console.log(new Date().toISOString(), 'new order', data)\n\n    res.status(201).json(orderView(order))\n  } catch (err) {\n    res.status(400).json({ error: 'cant create ' + err })\n    throw err\n  }\n}\n\nconst deleteOrder = (req, res) => {\n  try {\n    findOrder(app)(req, res, (order) => {\n      Orders.remove(order.id)\n      res.status(200).json({})\n    })\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err })\n    throw err\n  }\n}\n\nconst deleteAllOrders = (req, res) => {\n  try {\n    Orders.getMyOrders()\n      .filter( order => !order.isProcessing )\n      .map( order => Orders.remove(order.id))\n\n    res.status(200).json({})\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err })\n    throw err\n  }\n}\n\nconst forceDeleteAllOrders = (req, res) => {\n  try {\n    Orders.getMyOrders()\n      .map( order => Orders.remove(order.id))\n\n    res.status(200).json({})\n  } catch (err) {\n    res.status(400).json({ error: 'cant delete ' + err })\n    throw err\n  }\n}\n\n\nconst requestOrder = (req, res) => {\n  findOrder(app)(req, res, (order) => {\n    order.sendRequest( accepted => {\n      order.isAccepted = accepted\n      console.log(new Date().toISOString(), 'accepted', accepted)\n      if (!accepted) return\n      console.log(new Date().toISOString(), 'peer accepted order', orderView(order))\n    })\n\n    order.isAccepted = false\n    res.json(orderView(order))\n  })\n}\n\nconst requestPartialFulfilment = (req, res) => {\n  const buyAmount = req.query.buyAmount\n  const sellAmount = req.query.sellAmount\n  const updatedOrder = { buyAmount, sellAmount }\n\n  if(!buyAmount && !sellAmount)\n    return res.status(404).json({ error: 'no updatedOrder buyAmount or sellAmount given' })\n\n  findOrder(app)(req, res, (order) => {\n    order.sendRequestForPartial(updatedOrder, (newOrder, accepted) => {\n      console.log('accepted', accepted)\n      order.isAccepted = accepted\n\n      if (!accepted) return res.status(400).json(orderView(newOrder || {}))\n\n      console.log(new Date().toISOString(), 'peer accepted order', orderView(newOrder))\n\n      res.json(orderView(newOrder))\n    }, newOrderId => true)\n  })\n}\n\nconst acceptRequest = (req, res) => {\n  findOrder(app)(req, res, (order) => {\n    let peer = req.params.peer\n\n    if (order.requests.length == 1)\n      peer = order.requests[0].peer\n\n    if (!peer)\n      return res.status(404).json({ error: 'no peer' })\n\n    order.acceptRequest(peer)\n\n    console.log(new Date().toISOString(), 'peer', peer)\n    console.log(new Date().toISOString(), 'accepting order', orderView(order))\n\n    res.json(orderView(order))\n  })\n}\n\nmodule.exports = {\n  filterOrders,\n  listOrders,\n  listAllOrders,\n  listMyOrders,\n  listOthersOrders,\n  requestedOrders,\n\n  getOrder,\n  createOrder,\n  deleteOrder,\n  deleteAllOrders,\n  forceDeleteAllOrders,\n\n  requestOrder,\n  acceptRequest,\n  requestPartialFulfilment,\n}\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/helpers/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/helpers\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/helpers/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/helpers/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/helpers",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\n//@ToDo need to move in app\nconst {\n  orderToString,\n  swapToString,\n  swapView,\n  orderView\n} = require('./views');\n\nconst {\n  decodeFlow,\n  findOrder,\n  findSwap\n} = require('./find');\n\nconst {\n  removeSwap\n} = require('./swap');\n\nmodule.exports = {\n  findOrder,\n  findSwap,\n  orderToString,\n  swapView,\n  orderView,\n  decodeFlow,\n  removeSwap\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIm9yZGVyVG9TdHJpbmciLCJzd2FwVG9TdHJpbmciLCJzd2FwVmlldyIsIm9yZGVyVmlldyIsInJlcXVpcmUiLCJkZWNvZGVGbG93IiwiZmluZE9yZGVyIiwiZmluZFN3YXAiLCJyZW1vdmVTd2FwIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBLE1BQU07QUFDSkEsZUFESTtBQUVKQyxjQUZJO0FBR0pDLFVBSEk7QUFJSkM7QUFKSSxJQUtGQyxRQUFRLFNBQVIsQ0FMSjs7QUFPQSxNQUFNO0FBQ0pDLFlBREk7QUFFSkMsV0FGSTtBQUdKQztBQUhJLElBSUZILFFBQVEsUUFBUixDQUpKOztBQU1BLE1BQU07QUFDSkk7QUFESSxJQUVGSixRQUFRLFFBQVIsQ0FGSjs7QUFJQUssT0FBT0MsT0FBUCxHQUFpQjtBQUNmSixXQURlO0FBRWZDLFVBRmU7QUFHZlAsZUFIZTtBQUlmRSxVQUplO0FBS2ZDLFdBTGU7QUFNZkUsWUFOZTtBQU9mRztBQVBlLENBQWpCIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvaGVscGVycyIsInNvdXJjZXNDb250ZW50IjpbIi8vQFRvRG8gbmVlZCB0byBtb3ZlIGluIGFwcFxuY29uc3Qge1xuICBvcmRlclRvU3RyaW5nLFxuICBzd2FwVG9TdHJpbmcsXG4gIHN3YXBWaWV3LFxuICBvcmRlclZpZXcsXG59ID0gcmVxdWlyZSgnLi92aWV3cycpXG5cbmNvbnN0IHtcbiAgZGVjb2RlRmxvdyxcbiAgZmluZE9yZGVyLFxuICBmaW5kU3dhcCxcbn0gPSByZXF1aXJlKCcuL2ZpbmQnKVxuXG5jb25zdCB7XG4gIHJlbW92ZVN3YXBcbn0gPSByZXF1aXJlKCcuL3N3YXAnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZmluZE9yZGVyLFxuICBmaW5kU3dhcCxcbiAgb3JkZXJUb1N0cmluZyxcbiAgc3dhcFZpZXcsXG4gIG9yZGVyVmlldyxcbiAgZGVjb2RlRmxvdyxcbiAgcmVtb3ZlU3dhcCxcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "orderToString",
        "swapToString",
        "swapView",
        "orderView",
        "require",
        "decodeFlow",
        "findOrder",
        "findSwap",
        "removeSwap",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;AACA,MAAM;AACJA,eADI;AAEJC,cAFI;AAGJC,UAHI;AAIJC;AAJI,IAKFC,QAAQ,SAAR,CALJ;;AAOA,MAAM;AACJC,YADI;AAEJC,WAFI;AAGJC;AAHI,IAIFH,QAAQ,QAAR,CAJJ;;AAMA,MAAM;AACJI;AADI,IAEFJ,QAAQ,QAAR,CAFJ;;AAIAK,OAAOC,OAAP,GAAiB;AACfJ,WADe;AAEfC,UAFe;AAGfP,eAHe;AAIfE,UAJe;AAKfC,WALe;AAMfE,YANe;AAOfG;AAPe,CAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "sourcesContent": [
        "//@ToDo need to move in app\nconst {\n  orderToString,\n  swapToString,\n  swapView,\n  orderView,\n} = require('./views')\n\nconst {\n  decodeFlow,\n  findOrder,\n  findSwap,\n} = require('./find')\n\nconst {\n  removeSwap\n} = require('./swap')\n\nmodule.exports = {\n  findOrder,\n  findSwap,\n  orderToString,\n  swapView,\n  orderView,\n  decodeFlow,\n  removeSwap,\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/helpers/views.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/helpers\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "extends"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/helpers/views.js",
      "filenameRelative": "/home/pm2user/swap.bot/helpers/views.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "views.js",
      "sourceFileName": "views.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/helpers",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "views"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst flows = require('swap.flows');\n\nconst OS = require('os').platform();\nconst IP = require('ip').address();\nconst HOST = OS == 'darwin' || OS == 'win32' ? `localhost` : IP ? IP : `127.0.0.1`;\nconst PORT = process.env.PORT || 1337;\nconst URL = `http://${HOST}:${PORT}`;\n\nconst status = order => !order ? null : {\n  id: order.id,\n  accepted: order.accepted,\n  isResolved: order.isProcessing,\n  isRequested: order.isRequested,\n  status: order.status\n};\n\nconst sendStatus = (req, res) => order => res.json(status(order));\n\nconst swapToString = swap => \"\";\n\nconst orderToString = (swap, full) => {\n  try {\n    let link = `<a href=\"/orders/${swap.id}/start\">start</a>`;\n    return [full ? link : '', swap.id.split('-').pop(), swap.isMy ? 'my' : '- ', swap.buyAmount, swap.buyCurrency, '→', swap.sellAmount, swap.sellCurrency, '[', swap.owner.peer.slice(0, 5), '...', swap.owner.peer.slice(-10), ']'].join(' ');\n  } catch (e) {\n    return '';\n  }\n};\n\nconst swapView = swap => {\n  let { flow, id } = swap;\n\n  return _extends({\n    type: flow._flowName,\n    flow: flow ? flow.state : null\n  }, orderView(swap));\n};\n\nconst orderView = order => {\n  if (!order) return {};\n\n  let {\n    id, isMy, swap,\n    buyAmount, buyCurrency, sellAmount, sellCurrency,\n    isRequested, isProcessing, isAccepted, isPartial,\n    participant, requests,\n    owner\n  } = order;\n\n  return {\n    url: `${URL}/swaps/${id}/go`,\n    handshake: isMy ? `${URL}/orders/${id}/accept` : `${URL}/orders/${id}/request`,\n    requestPartial: isMy ? `` : `${URL}/orders/${id}/request-partial?sellAmount=1`,\n    swap: `${URL}/swaps/${id}/go`,\n    query: `swaps/${id}/go`,\n    id, isMy, swap, string: orderToString(order),\n    buyAmount, buyCurrency, sellAmount, sellCurrency,\n    isRequested, isProcessing, isAccepted, isPartial,\n    participant, requests,\n    owner\n  };\n};\n\nmodule.exports = {\n  orderToString,\n  swapToString,\n  swapView,\n  orderView\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZXdzLmpzIl0sIm5hbWVzIjpbImZsb3dzIiwicmVxdWlyZSIsIk9TIiwicGxhdGZvcm0iLCJJUCIsImFkZHJlc3MiLCJIT1NUIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJVUkwiLCJzdGF0dXMiLCJvcmRlciIsImlkIiwiYWNjZXB0ZWQiLCJpc1Jlc29sdmVkIiwiaXNQcm9jZXNzaW5nIiwiaXNSZXF1ZXN0ZWQiLCJzZW5kU3RhdHVzIiwicmVxIiwicmVzIiwianNvbiIsInN3YXBUb1N0cmluZyIsInN3YXAiLCJvcmRlclRvU3RyaW5nIiwiZnVsbCIsImxpbmsiLCJzcGxpdCIsInBvcCIsImlzTXkiLCJidXlBbW91bnQiLCJidXlDdXJyZW5jeSIsInNlbGxBbW91bnQiLCJzZWxsQ3VycmVuY3kiLCJvd25lciIsInBlZXIiLCJzbGljZSIsImpvaW4iLCJlIiwic3dhcFZpZXciLCJmbG93IiwidHlwZSIsIl9mbG93TmFtZSIsInN0YXRlIiwib3JkZXJWaWV3IiwiaXNBY2NlcHRlZCIsImlzUGFydGlhbCIsInBhcnRpY2lwYW50IiwicmVxdWVzdHMiLCJ1cmwiLCJoYW5kc2hha2UiLCJyZXF1ZXN0UGFydGlhbCIsInF1ZXJ5Iiwic3RyaW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU1BLFFBQVFDLFFBQVEsWUFBUixDQUFkOztBQUVBLE1BQU1DLEtBQUtELFFBQVEsSUFBUixFQUFjRSxRQUFkLEVBQVg7QUFDQSxNQUFNQyxLQUFLSCxRQUFRLElBQVIsRUFBY0ksT0FBZCxFQUFYO0FBQ0EsTUFBTUMsT0FBUUosTUFBTSxRQUFOLElBQWtCQSxNQUFNLE9BQXpCLEdBQ04sV0FETSxHQUVMRSxLQUFLQSxFQUFMLEdBQVcsV0FGbkI7QUFHQSxNQUFNRyxPQUFPQyxRQUFRQyxHQUFSLENBQVlGLElBQVosSUFBb0IsSUFBakM7QUFDQSxNQUFNRyxNQUFPLFVBQVNKLElBQUssSUFBR0MsSUFBSyxFQUFuQzs7QUFFQSxNQUFN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LE9BQVAsR0FBaUI7QUFDZi9CLGVBRGU7QUFFZkYsY0FGZTtBQUdmaUIsVUFIZTtBQUlmSztBQUplLENBQWpCIiwiZmlsZSI6InZpZXdzLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3QvaGVscGVycyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZsb3dzID0gcmVxdWlyZSgnc3dhcC5mbG93cycpXG5cbmNvbnN0IE9TID0gcmVxdWlyZSgnb3MnKS5wbGF0Zm9ybSgpXG5jb25zdCBJUCA9IHJlcXVpcmUoJ2lwJykuYWRkcmVzcygpXG5jb25zdCBIT1NUID0gKE9TID09ICdkYXJ3aW4nIHx8IE9TID09ICd3aW4zMicpXG4gICAgPyBgbG9jYWxob3N0YFxuICAgIDogKCBJUCA/IElQIDogYDEyNy4wLjAuMWAgKVxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMTMzN1xuY29uc3QgVVJMID0gYGh0dHA6Ly8ke0hPU1R9OiR7UE9SVH1gXG5cbmNvbnN0IHN0YXR1cyA9IChvcmRlcikgPT4gIW9yZGVyID8gbnVsbCA6IHtcbiAgaWQ6IG9yZGVyLmlkLFxuICBhY2NlcHRlZDogb3JkZXIuYWNjZXB0ZWQsXG4gIGlzUmVzb2x2ZWQ6IG9yZGVyLmlzUHJvY2Vzc2luZyxcbiAgaXNSZXF1ZXN0ZWQ6IG9yZGVyLmlzUmVxdWVzdGVkLFxuICBzdGF0dXM6IG9yZGVyLnN0YXR1cyxcbn1cblxuY29uc3Qgc2VuZFN0YXR1cyA9IChyZXEsIHJlcykgPT4gKG9yZGVyKSA9PiByZXMuanNvbihzdGF0dXMob3JkZXIpKVxuXG5jb25zdCBzd2FwVG9TdHJpbmcgPSAoc3dhcCkgPT4gXCJcIlxuXG5jb25zdCBvcmRlclRvU3RyaW5nID0gKHN3YXAsIGZ1bGwpID0+IHtcbiAgdHJ5IHtcbiAgICBsZXQgbGluayA9IGA8YSBocmVmPVwiL29yZGVycy8ke3N3YXAuaWR9L3N0YXJ0XCI+c3RhcnQ8L2E+YFxuICAgIHJldHVybiBbXG4gICAgICBmdWxsID8gbGluayA6ICcnLFxuICAgICAgc3dhcC5pZC5zcGxpdCgnLScpLnBvcCgpLFxuICAgICAgKCBzd2FwLmlzTXkgPyAnbXknIDogJy0gJyApLFxuICAgICAgc3dhcC5idXlBbW91bnQsIHN3YXAuYnV5Q3VycmVuY3ksXG4gICAgICAn4oaSJyxcbiAgICAgIHN3YXAuc2VsbEFtb3VudCwgc3dhcC5zZWxsQ3VycmVuY3ksXG4gICAgICAnWycsIHN3YXAub3duZXIucGVlci5zbGljZSgwLDUpLCAnLi4uJywgc3dhcC5vd25lci5wZWVyLnNsaWNlKC0xMCksICddJ1xuICAgIF0uam9pbignICcpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gJydcbiAgfVxufVxuXG5jb25zdCBzd2FwVmlldyA9IChzd2FwKSA9PiB7XG4gIGxldCB7IGZsb3csIGlkIH0gPSBzd2FwXG5cbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBmbG93Ll9mbG93TmFtZSxcbiAgICBmbG93OiBmbG93ID8gZmxvdy5zdGF0ZSA6IG51bGwsXG4gICAgLi4ub3JkZXJWaWV3KHN3YXApXG4gIH1cbn1cblxuY29uc3Qgb3JkZXJWaWV3ID0gKG9yZGVyKSA9PiB7XG4gIGlmICghb3JkZXIpIHJldHVybiB7fVxuXG4gIGxldCB7XG4gICAgaWQsIGlzTXksIHN3YXAsXG4gICAgYnV5QW1vdW50LCBidXlDdXJyZW5jeSwgc2VsbEFtb3VudCwgc2VsbEN1cnJlbmN5LFxuICAgIGlzUmVxdWVzdGVkLCBpc1Byb2Nlc3NpbmcsIGlzQWNjZXB0ZWQsIGlzUGFydGlhbCxcbiAgICBwYXJ0aWNpcGFudCwgcmVxdWVzdHMsXG4gICAgb3duZXIsXG4gIH0gPSBvcmRlclxuXG4gIHJldHVybiB7XG4gICAgdXJsOiBgJHtVUkx9L3N3YXBzLyR7aWR9L2dvYCxcbiAgICBoYW5kc2hha2U6IGlzTXkgPyBgJHtVUkx9L29yZGVycy8ke2lkfS9hY2NlcHRgIDogYCR7VVJMfS9vcmRlcnMvJHtpZH0vcmVxdWVzdGAsXG4gICAgcmVxdWVzdFBhcnRpYWw6IGlzTXk/IGBgIDogYCR7VVJMfS9vcmRlcnMvJHtpZH0vcmVxdWVzdC1wYXJ0aWFsP3NlbGxBbW91bnQ9MWAsXG4gICAgc3dhcDogYCR7VVJMfS9zd2Fwcy8ke2lkfS9nb2AsXG4gICAgcXVlcnk6IGBzd2Fwcy8ke2lkfS9nb2AsXG4gICAgaWQsIGlzTXksIHN3YXAsIHN0cmluZzogb3JkZXJUb1N0cmluZyhvcmRlciksXG4gICAgYnV5QW1vdW50LCBidXlDdXJyZW5jeSwgc2VsbEFtb3VudCwgc2VsbEN1cnJlbmN5LFxuICAgIGlzUmVxdWVzdGVkLCBpc1Byb2Nlc3NpbmcsIGlzQWNjZXB0ZWQsIGlzUGFydGlhbCxcbiAgICBwYXJ0aWNpcGFudCwgcmVxdWVzdHMsXG4gICAgb3duZXIsXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIG9yZGVyVG9TdHJpbmcsXG4gIHN3YXBUb1N0cmluZyxcbiAgc3dhcFZpZXcsXG4gIG9yZGVyVmlldyxcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "views.js"
      ],
      "names": [
        "flows",
        "require",
        "OS",
        "platform",
        "IP",
        "address",
        "HOST",
        "PORT",
        "process",
        "env",
        "URL",
        "status",
        "order",
        "id",
        "accepted",
        "isResolved",
        "isProcessing",
        "isRequested",
        "sendStatus",
        "req",
        "res",
        "json",
        "swapToString",
        "swap",
        "orderToString",
        "full",
        "link",
        "split",
        "pop",
        "isMy",
        "buyAmount",
        "buyCurrency",
        "sellAmount",
        "sellCurrency",
        "owner",
        "peer",
        "slice",
        "join",
        "e",
        "swapView",
        "flow",
        "type",
        "_flowName",
        "state",
        "orderView",
        "isAccepted",
        "isPartial",
        "participant",
        "requests",
        "url",
        "handshake",
        "requestPartial",
        "query",
        "string",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,MAAMA,QAAQC,QAAQ,YAAR,CAAd;;AAEA,MAAMC,KAAKD,QAAQ,IAAR,EAAcE,QAAd,EAAX;AACA,MAAMC,KAAKH,QAAQ,IAAR,EAAcI,OAAd,EAAX;AACA,MAAMC,OAAQJ,MAAM,QAAN,IAAkBA,MAAM,OAAzB,GACN,WADM,GAELE,KAAKA,EAAL,GAAW,WAFnB;AAGA,MAAMG,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AACA,MAAMG,MAAO,UAASJ,IAAK,IAAGC,IAAK,EAAnC;;AAEA,MAAMI,SAAUC,KAAD,IAAW,CAACA,KAAD,GAAS,IAAT,GAAgB;AACxCC,MAAID,MAAMC,EAD8B;AAExCC,YAAUF,MAAME,QAFwB;AAGxCC,cAAYH,MAAMI,YAHsB;AAIxCC,eAAaL,MAAMK,WAJqB;AAKxCN,UAAQC,MAAMD;AAL0B,CAA1C;;AAQA,MAAMO,aAAa,CAACC,GAAD,EAAMC,GAAN,KAAeR,KAAD,IAAWQ,IAAIC,IAAJ,CAASV,OAAOC,KAAP,CAAT,CAA5C;;AAEA,MAAMU,eAAgBC,IAAD,IAAU,EAA/B;;AAEA,MAAMC,gBAAgB,CAACD,IAAD,EAAOE,IAAP,KAAgB;AACpC,MAAI;AACF,QAAIC,OAAQ,oBAAmBH,KAAKV,EAAG,mBAAvC;AACA,WAAO,CACLY,OAAOC,IAAP,GAAc,EADT,EAELH,KAAKV,EAAL,CAAQc,KAAR,CAAc,GAAd,EAAmBC,GAAnB,EAFK,EAGHL,KAAKM,IAAL,GAAY,IAAZ,GAAmB,IAHhB,EAILN,KAAKO,SAJA,EAIWP,KAAKQ,WAJhB,EAKL,GALK,EAMLR,KAAKS,UANA,EAMYT,KAAKU,YANjB,EAOL,GAPK,EAOAV,KAAKW,KAAL,CAAWC,IAAX,CAAgBC,KAAhB,CAAsB,CAAtB,EAAwB,CAAxB,CAPA,EAO4B,KAP5B,EAOmCb,KAAKW,KAAL,CAAWC,IAAX,CAAgBC,KAAhB,CAAsB,CAAC,EAAvB,CAPnC,EAO+D,GAP/D,EAQLC,IARK,CAQA,GARA,CAAP;AASD,GAXD,CAWE,OAAOC,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF,CAfD;;AAiBA,MAAMC,WAAYhB,IAAD,IAAU;AACzB,MAAI,EAAEiB,IAAF,EAAQ3B,EAAR,KAAeU,IAAnB;;AAEA;AACEkB,UAAMD,KAAKE,SADb;AAEEF,UAAMA,OAAOA,KAAKG,KAAZ,GAAoB;AAF5B,KAGKC,UAAUrB,IAAV,CAHL;AAKD,CARD;;AAUA,MAAMqB,YAAahC,KAAD,IAAW;AAC3B,MAAI,CAACA,KAAL,EAAY,OAAO,EAAP;;AAEZ,MAAI;AACFC,MADE,EACEgB,IADF,EACQN,IADR;AAEFO,aAFE,EAESC,WAFT,EAEsBC,UAFtB,EAEkCC,YAFlC;AAGFhB,eAHE,EAGWD,YAHX,EAGyB6B,UAHzB,EAGqCC,SAHrC;AAIFC,eAJE,EAIWC,QAJX;AAKFd;AALE,MAMAtB,KANJ;;AAQA,SAAO;AACLqC,SAAM,GAAEvC,GAAI,UAASG,EAAG,KADnB;AAELqC,eAAWrB,OAAQ,GAAEnB,GAAI,WAAUG,EAAG,SAA3B,GAAuC,GAAEH,GAAI,WAAUG,EAAG,UAFhE;AAGLsC,oBAAgBtB,OAAO,EAAP,GAAY,GAAEnB,GAAI,WAAUG,EAAG,+BAH1C;AAILU,UAAO,GAAEb,GAAI,UAASG,EAAG,KAJpB;AAKLuC,WAAQ,SAAQvC,EAAG,KALd;AAMLA,MANK,EAMDgB,IANC,EAMKN,IANL,EAMW8B,QAAQ7B,cAAcZ,KAAd,CANnB;AAOLkB,aAPK,EAOMC,WAPN,EAOmBC,UAPnB,EAO+BC,YAP/B;AAQLhB,eARK,EAQQD,YARR,EAQsB6B,UARtB,EAQkCC,SARlC;AASLC,eATK,EASQC,QATR;AAULd;AAVK,GAAP;AAYD,CAvBD;;AAyBAoB,OAAOC,OAAP,GAAiB;AACf/B,eADe;AAEfF,cAFe;AAGfiB,UAHe;AAIfK;AAJe,CAAjB",
      "file": "views.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "sourcesContent": [
        "const flows = require('swap.flows')\n\nconst OS = require('os').platform()\nconst IP = require('ip').address()\nconst HOST = (OS == 'darwin' || OS == 'win32')\n    ? `localhost`\n    : ( IP ? IP : `127.0.0.1` )\nconst PORT = process.env.PORT || 1337\nconst URL = `http://${HOST}:${PORT}`\n\nconst status = (order) => !order ? null : {\n  id: order.id,\n  accepted: order.accepted,\n  isResolved: order.isProcessing,\n  isRequested: order.isRequested,\n  status: order.status,\n}\n\nconst sendStatus = (req, res) => (order) => res.json(status(order))\n\nconst swapToString = (swap) => \"\"\n\nconst orderToString = (swap, full) => {\n  try {\n    let link = `<a href=\"/orders/${swap.id}/start\">start</a>`\n    return [\n      full ? link : '',\n      swap.id.split('-').pop(),\n      ( swap.isMy ? 'my' : '- ' ),\n      swap.buyAmount, swap.buyCurrency,\n      '→',\n      swap.sellAmount, swap.sellCurrency,\n      '[', swap.owner.peer.slice(0,5), '...', swap.owner.peer.slice(-10), ']'\n    ].join(' ')\n  } catch (e) {\n    return ''\n  }\n}\n\nconst swapView = (swap) => {\n  let { flow, id } = swap\n\n  return {\n    type: flow._flowName,\n    flow: flow ? flow.state : null,\n    ...orderView(swap)\n  }\n}\n\nconst orderView = (order) => {\n  if (!order) return {}\n\n  let {\n    id, isMy, swap,\n    buyAmount, buyCurrency, sellAmount, sellCurrency,\n    isRequested, isProcessing, isAccepted, isPartial,\n    participant, requests,\n    owner,\n  } = order\n\n  return {\n    url: `${URL}/swaps/${id}/go`,\n    handshake: isMy ? `${URL}/orders/${id}/accept` : `${URL}/orders/${id}/request`,\n    requestPartial: isMy? `` : `${URL}/orders/${id}/request-partial?sellAmount=1`,\n    swap: `${URL}/swaps/${id}/go`,\n    query: `swaps/${id}/go`,\n    id, isMy, swap, string: orderToString(order),\n    buyAmount, buyCurrency, sellAmount, sellCurrency,\n    isRequested, isProcessing, isAccepted, isPartial,\n    participant, requests,\n    owner,\n  }\n}\n\nmodule.exports = {\n  orderToString,\n  swapToString,\n  swapView,\n  orderView,\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/helpers/find.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/helpers\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/helpers/find.js",
      "filenameRelative": "/home/pm2user/swap.bot/helpers/find.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "find.js",
      "sourceFileName": "find.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/helpers",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "find"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst Swap = require('swap.swap').default;\nconst flows = require('swap.flows');\n\nconst { orderView } = require('./views');\n\nlet _swaps = {};\n\nconst decodeFlow = swap => {\n  const { isMy: isMyOrder, buyCurrency, sellCurrency } = swap;\n\n  const firstPart = isMyOrder ? sellCurrency : buyCurrency;\n  const lastPart = isMyOrder ? buyCurrency : sellCurrency;\n  const flowName = `${firstPart.toUpperCase()}2${lastPart.toUpperCase()}`;\n\n  return flows[flowName];\n};\n\nconst findOrder = app => (req, res, next) => {\n  let id = req.params.id;\n\n  console.log(new Date().toISOString(), 'id', id);\n  let order = app.services.orders.getByKey(id);\n  if (!order) return res.status(404).json({ error: 'no such order' });\n\n  next && next(order);\n\n  return order;\n};\n\nconst findSwap = app => (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n\n    const id = req.params.id;\n\n    console.log(new Date().toISOString(), 'id', id);\n\n    if (_swaps[id]) return _swaps[id];\n\n    const swap = new Swap(id, app);\n    _swaps[id] = swap;\n\n    return swap;\n  });\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nmodule.exports = {\n  decodeFlow,\n  findSwap,\n  findOrder\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmQuanMiXSwibmFtZXMiOlsiU3dhcCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiZmxvd3MiLCJvcmRlclZpZXciLCJfc3dhcHMiLCJkZWNvZGVGbG93Iiwic3dhcCIsImlzTXkiLCJpc015T3JkZXIiLCJidXlDdXJyZW5jeSIsInNlbGxDdXJyZW5jeSIsImZpcnN0UGFydCIsImxhc3RQYXJ0IiwiZmxvd05hbWUiLCJ0b1VwcGVyQ2FzZSIsImZpbmRPcmRlciIsImFwcCIsInJlcSIsInJlcyIsIm5leHQiLCJpZCIsInBhcmFtcyIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJvcmRlciIsInNlcnZpY2VzIiwib3JkZXJzIiwiZ2V0QnlLZXkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJmaW5kU3dhcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxPQUFPQyxRQUFRLFdBQVIsRUFBcUJDLE9BQWxDO0FBQ0EsTUFBTUMsUUFBUUYsUUFBUSxZQUFSLENBQWQ7O0FBRUEsTUFBTSxFQUFFRyxTQUFGLEtBQWdCSCxRQUFRLFNBQVIsQ0FBdEI7O0FBRUEsSUFBSUksU0FBUyxFQUFiOztBQUVBLE1BQU1DLGFBQWNDLElBQUQsSUFBVTtBQUMzQixRQUFNLEVBQUVDLE1BQU1DLFNBQVIsRUFBbUJDLFdBQW5CLEVBQWdDQyxZQUFoQyxLQUFpREosSUFBdkQ7O0FBRUEsUUFBTUssWUFBZ0JILFlBQVlFLFlBQVosR0FBMkJELFdBQWpEO0FBQ0EsUUFBTUcsV0FBZ0JKLFlBQVlDLFdBQVosR0FBMEJDLFlBQWhEO0FBQ0EsUUFBTUcsV0FBWSxHQUFFRixVQUFVRyxXQUFWLEVBQXdCLElBQUdGLFNBQVNFLFdBQVQsRUFBdUIsRUFBdEU7O0FBRUEsU0FBT1osTUFBTVcsUUFBTixDQUFQO0FBQ0QsQ0FSRDs7QUFVQSxNQUFNRSxZQUFhQyxHQUFELElBQVMsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7QUFDN0MsTUFBSUMsS0FBS0gsSUFBSUksTUFBSixDQUFXRCxFQUFwQjs7QUFFQUUsVUFBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXNDLElBQXRDLEVBQTRDTCxFQUE1QztBQUNBLE1BQUlNLFFBQVFWLElBQUlXLFFBQUosQ0FBYUMsTUFBYixDQUFvQkMsUUFBcEIsQ0FBNkJULEVBQTdCLENBQVo7QUFDQSxNQUFJLENBQUNNLEtBQUwsRUFBWSxPQUFPUixJQUFJWSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsRUFBRUMsT0FBTyxlQUFULEVBQXJCLENBQVA7O0FBRVpiLFVBQVFBLEtBQUtPLEtBQUwsQ0FBUjs7QUFFQSxTQUFPQSxLQUFQO0FBQ0QsQ0FWRDs7QUFZQSxNQUFNTyxXQUFZakIsR0FBRDtBQUFBLCtCQUFTLFdBQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFvQjs7QUFFNUMsVUFBTUUsS0FBS0gsSUFBSUksTUFBSixDQUFXRCxFQUF0Qjs7QUFFQUUsWUFBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXNDLElBQXRDLEVBQTRDTCxFQUE1Qzs7QUFFQSxRQUFJaEIsT0FBT2dCLEVBQVAsQ0FBSixFQUFnQixPQUFPaEIsT0FBT2dCLEVBQVAsQ0FBUDs7QUFFaEIsVUFBTWQsT0FBTyxJQUFJUCxJQUFKLENBQVNxQixFQUFULEVBQWFKLEdBQWIsQ0FBYjtBQUNBWixXQUFPZ0IsRUFBUCxJQUFhZCxJQUFiOztBQUVBLFdBQU9BLElBQVA7QUFDRCxHQVpnQjs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFqQjs7QUFjQTRCLE9BQU9DLE9BQVAsR0FBaUI7QUFDZjlCLFlBRGU7QUFFZjRCLFVBRmU7QUFHZmxCO0FBSGUsQ0FBakIiLCJmaWxlIjoiZmluZC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L2hlbHBlcnMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBTd2FwID0gcmVxdWlyZSgnc3dhcC5zd2FwJykuZGVmYXVsdFxuY29uc3QgZmxvd3MgPSByZXF1aXJlKCdzd2FwLmZsb3dzJylcblxuY29uc3QgeyBvcmRlclZpZXcgfSA9IHJlcXVpcmUoJy4vdmlld3MnKVxuXG5sZXQgX3N3YXBzID0ge31cblxuY29uc3QgZGVjb2RlRmxvdyA9IChzd2FwKSA9PiB7XG4gIGNvbnN0IHsgaXNNeTogaXNNeU9yZGVyLCBidXlDdXJyZW5jeSwgc2VsbEN1cnJlbmN5IH0gPSBzd2FwXG5cbiAgY29uc3QgZmlyc3RQYXJ0ICAgICA9IGlzTXlPcmRlciA/IHNlbGxDdXJyZW5jeSA6IGJ1eUN1cnJlbmN5XG4gIGNvbnN0IGxhc3RQYXJ0ICAgICAgPSBpc015T3JkZXIgPyBidXlDdXJyZW5jeSA6IHNlbGxDdXJyZW5jeVxuICBjb25zdCBmbG93TmFtZSA9IGAke2ZpcnN0UGFydC50b1VwcGVyQ2FzZSgpfTIke2xhc3RQYXJ0LnRvVXBwZXJDYXNlKCl9YFxuXG4gIHJldHVybiBmbG93c1tmbG93TmFtZV1cbn1cblxuY29uc3QgZmluZE9yZGVyID0gKGFwcCkgPT4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGxldCBpZCA9IHJlcS5wYXJhbXMuaWRcblxuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdpZCcsIGlkKVxuICBsZXQgb3JkZXIgPSBhcHAuc2VydmljZXMub3JkZXJzLmdldEJ5S2V5KGlkKVxuICBpZiAoIW9yZGVyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ25vIHN1Y2ggb3JkZXInIH0pXG5cbiAgbmV4dCAmJiBuZXh0KG9yZGVyKVxuXG4gIHJldHVybiBvcmRlclxufVxuXG5jb25zdCBmaW5kU3dhcCA9IChhcHApID0+IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuXG4gIGNvbnN0IGlkID0gcmVxLnBhcmFtcy5pZFxuXG4gIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgJ2lkJywgaWQpXG5cbiAgaWYgKF9zd2Fwc1tpZF0pIHJldHVybiBfc3dhcHNbaWRdXG5cbiAgY29uc3Qgc3dhcCA9IG5ldyBTd2FwKGlkLCBhcHApXG4gIF9zd2Fwc1tpZF0gPSBzd2FwXG5cbiAgcmV0dXJuIHN3YXBcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGRlY29kZUZsb3csXG4gIGZpbmRTd2FwLFxuICBmaW5kT3JkZXIsXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "find.js"
      ],
      "names": [
        "Swap",
        "require",
        "default",
        "flows",
        "orderView",
        "_swaps",
        "decodeFlow",
        "swap",
        "isMy",
        "isMyOrder",
        "buyCurrency",
        "sellCurrency",
        "firstPart",
        "lastPart",
        "flowName",
        "toUpperCase",
        "findOrder",
        "app",
        "req",
        "res",
        "next",
        "id",
        "params",
        "console",
        "log",
        "Date",
        "toISOString",
        "order",
        "services",
        "orders",
        "getByKey",
        "status",
        "json",
        "error",
        "findSwap",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,MAAMA,OAAOC,QAAQ,WAAR,EAAqBC,OAAlC;AACA,MAAMC,QAAQF,QAAQ,YAAR,CAAd;;AAEA,MAAM,EAAEG,SAAF,KAAgBH,QAAQ,SAAR,CAAtB;;AAEA,IAAII,SAAS,EAAb;;AAEA,MAAMC,aAAcC,IAAD,IAAU;AAC3B,QAAM,EAAEC,MAAMC,SAAR,EAAmBC,WAAnB,EAAgCC,YAAhC,KAAiDJ,IAAvD;;AAEA,QAAMK,YAAgBH,YAAYE,YAAZ,GAA2BD,WAAjD;AACA,QAAMG,WAAgBJ,YAAYC,WAAZ,GAA0BC,YAAhD;AACA,QAAMG,WAAY,GAAEF,UAAUG,WAAV,EAAwB,IAAGF,SAASE,WAAT,EAAuB,EAAtE;;AAEA,SAAOZ,MAAMW,QAAN,CAAP;AACD,CARD;;AAUA,MAAME,YAAaC,GAAD,IAAS,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC7C,MAAIC,KAAKH,IAAII,MAAJ,CAAWD,EAApB;;AAEAE,UAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,IAAtC,EAA4CL,EAA5C;AACA,MAAIM,QAAQV,IAAIW,QAAJ,CAAaC,MAAb,CAAoBC,QAApB,CAA6BT,EAA7B,CAAZ;AACA,MAAI,CAACM,KAAL,EAAY,OAAOR,IAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAEC,OAAO,eAAT,EAArB,CAAP;;AAEZb,UAAQA,KAAKO,KAAL,CAAR;;AAEA,SAAOA,KAAP;AACD,CAVD;;AAYA,MAAMO,WAAYjB,GAAD;AAAA,+BAAS,WAAOC,GAAP,EAAYC,GAAZ,EAAoB;;AAE5C,UAAME,KAAKH,IAAII,MAAJ,CAAWD,EAAtB;;AAEAE,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,IAAtC,EAA4CL,EAA5C;;AAEA,QAAIhB,OAAOgB,EAAP,CAAJ,EAAgB,OAAOhB,OAAOgB,EAAP,CAAP;;AAEhB,UAAMd,OAAO,IAAIP,IAAJ,CAASqB,EAAT,EAAaJ,GAAb,CAAb;AACAZ,WAAOgB,EAAP,IAAad,IAAb;;AAEA,WAAOA,IAAP;AACD,GAZgB;;AAAA;AAAA;AAAA;AAAA,IAAjB;;AAcA4B,OAAOC,OAAP,GAAiB;AACf9B,YADe;AAEf4B,UAFe;AAGflB;AAHe,CAAjB",
      "file": "find.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "sourcesContent": [
        "const Swap = require('swap.swap').default\nconst flows = require('swap.flows')\n\nconst { orderView } = require('./views')\n\nlet _swaps = {}\n\nconst decodeFlow = (swap) => {\n  const { isMy: isMyOrder, buyCurrency, sellCurrency } = swap\n\n  const firstPart     = isMyOrder ? sellCurrency : buyCurrency\n  const lastPart      = isMyOrder ? buyCurrency : sellCurrency\n  const flowName = `${firstPart.toUpperCase()}2${lastPart.toUpperCase()}`\n\n  return flows[flowName]\n}\n\nconst findOrder = (app) => (req, res, next) => {\n  let id = req.params.id\n\n  console.log(new Date().toISOString(), 'id', id)\n  let order = app.services.orders.getByKey(id)\n  if (!order) return res.status(404).json({ error: 'no such order' })\n\n  next && next(order)\n\n  return order\n}\n\nconst findSwap = (app) => async (req, res) => {\n\n  const id = req.params.id\n\n  console.log(new Date().toISOString(), 'id', id)\n\n  if (_swaps[id]) return _swaps[id]\n\n  const swap = new Swap(id, app)\n  _swaps[id] = swap\n\n  return swap\n}\n\nmodule.exports = {\n  decodeFlow,\n  findSwap,\n  findOrder,\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/helpers/swap.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/helpers\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/helpers/swap.js",
      "filenameRelative": "/home/pm2user/swap.bot/helpers/swap.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "swap.js",
      "sourceFileName": "swap.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/helpers",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "swap"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nconst removeSwap = swap => {\n  // add to Swap methods\n  if (!swap || !swap.update) return;\n\n  return swap.update({});\n};\n\nmodule.exports = {\n  removeSwap\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3YXAuanMiXSwibmFtZXMiOlsicmVtb3ZlU3dhcCIsInN3YXAiLCJ1cGRhdGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUNBLE1BQU1BLGFBQWNDLElBQUQsSUFBVTtBQUMzQjtBQUNBLE1BQUksQ0FBQ0EsSUFBRCxJQUFTLENBQUNBLEtBQUtDLE1BQW5CLEVBQTJCOztBQUUzQixTQUFPRCxLQUFLQyxNQUFMLENBQVksRUFBWixDQUFQO0FBQ0QsQ0FMRDs7QUFPQUMsT0FBT0MsT0FBUCxHQUFpQjtBQUNmSjtBQURlLENBQWpCIiwiZmlsZSI6InN3YXAuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9oZWxwZXJzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCByZW1vdmVTd2FwID0gKHN3YXApID0+IHtcbiAgLy8gYWRkIHRvIFN3YXAgbWV0aG9kc1xuICBpZiAoIXN3YXAgfHwgIXN3YXAudXBkYXRlKSByZXR1cm5cblxuICByZXR1cm4gc3dhcC51cGRhdGUoe30pXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW1vdmVTd2FwXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "swap.js"
      ],
      "names": [
        "removeSwap",
        "swap",
        "update",
        "module",
        "exports"
      ],
      "mappings": ";;AACA,MAAMA,aAAcC,IAAD,IAAU;AAC3B;AACA,MAAI,CAACA,IAAD,IAAS,CAACA,KAAKC,MAAnB,EAA2B;;AAE3B,SAAOD,KAAKC,MAAL,CAAY,EAAZ,CAAP;AACD,CALD;;AAOAC,OAAOC,OAAP,GAAiB;AACfJ;AADe,CAAjB",
      "file": "swap.js",
      "sourceRoot": "/home/pm2user/swap.bot/helpers",
      "sourcesContent": [
        "\nconst removeSwap = (swap) => {\n  // add to Swap methods\n  if (!swap || !swap.update) return\n\n  return swap.update({})\n}\n\nmodule.exports = {\n  removeSwap\n}\n"
      ]
    },
    "mtime": 1571923091182
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/me/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/me\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/me/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/me/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/me",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/me",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst { Router } = require('express');\nconst router = new Router();\n\nconst { balance, getMe, getWallet, getWalletDetailed, withdraw } = require('./controller');\nconst { listMyOrders } = require('../orders/controller');\n\nrouter.get('/', getMe);\nrouter.post('/balance', balance);\nrouter.get('/wallet', getWallet);\nrouter.get('/core', getWalletDetailed);\nrouter.get('/withdraw/:from', withdraw);\nrouter.get('/orders', listMyOrders);\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlJvdXRlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJiYWxhbmNlIiwiZ2V0TWUiLCJnZXRXYWxsZXQiLCJnZXRXYWxsZXREZXRhaWxlZCIsIndpdGhkcmF3IiwibGlzdE15T3JkZXJzIiwiZ2V0IiwicG9zdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxFQUFFQSxNQUFGLEtBQWFDLFFBQVEsU0FBUixDQUFuQjtBQUNBLE1BQU1DLFNBQVMsSUFBSUYsTUFBSixFQUFmOztBQUVBLE1BQU0sRUFBRUcsT0FBRixFQUFXQyxLQUFYLEVBQWtCQyxTQUFsQixFQUE2QkMsaUJBQTdCLEVBQWdEQyxRQUFoRCxLQUE2RE4sUUFBUSxjQUFSLENBQW5FO0FBQ0EsTUFBTSxFQUFFTyxZQUFGLEtBQW1CUCxRQUFRLHNCQUFSLENBQXpCOztBQUVBQyxPQUFPTyxHQUFQLENBQVcsR0FBWCxFQUFnQkwsS0FBaEI7QUFDQUYsT0FBT1EsSUFBUCxDQUFZLFVBQVosRUFBd0JQLE9BQXhCO0FBQ0FELE9BQU9PLEdBQVAsQ0FBVyxTQUFYLEVBQXNCSixTQUF0QjtBQUNBSCxPQUFPTyxHQUFQLENBQVcsT0FBWCxFQUFvQkgsaUJBQXBCO0FBQ0FKLE9BQU9PLEdBQVAsQ0FBVyxpQkFBWCxFQUE4QkYsUUFBOUI7QUFDQUwsT0FBT08sR0FBUCxDQUFXLFNBQVgsRUFBc0JELFlBQXRCOztBQUVBRyxPQUFPQyxPQUFQLEdBQWlCVixNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9tZSIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgUm91dGVyIH0gPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG5jb25zdCB7IGJhbGFuY2UsIGdldE1lLCBnZXRXYWxsZXQsIGdldFdhbGxldERldGFpbGVkLCB3aXRoZHJhdyB9ID0gcmVxdWlyZSgnLi9jb250cm9sbGVyJylcbmNvbnN0IHsgbGlzdE15T3JkZXJzIH0gPSByZXF1aXJlKCcuLi9vcmRlcnMvY29udHJvbGxlcicpXG5cbnJvdXRlci5nZXQoJy8nLCBnZXRNZSlcbnJvdXRlci5wb3N0KCcvYmFsYW5jZScsIGJhbGFuY2UpXG5yb3V0ZXIuZ2V0KCcvd2FsbGV0JywgZ2V0V2FsbGV0KVxucm91dGVyLmdldCgnL2NvcmUnLCBnZXRXYWxsZXREZXRhaWxlZClcbnJvdXRlci5nZXQoJy93aXRoZHJhdy86ZnJvbScsIHdpdGhkcmF3KVxucm91dGVyLmdldCgnL29yZGVycycsIGxpc3RNeU9yZGVycylcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "balance",
        "getMe",
        "getWallet",
        "getWalletDetailed",
        "withdraw",
        "listMyOrders",
        "get",
        "post",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,SAAR,CAAnB;AACA,MAAMC,SAAS,IAAIF,MAAJ,EAAf;;AAEA,MAAM,EAAEG,OAAF,EAAWC,KAAX,EAAkBC,SAAlB,EAA6BC,iBAA7B,EAAgDC,QAAhD,KAA6DN,QAAQ,cAAR,CAAnE;AACA,MAAM,EAAEO,YAAF,KAAmBP,QAAQ,sBAAR,CAAzB;;AAEAC,OAAOO,GAAP,CAAW,GAAX,EAAgBL,KAAhB;AACAF,OAAOQ,IAAP,CAAY,UAAZ,EAAwBP,OAAxB;AACAD,OAAOO,GAAP,CAAW,SAAX,EAAsBJ,SAAtB;AACAH,OAAOO,GAAP,CAAW,OAAX,EAAoBH,iBAApB;AACAJ,OAAOO,GAAP,CAAW,iBAAX,EAA8BF,QAA9B;AACAL,OAAOO,GAAP,CAAW,SAAX,EAAsBD,YAAtB;;AAEAG,OAAOC,OAAP,GAAiBV,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/me",
      "sourcesContent": [
        "const { Router } = require('express')\nconst router = new Router()\n\nconst { balance, getMe, getWallet, getWalletDetailed, withdraw } = require('./controller')\nconst { listMyOrders } = require('../orders/controller')\n\nrouter.get('/', getMe)\nrouter.post('/balance', balance)\nrouter.get('/wallet', getWallet)\nrouter.get('/core', getWalletDetailed)\nrouter.get('/withdraw/:from', withdraw)\nrouter.get('/orders', listMyOrders)\n\nmodule.exports = router\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/me/controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/me\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/me/controller.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/me/controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "controller.js",
      "sourceFileName": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/me",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/me",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "controller"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst { wallet } = require('../../swapApp');\n\nconst getMe = (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    res.json({\n      wallet: wallet.view(),\n      balance: yield wallet.getBalance()\n    });\n  });\n\n  return function getMe(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nconst getWallet = (req, res) => {\n  res.json(wallet.view());\n};\n\nconst getWalletDetailed = (() => {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    // wallet.detailedView().then((view) => res.json(view))\n    res.json((yield wallet.detailedView()));\n  });\n\n  return function getWalletDetailed(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n})();\n\nconst balance = (() => {\n  var _ref3 = _asyncToGenerator(function* (req, res) {\n    const { body } = req;\n\n    let balances = yield wallet.getData({ coins: body.coins });\n    res.json({ balances });\n  });\n\n  return function balance(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n})();\n\nconst withdraw = (() => {\n  var _ref4 = _asyncToGenerator(function* (req, res) {\n    let from = req.params.from;\n    let to = req.query.to;\n    let value = req.query.value;\n\n    if (!from in ['btc', 'eth']) return res.status(403).json({ error: 'no such currency' });\n\n    console.log(new Date().toISOString(), 'from', from);\n    console.log(new Date().toISOString(), 'to', to);\n    console.log(new Date().toISOString(), 'value', value);\n\n    try {\n      yield wallet.withdraw(from, to, value);\n      res.json({ from, to, value });\n    } catch (err) {\n      res.status(500).json({ error: err, description: err.description });\n      throw err;\n    }\n  });\n\n  return function withdraw(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n})();\n\nmodule.exports = { balance, getMe, getWallet, getWalletDetailed, withdraw };\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsid2FsbGV0IiwicmVxdWlyZSIsImdldE1lIiwicmVxIiwicmVzIiwianNvbiIsInZpZXciLCJiYWxhbmNlIiwiZ2V0QmFsYW5jZSIsImdldFdhbGxldCIsImdldFdhbGxldERldGFpbGVkIiwiZGV0YWlsZWRWaWV3IiwiYm9keSIsImJhbGFuY2VzIiwiZ2V0RGF0YSIsImNvaW5zIiwid2l0aGRyYXciLCJmcm9tIiwicGFyYW1zIiwidG8iLCJxdWVyeSIsInZhbHVlIiwic3RhdHVzIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZXJyIiwiZGVzY3JpcHRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTSxFQUFFQSxNQUFGLEtBQWFDLFFBQVEsZUFBUixDQUFuQjs7QUFFQSxNQUFNQztBQUFBLCtCQUFRLFdBQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFvQjtBQUNoQ0EsUUFBSUMsSUFBSixDQUFTO0FBQ1BMLGNBQVFBLE9BQU9NLElBQVAsRUFERDtBQUVQQyxlQUFTLE1BQU1QLE9BQU9RLFVBQVA7QUFGUixLQUFUO0FBSUQsR0FMSzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFOOztBQU9BLE1BQU1DLFlBQVksQ0FBQ04sR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDOUJBLE1BQUlDLElBQUosQ0FBU0wsT0FBT00sSUFBUCxFQUFUO0FBQ0QsQ0FGRDs7QUFJQSxNQUFNSTtBQUFBLGdDQUFvQixXQUFPUCxHQUFQLEVBQVlDLEdBQVosRUFBb0I7QUFDNUM7QUFDQUEsUUFBSUMsSUFBSixFQUFTLE1BQU1MLE9BQU9XLFlBQVAsRUFBZjtBQUNELEdBSEs7O0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBTjs7QUFLQSxNQUFNSjtBQUFBLGdDQUFVLFdBQU9KLEdBQVAsRUFBWUMsR0FBWixFQUFvQjtBQUNsQyxVQUFNLEVBQUVRLElBQUYsS0FBV1QsR0FBakI7O0FBRUMsUUFBSVUsV0FBVyxNQUFNYixPQUFPYyxPQUFQLENBQWUsRUFBRUMsT0FBT0gsS0FBS0csS0FBZCxFQUFmLENBQXJCO0FBQ0FYLFFBQUlDLElBQUosQ0FBUyxFQUFFUSxRQUFGLEVBQVQ7QUFDRixHQUxLOztBQUFBO0FBQUE7QUFBQTtBQUFBLElBQU47O0FBT0EsTUFBTUc7QUFBQSxnQ0FBVyxXQUFPYixHQUFQLEVBQVlDLEdBQVosRUFBb0I7QUFDbkMsUUFBSWEsT0FBT2QsSUFBSWUsTUFBSixDQUFXRCxJQUF0QjtBQUNBLFFBQUlFLEtBQUtoQixJQUFJaUIsS0FBSixDQUFVRCxFQUFuQjtBQUNBLFFBQUlFLFFBQVFsQixJQUFJaUIsS0FBSixDQUFVQyxLQUF0Qjs7QUFFQSxRQUFJLENBQUNKLElBQUQsSUFBUyxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQWIsRUFBNkIsT0FBT2IsSUFBSWtCLE1BQUosQ0FBVyxHQUFYLEVBQWdCakIsSUFBaEIsQ0FBcUIsRUFBRWtCLE9BQU8sa0JBQVQsRUFBckIsQ0FBUDs7QUFFN0JDLFlBQVFDLEdBQVIsQ0FBWSxJQUFJQyxJQUFKLEdBQVdDLFdBQVgsRUFBWixFQUFzQyxNQUF0QyxFQUE4Q1YsSUFBOUM7QUFDQU8sWUFBUUMsR0FBUixDQUFZLElBQUlDLElBQUosR0FBV0MsV0FBWCxFQUFaLEVBQXNDLElBQXRDLEVBQTRDUixFQUE1QztBQUNBSyxZQUFRQyxHQUFSLENBQVksSUFBSUMsSUFBSixHQUFXQyxXQUFYLEVBQVosRUFBc0MsT0FBdEMsRUFBK0NOLEtBQS9DOztBQUVBLFFBQUk7QUFDRixZQUFNckIsT0FBT2dCLFFBQVAsQ0FBZ0JDLElBQWhCLEVBQXNCRSxFQUF0QixFQUEwQkUsS0FBMUIsQ0FBTjtBQUNBakIsVUFBSUMsSUFBSixDQUFTLEVBQUVZLElBQUYsRUFBUUUsRUFBUixFQUFZRSxLQUFaLEVBQVQ7QUFDRCxLQUhELENBR0UsT0FBT08sR0FBUCxFQUFZO0FBQ1p4QixVQUFJa0IsTUFBSixDQUFXLEdBQVgsRUFBZ0JqQixJQUFoQixDQUFxQixFQUFFa0IsT0FBT0ssR0FBVCxFQUFjQyxhQUFhRCxJQUFJQyxXQUEvQixFQUFyQjtBQUNBLFlBQU1ELEdBQU47QUFDRDtBQUNGLEdBbEJLOztBQUFBO0FBQUE7QUFBQTtBQUFBLElBQU47O0FBb0JBRSxPQUFPQyxPQUFQLEdBQWlCLEVBQUV4QixPQUFGLEVBQVdMLEtBQVgsRUFBa0JPLFNBQWxCLEVBQTZCQyxpQkFBN0IsRUFBZ0RNLFFBQWhELEVBQWpCIiwiZmlsZSI6ImNvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9yb3V0ZXMvbWUiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHdhbGxldCB9ID0gcmVxdWlyZSgnLi4vLi4vc3dhcEFwcCcpXG5cbmNvbnN0IGdldE1lID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5qc29uKHtcbiAgICB3YWxsZXQ6IHdhbGxldC52aWV3KCksXG4gICAgYmFsYW5jZTogYXdhaXQgd2FsbGV0LmdldEJhbGFuY2UoKVxuICB9KVxufVxuXG5jb25zdCBnZXRXYWxsZXQgPSAocmVxLCByZXMpID0+IHtcbiAgcmVzLmpzb24od2FsbGV0LnZpZXcoKSlcbn1cblxuY29uc3QgZ2V0V2FsbGV0RGV0YWlsZWQgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgLy8gd2FsbGV0LmRldGFpbGVkVmlldygpLnRoZW4oKHZpZXcpID0+IHJlcy5qc29uKHZpZXcpKVxuICByZXMuanNvbihhd2FpdCB3YWxsZXQuZGV0YWlsZWRWaWV3KCkpXG59XG5cbmNvbnN0IGJhbGFuY2UgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBib2R5IH0gPSByZXFcblxuICAgbGV0IGJhbGFuY2VzID0gYXdhaXQgd2FsbGV0LmdldERhdGEoeyBjb2luczogYm9keS5jb2lucyB9KVxuICAgcmVzLmpzb24oeyBiYWxhbmNlcyB9KVxufVxuXG5jb25zdCB3aXRoZHJhdyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBsZXQgZnJvbSA9IHJlcS5wYXJhbXMuZnJvbVxuICBsZXQgdG8gPSByZXEucXVlcnkudG9cbiAgbGV0IHZhbHVlID0gcmVxLnF1ZXJ5LnZhbHVlXG5cbiAgaWYgKCFmcm9tIGluIFsnYnRjJywgJ2V0aCddKSByZXR1cm4gcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBlcnJvcjogJ25vIHN1Y2ggY3VycmVuY3knfSlcblxuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdmcm9tJywgZnJvbSlcbiAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAndG8nLCB0bylcbiAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCAndmFsdWUnLCB2YWx1ZSlcblxuICB0cnkge1xuICAgIGF3YWl0IHdhbGxldC53aXRoZHJhdyhmcm9tLCB0bywgdmFsdWUpXG4gICAgcmVzLmpzb24oeyBmcm9tLCB0bywgdmFsdWUgfSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLCBkZXNjcmlwdGlvbjogZXJyLmRlc2NyaXB0aW9uIH0pXG4gICAgdGhyb3cgZXJyXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7IGJhbGFuY2UsIGdldE1lLCBnZXRXYWxsZXQsIGdldFdhbGxldERldGFpbGVkLCB3aXRoZHJhdyB9XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "wallet",
        "require",
        "getMe",
        "req",
        "res",
        "json",
        "view",
        "balance",
        "getBalance",
        "getWallet",
        "getWalletDetailed",
        "detailedView",
        "body",
        "balances",
        "getData",
        "coins",
        "withdraw",
        "from",
        "params",
        "to",
        "query",
        "value",
        "status",
        "error",
        "console",
        "log",
        "Date",
        "toISOString",
        "err",
        "description",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,eAAR,CAAnB;;AAEA,MAAMC;AAAA,+BAAQ,WAAOC,GAAP,EAAYC,GAAZ,EAAoB;AAChCA,QAAIC,IAAJ,CAAS;AACPL,cAAQA,OAAOM,IAAP,EADD;AAEPC,eAAS,MAAMP,OAAOQ,UAAP;AAFR,KAAT;AAID,GALK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAOA,MAAMC,YAAY,CAACN,GAAD,EAAMC,GAAN,KAAc;AAC9BA,MAAIC,IAAJ,CAASL,OAAOM,IAAP,EAAT;AACD,CAFD;;AAIA,MAAMI;AAAA,gCAAoB,WAAOP,GAAP,EAAYC,GAAZ,EAAoB;AAC5C;AACAA,QAAIC,IAAJ,EAAS,MAAML,OAAOW,YAAP,EAAf;AACD,GAHK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAKA,MAAMJ;AAAA,gCAAU,WAAOJ,GAAP,EAAYC,GAAZ,EAAoB;AAClC,UAAM,EAAEQ,IAAF,KAAWT,GAAjB;;AAEC,QAAIU,WAAW,MAAMb,OAAOc,OAAP,CAAe,EAAEC,OAAOH,KAAKG,KAAd,EAAf,CAArB;AACAX,QAAIC,IAAJ,CAAS,EAAEQ,QAAF,EAAT;AACF,GALK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAOA,MAAMG;AAAA,gCAAW,WAAOb,GAAP,EAAYC,GAAZ,EAAoB;AACnC,QAAIa,OAAOd,IAAIe,MAAJ,CAAWD,IAAtB;AACA,QAAIE,KAAKhB,IAAIiB,KAAJ,CAAUD,EAAnB;AACA,QAAIE,QAAQlB,IAAIiB,KAAJ,CAAUC,KAAtB;;AAEA,QAAI,CAACJ,IAAD,IAAS,CAAC,KAAD,EAAQ,KAAR,CAAb,EAA6B,OAAOb,IAAIkB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqB,EAAEkB,OAAO,kBAAT,EAArB,CAAP;;AAE7BC,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,MAAtC,EAA8CV,IAA9C;AACAO,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,IAAtC,EAA4CR,EAA5C;AACAK,YAAQC,GAAR,CAAY,IAAIC,IAAJ,GAAWC,WAAX,EAAZ,EAAsC,OAAtC,EAA+CN,KAA/C;;AAEA,QAAI;AACF,YAAMrB,OAAOgB,QAAP,CAAgBC,IAAhB,EAAsBE,EAAtB,EAA0BE,KAA1B,CAAN;AACAjB,UAAIC,IAAJ,CAAS,EAAEY,IAAF,EAAQE,EAAR,EAAYE,KAAZ,EAAT;AACD,KAHD,CAGE,OAAOO,GAAP,EAAY;AACZxB,UAAIkB,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqB,EAAEkB,OAAOK,GAAT,EAAcC,aAAaD,IAAIC,WAA/B,EAArB;AACA,YAAMD,GAAN;AACD;AACF,GAlBK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AAoBAE,OAAOC,OAAP,GAAiB,EAAExB,OAAF,EAAWL,KAAX,EAAkBO,SAAlB,EAA6BC,iBAA7B,EAAgDM,QAAhD,EAAjB",
      "file": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/me",
      "sourcesContent": [
        "const { wallet } = require('../../swapApp')\n\nconst getMe = async (req, res) => {\n  res.json({\n    wallet: wallet.view(),\n    balance: await wallet.getBalance()\n  })\n}\n\nconst getWallet = (req, res) => {\n  res.json(wallet.view())\n}\n\nconst getWalletDetailed = async (req, res) => {\n  // wallet.detailedView().then((view) => res.json(view))\n  res.json(await wallet.detailedView())\n}\n\nconst balance = async (req, res) => {\n  const { body } = req\n\n   let balances = await wallet.getData({ coins: body.coins })\n   res.json({ balances })\n}\n\nconst withdraw = async (req, res) => {\n  let from = req.params.from\n  let to = req.query.to\n  let value = req.query.value\n\n  if (!from in ['btc', 'eth']) return res.status(403).json({ error: 'no such currency'})\n\n  console.log(new Date().toISOString(), 'from', from)\n  console.log(new Date().toISOString(), 'to', to)\n  console.log(new Date().toISOString(), 'value', value)\n\n  try {\n    await wallet.withdraw(from, to, value)\n    res.json({ from, to, value })\n  } catch (err) {\n    res.status(500).json({ error: err, description: err.description })\n    throw err\n  }\n}\n\nmodule.exports = { balance, getMe, getWallet, getWalletDetailed, withdraw }\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/swaps/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/swaps\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/swaps/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/swaps/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/swaps",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/swaps",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst { Router } = require('express');\nconst router = new Router();\n\nconst {\n  getSwap,\n  getState,\n  goSwap,\n  refund,\n\n  nextStep,\n  withSwap,\n  sign,\n  verifyBtcScript,\n  submitSecret,\n  syncBalance,\n  tryWithdraw,\n\n  getInProgress,\n  getFinished\n} = require('./controller');\n\nrouter.get('/finished', getFinished);\nrouter.get('/in-progress', getInProgress);\n\nrouter.get('/:id', getSwap);\nrouter.get('/:id/flow', getState);\nrouter.get('/:id/go', goSwap);\nrouter.get('/:id/auto', goSwap);\nrouter.get('/:id/refund', refund);\n\nrouter.get('/:id/sign', withSwap(sign));\nrouter.get('/:id/next-step', withSwap(nextStep));\nrouter.get('/:id/submit-secret', withSwap(submitSecret));\nrouter.get('/:id/verify-btc-script', withSwap(verifyBtcScript));\nrouter.get('/:id/sync-balance', withSwap(syncBalance));\nrouter.get('/:id/try-withdraw', withSwap(tryWithdraw));\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlJvdXRlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJnZXRTd2FwIiwiZ2V0U3RhdGUiLCJnb1N3YXAiLCJyZWZ1bmQiLCJuZXh0U3RlcCIsIndpdGhTd2FwIiwic2lnbiIsInZlcmlmeUJ0Y1NjcmlwdCIsInN1Ym1pdFNlY3JldCIsInN5bmNCYWxhbmNlIiwidHJ5V2l0aGRyYXciLCJnZXRJblByb2dyZXNzIiwiZ2V0RmluaXNoZWQiLCJnZXQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sRUFBRUEsTUFBRixLQUFhQyxRQUFRLFNBQVIsQ0FBbkI7QUFDQSxNQUFNQyxTQUFTLElBQUlGLE1BQUosRUFBZjs7QUFFQSxNQUFNO0FBQ0pHLFNBREk7QUFFSkMsVUFGSTtBQUdKQyxRQUhJO0FBSUpDLFFBSkk7O0FBTUpDLFVBTkk7QUFPSkMsVUFQSTtBQVFKQyxNQVJJO0FBU0pDLGlCQVRJO0FBVUpDLGNBVkk7QUFXSkMsYUFYSTtBQVlKQyxhQVpJOztBQWNKQyxlQWRJO0FBZUpDO0FBZkksSUFnQkZkLFFBQVEsY0FBUixDQWhCSjs7QUFrQkFDLE9BQU9jLEdBQVAsQ0FBVyxXQUFYLEVBQXdCRCxXQUF4QjtBQUNBYixPQUFPYyxHQUFQLENBQVcsY0FBWCxFQUEyQkYsYUFBM0I7O0FBRUFaLE9BQU9jLEdBQVAsQ0FBVyxNQUFYLEVBQW1CYixPQUFuQjtBQUNBRCxPQUFPYyxHQUFQLENBQVcsV0FBWCxFQUF3QlosUUFBeEI7QUFDQUYsT0FBT2MsR0FBUCxDQUFXLFNBQVgsRUFBc0JYLE1BQXRCO0FBQ0FILE9BQU9jLEdBQVAsQ0FBVyxXQUFYLEVBQXdCWCxNQUF4QjtBQUNBSCxPQUFPYyxHQUFQLENBQVcsYUFBWCxFQUEwQlYsTUFBMUI7O0FBRUFKLE9BQU9jLEdBQVAsQ0FBVyxXQUFYLEVBQXdCUixTQUFTQyxJQUFULENBQXhCO0FBQ0FQLE9BQU9jLEdBQVAsQ0FBVyxnQkFBWCxFQUE2QlIsU0FBU0QsUUFBVCxDQUE3QjtBQUNBTCxPQUFPYyxHQUFQLENBQVcsb0JBQVgsRUFBaUNSLFNBQVNHLFlBQVQsQ0FBakM7QUFDQVQsT0FBT2MsR0FBUCxDQUFXLHdCQUFYLEVBQXFDUixTQUFTRSxlQUFULENBQXJDO0FBQ0FSLE9BQU9jLEdBQVAsQ0FBVyxtQkFBWCxFQUFnQ1IsU0FBU0ksV0FBVCxDQUFoQztBQUNBVixPQUFPYyxHQUFQLENBQVcsbUJBQVgsRUFBZ0NSLFNBQVNLLFdBQVQsQ0FBaEM7O0FBRUFJLE9BQU9DLE9BQVAsR0FBaUJoQixNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9zd2FwcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgUm91dGVyIH0gPSByZXF1aXJlKCdleHByZXNzJylcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKVxuXG5jb25zdCB7XG4gIGdldFN3YXAsXG4gIGdldFN0YXRlLFxuICBnb1N3YXAsXG4gIHJlZnVuZCxcblxuICBuZXh0U3RlcCxcbiAgd2l0aFN3YXAsXG4gIHNpZ24sXG4gIHZlcmlmeUJ0Y1NjcmlwdCxcbiAgc3VibWl0U2VjcmV0LFxuICBzeW5jQmFsYW5jZSxcbiAgdHJ5V2l0aGRyYXcsXG5cbiAgZ2V0SW5Qcm9ncmVzcyxcbiAgZ2V0RmluaXNoZWQsXG59ID0gcmVxdWlyZSgnLi9jb250cm9sbGVyJylcblxucm91dGVyLmdldCgnL2ZpbmlzaGVkJywgZ2V0RmluaXNoZWQpXG5yb3V0ZXIuZ2V0KCcvaW4tcHJvZ3Jlc3MnLCBnZXRJblByb2dyZXNzKVxuXG5yb3V0ZXIuZ2V0KCcvOmlkJywgZ2V0U3dhcClcbnJvdXRlci5nZXQoJy86aWQvZmxvdycsIGdldFN0YXRlKVxucm91dGVyLmdldCgnLzppZC9nbycsIGdvU3dhcClcbnJvdXRlci5nZXQoJy86aWQvYXV0bycsIGdvU3dhcClcbnJvdXRlci5nZXQoJy86aWQvcmVmdW5kJywgcmVmdW5kKVxuXG5yb3V0ZXIuZ2V0KCcvOmlkL3NpZ24nLCB3aXRoU3dhcChzaWduKSlcbnJvdXRlci5nZXQoJy86aWQvbmV4dC1zdGVwJywgd2l0aFN3YXAobmV4dFN0ZXApKVxucm91dGVyLmdldCgnLzppZC9zdWJtaXQtc2VjcmV0Jywgd2l0aFN3YXAoc3VibWl0U2VjcmV0KSlcbnJvdXRlci5nZXQoJy86aWQvdmVyaWZ5LWJ0Yy1zY3JpcHQnLCB3aXRoU3dhcCh2ZXJpZnlCdGNTY3JpcHQpKVxucm91dGVyLmdldCgnLzppZC9zeW5jLWJhbGFuY2UnLCB3aXRoU3dhcChzeW5jQmFsYW5jZSkpXG5yb3V0ZXIuZ2V0KCcvOmlkL3RyeS13aXRoZHJhdycsIHdpdGhTd2FwKHRyeVdpdGhkcmF3KSlcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXJcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "getSwap",
        "getState",
        "goSwap",
        "refund",
        "nextStep",
        "withSwap",
        "sign",
        "verifyBtcScript",
        "submitSecret",
        "syncBalance",
        "tryWithdraw",
        "getInProgress",
        "getFinished",
        "get",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,SAAR,CAAnB;AACA,MAAMC,SAAS,IAAIF,MAAJ,EAAf;;AAEA,MAAM;AACJG,SADI;AAEJC,UAFI;AAGJC,QAHI;AAIJC,QAJI;;AAMJC,UANI;AAOJC,UAPI;AAQJC,MARI;AASJC,iBATI;AAUJC,cAVI;AAWJC,aAXI;AAYJC,aAZI;;AAcJC,eAdI;AAeJC;AAfI,IAgBFd,QAAQ,cAAR,CAhBJ;;AAkBAC,OAAOc,GAAP,CAAW,WAAX,EAAwBD,WAAxB;AACAb,OAAOc,GAAP,CAAW,cAAX,EAA2BF,aAA3B;;AAEAZ,OAAOc,GAAP,CAAW,MAAX,EAAmBb,OAAnB;AACAD,OAAOc,GAAP,CAAW,WAAX,EAAwBZ,QAAxB;AACAF,OAAOc,GAAP,CAAW,SAAX,EAAsBX,MAAtB;AACAH,OAAOc,GAAP,CAAW,WAAX,EAAwBX,MAAxB;AACAH,OAAOc,GAAP,CAAW,aAAX,EAA0BV,MAA1B;;AAEAJ,OAAOc,GAAP,CAAW,WAAX,EAAwBR,SAASC,IAAT,CAAxB;AACAP,OAAOc,GAAP,CAAW,gBAAX,EAA6BR,SAASD,QAAT,CAA7B;AACAL,OAAOc,GAAP,CAAW,oBAAX,EAAiCR,SAASG,YAAT,CAAjC;AACAT,OAAOc,GAAP,CAAW,wBAAX,EAAqCR,SAASE,eAAT,CAArC;AACAR,OAAOc,GAAP,CAAW,mBAAX,EAAgCR,SAASI,WAAT,CAAhC;AACAV,OAAOc,GAAP,CAAW,mBAAX,EAAgCR,SAASK,WAAT,CAAhC;;AAEAI,OAAOC,OAAP,GAAiBhB,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/swaps",
      "sourcesContent": [
        "const { Router } = require('express')\nconst router = new Router()\n\nconst {\n  getSwap,\n  getState,\n  goSwap,\n  refund,\n\n  nextStep,\n  withSwap,\n  sign,\n  verifyBtcScript,\n  submitSecret,\n  syncBalance,\n  tryWithdraw,\n\n  getInProgress,\n  getFinished,\n} = require('./controller')\n\nrouter.get('/finished', getFinished)\nrouter.get('/in-progress', getInProgress)\n\nrouter.get('/:id', getSwap)\nrouter.get('/:id/flow', getState)\nrouter.get('/:id/go', goSwap)\nrouter.get('/:id/auto', goSwap)\nrouter.get('/:id/refund', refund)\n\nrouter.get('/:id/sign', withSwap(sign))\nrouter.get('/:id/next-step', withSwap(nextStep))\nrouter.get('/:id/submit-secret', withSwap(submitSecret))\nrouter.get('/:id/verify-btc-script', withSwap(verifyBtcScript))\nrouter.get('/:id/sync-balance', withSwap(syncBalance))\nrouter.get('/:id/try-withdraw', withSwap(tryWithdraw))\n\nmodule.exports = router\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/swaps/controller.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/swaps\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/swaps/controller.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/swaps/controller.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "controller.js",
      "sourceFileName": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/swaps",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/swaps",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "controller"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst { helpers: { history } } = require('simple.swap.core');\n\nconst { app } = require('../../swapApp');\nconst { findSwap, swapView, decodeFlow, removeSwap } = require('../../helpers');\nconst Pair = require('../../microbot/Pair.js').default;\n\nconst flows = require('swap.flows');\nconst Swap = require('swap.swap').default;\nconst Orders = app.services.orders;\n\nconst crypto = require('crypto');\nconst genSecret = () => crypto.randomBytes(32).toString('hex');\n\nhistory.init(app);\n\nconst until = (_step, swap) => new Promise(resolve => {\n  setInterval(() => swap.flow.state.step >= _step ? resolve() : null, 500);\n\n  swap.on('enter step', step => step >= _step ? resolve() : null);\n});\n\nconst runSwap = swap => {\n  console.log(new Date().toISOString(), 'BEGIN', swap.flow._flowName);\n  console.log(new Date().toISOString(), 'total steps', swap.flow.steps.length);\n\n  swap.on('enter step', step => {\n    console.log('enter step', step);\n    switch (swap.flow._flowName) {\n      case \"BTC2ETH\":\n      case \"BCH2ETH\":\n      case \"BTC2NOXON\":\n      case \"BTC2SWAP\":\n      case \"BTC2XSAT\":\n      case \"BTC2HDP\":\n      case \"USDT2NOXON\":\n      case \"USDT2SWAP\":\n\n        if (step == 2) swap.flow.submitSecret(genSecret());\n\n        if (step + 1 === swap.flow.steps.length) {\n          console.log(new Date().toISOString(), '[FINISHED] tx', swap.flow.state.ethSwapWithdrawTransactionHash);\n\n          // Orders.remove(swap.id)\n        }\n        return;\n\n      case \"ETH2BTC\":\n      case \"ETH2BCH\":\n      case \"NOXON2BTC\":\n      case \"SWAP2BTC\":\n      case \"XSAT2BTC\":\n      case \"HDP2BTC\":\n      case \"NOXON2USDT\":\n      case \"SWAP2USDT\":\n\n        if (step == 1) swap.flow.sign();\n        if (step == 3) swap.flow.verifyBtcScript();\n\n        if (step + 1 === swap.flow.steps.length) {\n          console.log(new Date().toISOString(), '[FINISHED] tx', swap.flow.state.btcSwapWithdrawTransactionHash);\n\n          // Orders.remove(swap.id)\n        }\n    }\n  });\n};\n\nconst getSwap = (req, res) => {\n  findSwap(app)(req, res).then(swap => {\n    res.json(swapView(swap));\n  });\n};\n\nconst getState = (req, res) => {\n  findSwap(app)(req, res).then(swap => {\n    res.json(swap.flow.state);\n  });\n};\n\nconst goSwap = (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    const swap = yield findSwap(app)(req, res);\n\n    if (swap.flow && swap.flow.state.step) return res.json(swapView(swap));\n\n    runSwap(swap);\n\n    res.json(swapView(swap));\n  });\n\n  return function goSwap(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nconst withSwap = swapHandler => (() => {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    let swap;\n    try {\n      swap = yield findSwap(app)(req, res);\n      yield swapHandler(swap, req.query);\n      res.json(swapView(swap));\n    } catch (error) {\n      const { code, name, message, stack } = error;\n      const info = {\n        code, name, message,\n        step: swap.flow.state.step,\n        type: swap.type, swap: swap.id,\n        stack,\n        state: swap.flow.state,\n        error };\n      console.error(info);\n      res.status(500).json(info);\n    }\n  });\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n})();\n\nconst nextStep = (() => {\n  var _ref3 = _asyncToGenerator(function* (swap) {\n    const currentStep = swap.flow.state.step;\n    console.log(new Date().toISOString(), `waiting for step=${currentStep + 1}`);\n\n    yield until(currentStep + 1, swap);\n  });\n\n  return function nextStep(_x5) {\n    return _ref3.apply(this, arguments);\n  };\n})();\n\nconst sign = (() => {\n  var _ref4 = _asyncToGenerator(function* (swap) {\n    // if (swap.flow.state.isMeSigned) throw new Error(`Already signed`)\n\n    yield until(1, swap);\n    yield swap.flow.sign();\n    yield until(2, swap);\n  });\n\n  return function sign(_x6) {\n    return _ref4.apply(this, arguments);\n  };\n})();\n\nconst verifyBtcScript = (() => {\n  var _ref5 = _asyncToGenerator(function* (swap) {\n    if (swap.flow.state.btcScriptVerified) throw new Error(`Already verified`);\n\n    yield until(3, swap);\n    yield swap.flow.verifyBtcScript();\n    yield until(4, swap);\n  });\n\n  return function verifyBtcScript(_x7) {\n    return _ref5.apply(this, arguments);\n  };\n})();\n\nconst submitSecret = (() => {\n  var _ref6 = _asyncToGenerator(function* (swap) {\n    if (swap.flow.state.secret) throw new Error(`Already submit ${swap.flow.state.secretHash}`);\n\n    yield until(2, swap);\n    yield swap.flow.submitSecret(genSecret());\n    yield until(3, swap);\n  });\n\n  return function submitSecret(_x8) {\n    return _ref6.apply(this, arguments);\n  };\n})();\n\nconst syncBalance = (() => {\n  var _ref7 = _asyncToGenerator(function* (swap) {\n    if (swap.flow.state.isBalanceEnough) throw new Error(`Already synced ${swap.flow.state.balance}`);\n\n    yield until(3, swap);\n    yield swap.flow.syncBalance();\n    yield until(4, swap);\n  });\n\n  return function syncBalance(_x9) {\n    return _ref7.apply(this, arguments);\n  };\n})();\n\nconst tryRefund = (() => {\n  var _ref8 = _asyncToGenerator(function* (swap) {\n    try {\n      yield swap.flow.tryRefund();\n    } catch (err) {\n      if (err.error == '64: non-final. Code:-26') err.message = `Can't be mined until lockTime = ${swap.flow.state.btcScriptValues.lockTime}, now = ${Date.now() / 1000}, secondsLeft = ${Math.ceil(swap.flow.state.btcScriptValues.lockTime - Date.now() / 1000)}`;\n\n      throw err;\n    }\n  });\n\n  return function tryRefund(_x10) {\n    return _ref8.apply(this, arguments);\n  };\n})();\n\nconst refund = (req, res) => {\n  findSwap(app)(req, res).then((() => {\n    var _ref9 = _asyncToGenerator(function* (swap) {\n\n      if (!swap.flow || !swap.flow.state || !swap.flow.state.step) return res.status(403).json({ error: 'not started' });\n\n      try {\n        const result = yield swap.flow.tryRefund();\n        res.json({ status: 'refund', result });\n      } catch (err) {\n        if (err.error == '64: non-final. Code:-26') {\n          const { usdtScriptValues, btcScriptValues } = swap.flow.state;\n          const scriptValues = usdtScriptValues || btcScriptValues;\n\n          err.description = `Can't be mined until lockTime = ${scriptValues.lockTime}, now = ${Date.now() / 1000}, secondsLeft = ${Math.ceil(scriptValues.lockTime - Date.now() / 1000)}`;\n        }\n\n        res.status(403).json({\n          result: 'refund error',\n          description: err.description,\n          message: err.message,\n          error: err\n        });\n        throw err;\n      }\n    });\n\n    return function (_x11) {\n      return _ref9.apply(this, arguments);\n    };\n  })());\n};\n\nconst tryWithdraw = (() => {\n  var _ref10 = _asyncToGenerator(function* (swap, { secret }) {\n    if (!secret) throw new Error(`You need to provide secret for manual withdrawal`);\n\n    yield swap.flow.tryWithdraw(secret);\n  });\n\n  return function tryWithdraw(_x12, _x13) {\n    return _ref10.apply(this, arguments);\n  };\n})();\n\nconst getInProgress = ({ query: { parsed, withFees } }, res) => {\n  const swaps = history.getAllInProgress().map(id => new Swap(id, app));\n\n  if (!parsed) {\n    return res.json(swaps.map(swapView));\n  }\n\n  const pairs = swaps.map(swap => {\n    const pair = Pair.fromOrder(swap);\n    return { id: swap.id, pair, swap: swapView(swap) };\n  });\n\n  return res.json(pairs);\n};\n\nconst getFinished = ({ query: { parsed, withFees } }, res) => {\n  const swaps = history.getAllFinished().map(id => new Swap(id, app));\n\n  if (!parsed) {\n    return res.json(swaps.map(swapView));\n  }\n\n  const pairs = swaps.map(swap => {\n    const pair = Pair.fromOrder(swap);\n    return { id: swap.id, pair, swap: swapView(swap) };\n  });\n\n  return res.json(pairs);\n};\n\nmodule.exports = {\n  getSwap,\n  getState,\n  goSwap,\n  refund,\n\n  nextStep,\n  withSwap,\n  sign,\n  submitSecret,\n  verifyBtcScript,\n  syncBalance,\n  tryWithdraw,\n\n  getInProgress,\n  getFinished\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiaGVscGVycyIsImhpc3RvcnkiLCJyZXF1aXJlIiwiYXBwIiwiZmluZFN3YXAiLCJzd2FwVmlldyIsImRlY29kZUZsb3ciLCJyZW1vdmVTd2FwIiwiUGFpciIsImRlZmF1bHQiLCJmbG93cyIsIlN3YXAiLCJPcmRlcnMiLCJzZXJ2aWNlcyIsIm9yZGVycyIsImNyeXB0byIsImdlblNlY3JldCIsInJhbmRvbUJ5dGVzIiwidG9TdHJpbmciLCJpbml0IiwidW50aWwiLCJfc3RlcCIsInN3YXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldEludGVydmFsIiwiZmxvdyIsInN0YXRlIiwic3RlcCIsIm9uIiwicnVuU3dhcCIsImNvbnNvbGUiLCJsb2ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJfZmxvd05hbWUiLCJzdGVwcyIsImxlbmd0aCIsInN1Ym1pdFNlY3JldCIsImV0aFN3YXBXaXRoZHJhd1RyYW5zYWN0aW9uSGFzaCIsInNpZ24iLCJ2ZXJpZnlCdGNTY3JpcHQiLCJidGNTd2FwV2l0aGRyYXdUcmFuc2FjdGlvbkhhc2giLCJnZXRTd2FwIiwicmVxIiwicmVzIiwidGhlbiIsImpzb24iLCJnZXRTdGF0ZSIsImdvU3dhcCIsIndpdGhTd2FwIiwic3dhcEhhbmRsZXIiLCJxdWVyeSIsImVycm9yIiwiY29kZSIsIm5hbWUiLCJtZXNzYWdlIiwic3RhY2siLCJpbmZvIiwidHlwZSIsImlkIiwic3RhdHVzIiwibmV4dFN0ZXAiLCJjdXJyZW50U3RlcCIsImJ0Y1NjcmlwdFZlcmlmaWVkIiwiRXJyb3IiLCJzZWNyZXQiLCJzZWNyZXRIYXNoIiwic3luY0JhbGFuY2UiLCJpc0JhbGFuY2VFbm91Z2giLCJiYWxhbmNlIiwidHJ5UmVmdW5kIiwiZXJyIiwiYnRjU2NyaXB0VmFsdWVzIiwibG9ja1RpbWUiLCJub3ciLCJNYXRoIiwiY2VpbCIsInJlZnVuZCIsInJlc3VsdCIsInVzZHRTY3JpcHRWYWx1ZXMiLCJzY3JpcHRWYWx1ZXMiLCJkZXNjcmlwdGlvbiIsInRyeVdpdGhkcmF3IiwiZ2V0SW5Qcm9ncmVzcyIsInBhcnNlZCIsIndpdGhGZWVzIiwic3dhcHMiLCJnZXRBbGxJblByb2dyZXNzIiwibWFwIiwicGFpcnMiLCJwYWlyIiwiZnJvbU9yZGVyIiwiZ2V0RmluaXNoZWQiLCJnZXRBbGxGaW5pc2hlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNLEVBQUVBLFNBQVMsRUFBRUMsT0FBRixFQUFYLEtBQTBCQyxRQUFRLGtCQUFSLENBQWhDOztBQUVBLE1BQU0sRUFBRUMsR0FBRixLQUFVRCxRQUFRLGVBQVIsQ0FBaEI7QUFDQSxNQUFNLEVBQUVFLFFBQUYsRUFBWUMsUUFBWixFQUFzQkMsVUFBdEIsRUFBa0NDLFVBQWxDLEtBQWlETCxRQUFRLGVBQVIsQ0FBdkQ7QUFDQSxNQUFNTSxPQUFPTixRQUFRLHdCQUFSLEVBQWtDTyxPQUEvQzs7QUFFQSxNQUFNQyxRQUFRUixRQUFRLFlBQVIsQ0FBZDtBQUNBLE1BQU1TLE9BQU9ULFFBQVEsV0FBUixFQUFxQk8sT0FBbEM7QUFDQSxNQUFNRyxTQUFTVCxJQUFJVSxRQUFKLENBQWFDLE1BQTVCOztBQUVBLE1BQU1DLFNBQVNiLFFBQVEsUUFBUixDQUFmO0FBQ0EsTUFBTWMsWUFBWSxNQUFNRCxPQUFPRSxXQUFQLENBQW1CLEVBQW5CLEVBQXVCQyxRQUF2QixDQUFnQyxLQUFoQyxDQUF4Qjs7QUFFQWpCLFFBQVFrQixJQUFSLENBQWFoQixHQUFiOztBQUVBLE1BQU1pQixRQUFRLENBQUNDLEtBQUQsRUFBUUMsSUFBUixLQUNaLElBQUlDLE9BQUosQ0FBWUMsV0FBVztBQUNyQkMsY0FDRSxNQUFRSCxLQUFLSSxJQUFMLENBQVVDLEtBQVYsQ0FBZ0JDLElBQWhCLElBQXdCUCxLQUExQixHQUNGRyxTQURFLEdBQ1UsSUFGbEIsRUFHQSxHQUhBOztBQUtBRixPQUFLTyxFQUFMLENBQVEsWUFBUixFQUF1QkQsSUFBRCxJQUFZQSxRQUFRUCxLQUFW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QUFNLElBQUlqRCxJQUFKLENBQVNpRCxFQUFULEVBQWF6RCxHQUFiLENBRkMsQ0FBZDs7QUFJQSxNQUFJLENBQUNrRixNQUFMLEVBQWE7QUFDWCxXQUFPeEMsSUFBSUUsSUFBSixDQUFTd0MsTUFBTUUsR0FBTixDQUFVcEYsUUFBVixDQUFULENBQVA7QUFDRDs7QUFFRCxRQUFNcUYsUUFBUUgsTUFBTUUsR0FBTixDQUFVbkUsUUFBUTtBQUM5QixVQUFNcUUsT0FBT25GLEtBQUtvRixTQUFMLENBQWV0RSxJQUFmLENBQWI7QUFDQSxXQUFPLEVBQUVzQyxJQUFJdEMsS0FBS3NDLEVBQVgsRUFBZStCLElBQWYsRUFBcUJyRSxNQUFNakIsU0FBU2lCLElBQVQsQ0FBM0IsRUFBUDtBQUNELEdBSGEsQ0FBZDs7QUFLQSxTQUFPdUIsSUFBSUUsSUFBSixDQUFTMkMsS0FBVCxDQUFQO0FBQ0QsQ0FmRDs7QUFpQkFLLE9BQU9DLE9BQVAsR0FBaUI7QUFDZnJELFNBRGU7QUFFZkssVUFGZTtBQUdmQyxRQUhlO0FBSWY2QixRQUplOztBQU1maEIsVUFOZTtBQU9mWixVQVBlO0FBUWZWLE1BUmU7QUFTZkYsY0FUZTtBQVVmRyxpQkFWZTtBQVdmMkIsYUFYZTtBQVlmZSxhQVplOztBQWNmQyxlQWRlO0FBZWZTO0FBZmUsQ0FBakIiLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9zd2FwcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgaGVscGVyczogeyBoaXN0b3J5IH19ID0gcmVxdWlyZSgnc2ltcGxlLnN3YXAuY29yZScpXG5cbmNvbnN0IHsgYXBwIH0gPSByZXF1aXJlKCcuLi8uLi9zd2FwQXBwJylcbmNvbnN0IHsgZmluZFN3YXAsIHN3YXBWaWV3LCBkZWNvZGVGbG93LCByZW1vdmVTd2FwIH0gPSByZXF1aXJlKCcuLi8uLi9oZWxwZXJzJylcbmNvbnN0IFBhaXIgPSByZXF1aXJlKCcuLi8uLi9taWNyb2JvdC9QYWlyLmpzJykuZGVmYXVsdFxuXG5jb25zdCBmbG93cyA9IHJlcXVpcmUoJ3N3YXAuZmxvd3MnKVxuY29uc3QgU3dhcCA9IHJlcXVpcmUoJ3N3YXAuc3dhcCcpLmRlZmF1bHRcbmNvbnN0IE9yZGVycyA9IGFwcC5zZXJ2aWNlcy5vcmRlcnNcblxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbmNvbnN0IGdlblNlY3JldCA9ICgpID0+IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoJ2hleCcpXG5cbmhpc3RvcnkuaW5pdChhcHApXG5cbmNvbnN0IHVudGlsID0gKF9zdGVwLCBzd2FwKSA9PlxuICBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICBzZXRJbnRlcnZhbChcbiAgICAgICgpID0+ICggc3dhcC5mbG93LnN0YXRlLnN0ZXAgPj0gX3N0ZXAgKVxuICAgICAgICA/IHJlc29sdmUoKSA6IG51bGwsXG4gICAgNTAwKVxuXG4gICAgc3dhcC5vbignZW50ZXIgc3RlcCcsIChzdGVwKSA9PiAoIHN0ZXAgPj0gX3N0ZXAgKSA/IHJlc29sdmUoKSA6IG51bGwpXG4gIH0pXG5cbmNvbnN0IHJ1blN3YXAgPSAoc3dhcCkgPT4ge1xuICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdCRUdJTicsIHN3YXAuZmxvdy5fZmxvd05hbWUpXG4gIGNvbnNvbGUubG9nKG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgJ3RvdGFsIHN0ZXBzJywgc3dhcC5mbG93LnN0ZXBzLmxlbmd0aClcblxuICBzd2FwLm9uKCdlbnRlciBzdGVwJywgKHN0ZXApID0+IHtcbiAgICBjb25zb2xlLmxvZygnZW50ZXIgc3RlcCcsIHN0ZXApXG4gICAgc3dpdGNoIChzd2FwLmZsb3cuX2Zsb3dOYW1lKSB7XG4gICAgICBjYXNlIFwiQlRDMkVUSFwiOlxuICAgICAgY2FzZSBcIkJDSDJFVEhcIjpcbiAgICAgIGNhc2UgXCJCVEMyTk9YT05cIjpcbiAgICAgIGNhc2UgXCJCVEMyU1dBUFwiOlxuICAgICAgY2FzZSBcIkJUQzJYU0FUXCI6XG4gICAgICBjYXNlIFwiQlRDMkhEUFwiOlxuICAgICAgY2FzZSBcIlVTRFQyTk9YT05cIjpcbiAgICAgIGNhc2UgXCJVU0RUMlNXQVBcIjpcblxuICAgICAgICBpZiAoIHN0ZXAgPT0gMiApIHN3YXAuZmxvdy5zdWJtaXRTZWNyZXQoZ2VuU2VjcmV0KCkpXG5cbiAgICAgICAgaWYgKCBzdGVwICsgMSA9PT0gc3dhcC5mbG93LnN0ZXBzLmxlbmd0aCApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdbRklOSVNIRURdIHR4Jywgc3dhcC5mbG93LnN0YXRlLmV0aFN3YXBXaXRoZHJhd1RyYW5zYWN0aW9uSGFzaClcblxuICAgICAgICAgIC8vIE9yZGVycy5yZW1vdmUoc3dhcC5pZClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cblxuICAgICAgY2FzZSBcIkVUSDJCVENcIjpcbiAgICAgIGNhc2UgXCJFVEgyQkNIXCI6XG4gICAgICBjYXNlIFwiTk9YT04yQlRDXCI6XG4gICAgICBjYXNlIFwiU1dBUDJCVENcIjpcbiAgICAgIGNhc2UgXCJYU0FUMkJUQ1wiOlxuICAgICAgY2FzZSBcIkhEUDJCVENcIjpcbiAgICAgIGNhc2UgXCJOT1hPTjJVU0RUXCI6XG4gICAgICBjYXNlIFwiU1dBUDJVU0RUXCI6XG5cbiAgICAgICAgaWYgKCBzdGVwID09IDEgKSBzd2FwLmZsb3cuc2lnbigpXG4gICAgICAgIGlmICggc3RlcCA9PSAzICkgc3dhcC5mbG93LnZlcmlmeUJ0Y1NjcmlwdCgpXG5cbiAgICAgICAgaWYgKCBzdGVwICsgMSA9PT0gc3dhcC5mbG93LnN0ZXBzLmxlbmd0aCApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksICdbRklOSVNIRURdIHR4Jywgc3dhcC5mbG93LnN0YXRlLmJ0Y1N3YXBXaXRoZHJhd1RyYW5zYWN0aW9uSGFzaClcblxuICAgICAgICAgIC8vIE9yZGVycy5yZW1vdmUoc3dhcC5pZClcbiAgICAgICAgfVxuICAgIH1cbiAgfSlcbn1cblxuY29uc3QgZ2V0U3dhcCA9IChyZXEsIHJlcykgPT4ge1xuICBmaW5kU3dhcChhcHApKHJlcSwgcmVzKS50aGVuKChzd2FwKSA9PiB7XG4gICAgcmVzLmpzb24oc3dhcFZpZXcoc3dhcCkpXG4gIH0pXG59XG5cbmNvbnN0IGdldFN0YXRlID0gKHJlcSwgcmVzKSA9PiB7XG4gIGZpbmRTd2FwKGFwcCkocmVxLCByZXMpLnRoZW4oKHN3YXApID0+IHtcbiAgICByZXMuanNvbigoc3dhcC5mbG93LnN0YXRlKSlcbiAgfSlcbn1cblxuY29uc3QgZ29Td2FwID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHN3YXAgPSBhd2FpdCBmaW5kU3dhcChhcHApKHJlcSwgcmVzKVxuXG4gIGlmICggc3dhcC5mbG93ICYmIHN3YXAuZmxvdy5zdGF0ZS5zdGVwIClcbiAgICByZXR1cm4gcmVzLmpzb24oc3dhcFZpZXcoc3dhcCkpXG5cbiAgcnVuU3dhcChzd2FwKVxuXG4gIHJlcy5qc29uKHN3YXBWaWV3KHN3YXApKVxufVxuXG5jb25zdCB3aXRoU3dhcCA9IChzd2FwSGFuZGxlcikgPT4gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCBzd2FwXG4gIHRyeSB7XG4gICAgc3dhcCA9IGF3YWl0IGZpbmRTd2FwKGFwcCkocmVxLCByZXMpXG4gICAgYXdhaXQgc3dhcEhhbmRsZXIoc3dhcCwgcmVxLnF1ZXJ5KVxuICAgIHJlcy5qc29uKHN3YXBWaWV3KHN3YXApKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IHsgY29kZSwgbmFtZSwgbWVzc2FnZSwgc3RhY2sgfSA9IGVycm9yXG4gICAgY29uc3QgaW5mbyA9IHtcbiAgICAgIGNvZGUsIG5hbWUsIG1lc3NhZ2UsXG4gICAgICBzdGVwOiBzd2FwLmZsb3cuc3RhdGUuc3RlcCxcbiAgICAgIHR5cGU6IHN3YXAudHlwZSwgc3dhcDogc3dhcC5pZCxcbiAgICAgIHN0YWNrLFxuICAgICAgc3RhdGU6IHN3YXAuZmxvdy5zdGF0ZSxcbiAgICAgIGVycm9yIH1cbiAgICBjb25zb2xlLmVycm9yKGluZm8pXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oaW5mbylcbiAgfVxufVxuXG5jb25zdCBuZXh0U3RlcCA9IGFzeW5jIChzd2FwKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRTdGVwID0gc3dhcC5mbG93LnN0YXRlLnN0ZXBcbiAgY29uc29sZS5sb2cobmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBgd2FpdGluZyBmb3Igc3RlcD0ke2N1cnJlbnRTdGVwICsgMX1gKVxuXG4gIGF3YWl0IHVudGlsKGN1cnJlbnRTdGVwICsgMSwgc3dhcClcbn1cblxuY29uc3Qgc2lnbiA9IGFzeW5jIChzd2FwKSA9PiB7XG4gIC8vIGlmIChzd2FwLmZsb3cuc3RhdGUuaXNNZVNpZ25lZCkgdGhyb3cgbmV3IEVycm9yKGBBbHJlYWR5IHNpZ25lZGApXG5cbiAgYXdhaXQgdW50aWwoMSwgc3dhcClcbiAgYXdhaXQgc3dhcC5mbG93LnNpZ24oKVxuICBhd2FpdCB1bnRpbCgyLCBzd2FwKVxufVxuXG5jb25zdCB2ZXJpZnlCdGNTY3JpcHQgPSBhc3luYyAoc3dhcCkgPT4ge1xuICBpZiAoc3dhcC5mbG93LnN0YXRlLmJ0Y1NjcmlwdFZlcmlmaWVkKSB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgdmVyaWZpZWRgKVxuXG4gIGF3YWl0IHVudGlsKDMsIHN3YXApXG4gIGF3YWl0IHN3YXAuZmxvdy52ZXJpZnlCdGNTY3JpcHQoKVxuICBhd2FpdCB1bnRpbCg0LCBzd2FwKVxufVxuXG5jb25zdCBzdWJtaXRTZWNyZXQgPSBhc3luYyAoc3dhcCkgPT4ge1xuICBpZiAoc3dhcC5mbG93LnN0YXRlLnNlY3JldClcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFscmVhZHkgc3VibWl0ICR7c3dhcC5mbG93LnN0YXRlLnNlY3JldEhhc2h9YClcblxuICBhd2FpdCB1bnRpbCgyLCBzd2FwKVxuICBhd2FpdCBzd2FwLmZsb3cuc3VibWl0U2VjcmV0KGdlblNlY3JldCgpKVxuICBhd2FpdCB1bnRpbCgzLCBzd2FwKVxufVxuXG5jb25zdCBzeW5jQmFsYW5jZSA9IGFzeW5jIChzd2FwKSA9PiB7XG4gIGlmIChzd2FwLmZsb3cuc3RhdGUuaXNCYWxhbmNlRW5vdWdoKVxuICAgIHRocm93IG5ldyBFcnJvcihgQWxyZWFkeSBzeW5jZWQgJHtzd2FwLmZsb3cuc3RhdGUuYmFsYW5jZX1gKVxuXG4gIGF3YWl0IHVudGlsKDMsIHN3YXApXG4gIGF3YWl0IHN3YXAuZmxvdy5zeW5jQmFsYW5jZSgpXG4gIGF3YWl0IHVudGlsKDQsIHN3YXApXG59XG5cbmNvbnN0IHRyeVJlZnVuZCA9IGFzeW5jIChzd2FwKSA9PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc3dhcC5mbG93LnRyeVJlZnVuZCgpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIuZXJyb3IgPT0gJzY0OiBub24tZmluYWwuIENvZGU6LTI2JylcbiAgICAgIGVyci5tZXNzYWdlID1cbiAgICAgICAgYENhbid0IGJlIG1pbmVkIHVudGlsIGxvY2tUaW1lID0gJHtzd2FwLmZsb3cuc3RhdGUuYnRjU2NyaXB0VmFsdWVzLmxvY2tUaW1lfSwgbm93ID0gJHtEYXRlLm5vdygpLzEwMDB9LCBzZWNvbmRzTGVmdCA9ICR7TWF0aC5jZWlsKHN3YXAuZmxvdy5zdGF0ZS5idGNTY3JpcHRWYWx1ZXMubG9ja1RpbWUgLSBEYXRlLm5vdygpLzEwMDApfWBcblxuICAgIHRocm93IGVyclxuICB9XG59XG5cbmNvbnN0IHJlZnVuZCA9IChyZXEsIHJlcykgPT4ge1xuICBmaW5kU3dhcChhcHApKHJlcSwgcmVzKS50aGVuKGFzeW5jIChzd2FwKSA9PiB7XG5cbiAgICBpZiAoICFzd2FwLmZsb3cgfHwgIXN3YXAuZmxvdy5zdGF0ZSB8fCAhc3dhcC5mbG93LnN0YXRlLnN0ZXAgKVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAzKS5qc29uKHsgZXJyb3I6ICdub3Qgc3RhcnRlZCcgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzd2FwLmZsb3cudHJ5UmVmdW5kKClcbiAgICAgIHJlcy5qc29uKHsgc3RhdHVzOiAncmVmdW5kJywgcmVzdWx0IH0pXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyLmVycm9yID09ICc2NDogbm9uLWZpbmFsLiBDb2RlOi0yNicpIHtcbiAgICAgICAgY29uc3QgeyB1c2R0U2NyaXB0VmFsdWVzLCBidGNTY3JpcHRWYWx1ZXMgfSA9IHN3YXAuZmxvdy5zdGF0ZVxuICAgICAgICBjb25zdCBzY3JpcHRWYWx1ZXMgPSB1c2R0U2NyaXB0VmFsdWVzIHx8IGJ0Y1NjcmlwdFZhbHVlc1xuXG4gICAgICAgIGVyci5kZXNjcmlwdGlvbiA9XG4gICAgICAgICAgYENhbid0IGJlIG1pbmVkIHVudGlsIGxvY2tUaW1lID0gJHtzY3JpcHRWYWx1ZXMubG9ja1RpbWV9LCBub3cgPSAke0RhdGUubm93KCkvMTAwMH0sIHNlY29uZHNMZWZ0ID0gJHtNYXRoLmNlaWwoc2NyaXB0VmFsdWVzLmxvY2tUaW1lIC0gRGF0ZS5ub3coKS8xMDAwKX1gXG4gICAgICB9XG5cbiAgICAgIHJlcy5zdGF0dXMoNDAzKS5qc29uKHtcbiAgICAgICAgcmVzdWx0OiAncmVmdW5kIGVycm9yJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGVyci5kZXNjcmlwdGlvbixcbiAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgIGVycm9yOiBlcnJcbiAgICAgIH0pXG4gICAgICB0aHJvdyBlcnJcbiAgICB9XG5cbiAgfSlcblxufVxuXG5jb25zdCB0cnlXaXRoZHJhdyA9IGFzeW5jIChzd2FwLCB7IHNlY3JldCB9KSA9PiB7XG4gIGlmICghc2VjcmV0KVxuICAgIHRocm93IG5ldyBFcnJvcihgWW91IG5lZWQgdG8gcHJvdmlkZSBzZWNyZXQgZm9yIG1hbnVhbCB3aXRoZHJhd2FsYClcblxuICBhd2FpdCBzd2FwLmZsb3cudHJ5V2l0aGRyYXcoc2VjcmV0KVxufVxuXG5jb25zdCBnZXRJblByb2dyZXNzID0gKHsgcXVlcnk6IHsgcGFyc2VkLCB3aXRoRmVlcyB9fSwgcmVzKSA9PiB7XG4gIGNvbnN0IHN3YXBzID0gaGlzdG9yeVxuICAgICAgLmdldEFsbEluUHJvZ3Jlc3MoKVxuICAgICAgLm1hcChpZCA9PiBuZXcgU3dhcChpZCwgYXBwKSlcblxuICBpZiAoIXBhcnNlZCkge1xuICAgIHJldHVybiByZXMuanNvbihzd2Fwcy5tYXAoc3dhcFZpZXcpKVxuICB9XG5cbiAgY29uc3QgcGFpcnMgPSBzd2Fwcy5tYXAoc3dhcCA9PiB7XG4gICAgY29uc3QgcGFpciA9IFBhaXIuZnJvbU9yZGVyKHN3YXApXG4gICAgcmV0dXJuIHsgaWQ6IHN3YXAuaWQsIHBhaXIsIHN3YXA6IHN3YXBWaWV3KHN3YXApIH1cbiAgfSlcblxuICByZXR1cm4gcmVzLmpzb24ocGFpcnMpXG59XG5cbmNvbnN0IGdldEZpbmlzaGVkID0gKHsgcXVlcnk6IHsgcGFyc2VkLCB3aXRoRmVlcyB9fSwgcmVzKSA9PiB7XG4gIGNvbnN0IHN3YXBzID0gaGlzdG9yeVxuICAgIC5nZXRBbGxGaW5pc2hlZCgpXG4gICAgLm1hcChpZCA9PiBuZXcgU3dhcChpZCwgYXBwKSlcblxuICBpZiAoIXBhcnNlZCkge1xuICAgIHJldHVybiByZXMuanNvbihzd2Fwcy5tYXAoc3dhcFZpZXcpKVxuICB9XG5cbiAgY29uc3QgcGFpcnMgPSBzd2Fwcy5tYXAoc3dhcCA9PiB7XG4gICAgY29uc3QgcGFpciA9IFBhaXIuZnJvbU9yZGVyKHN3YXApXG4gICAgcmV0dXJuIHsgaWQ6IHN3YXAuaWQsIHBhaXIsIHN3YXA6IHN3YXBWaWV3KHN3YXApIH1cbiAgfSlcblxuICByZXR1cm4gcmVzLmpzb24ocGFpcnMpXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRTd2FwLFxuICBnZXRTdGF0ZSxcbiAgZ29Td2FwLFxuICByZWZ1bmQsXG5cbiAgbmV4dFN0ZXAsXG4gIHdpdGhTd2FwLFxuICBzaWduLFxuICBzdWJtaXRTZWNyZXQsXG4gIHZlcmlmeUJ0Y1NjcmlwdCxcbiAgc3luY0JhbGFuY2UsXG4gIHRyeVdpdGhkcmF3LFxuXG4gIGdldEluUHJvZ3Jlc3MsXG4gIGdldEZpbmlzaGVkLFxufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "controller.js"
      ],
      "names": [
        "helpers",
        "history",
        "require",
        "app",
        "findSwap",
        "swapView",
        "decodeFlow",
        "removeSwap",
        "Pair",
        "default",
        "flows",
        "Swap",
        "Orders",
        "services",
        "orders",
        "crypto",
        "genSecret",
        "randomBytes",
        "toString",
        "init",
        "until",
        "_step",
        "swap",
        "Promise",
        "resolve",
        "setInterval",
        "flow",
        "state",
        "step",
        "on",
        "runSwap",
        "console",
        "log",
        "Date",
        "toISOString",
        "_flowName",
        "steps",
        "length",
        "submitSecret",
        "ethSwapWithdrawTransactionHash",
        "sign",
        "verifyBtcScript",
        "btcSwapWithdrawTransactionHash",
        "getSwap",
        "req",
        "res",
        "then",
        "json",
        "getState",
        "goSwap",
        "withSwap",
        "swapHandler",
        "query",
        "error",
        "code",
        "name",
        "message",
        "stack",
        "info",
        "type",
        "id",
        "status",
        "nextStep",
        "currentStep",
        "btcScriptVerified",
        "Error",
        "secret",
        "secretHash",
        "syncBalance",
        "isBalanceEnough",
        "balance",
        "tryRefund",
        "err",
        "btcScriptValues",
        "lockTime",
        "now",
        "Math",
        "ceil",
        "refund",
        "result",
        "usdtScriptValues",
        "scriptValues",
        "description",
        "tryWithdraw",
        "getInProgress",
        "parsed",
        "withFees",
        "swaps",
        "getAllInProgress",
        "map",
        "pairs",
        "pair",
        "fromOrder",
        "getFinished",
        "getAllFinished",
        "module",
        "exports"
      ],
      "mappings": "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",
      "file": "controller.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/swaps",
      "sourcesContent": [
        "const { helpers: { history }} = require('simple.swap.core')\n\nconst { app } = require('../../swapApp')\nconst { findSwap, swapView, decodeFlow, removeSwap } = require('../../helpers')\nconst Pair = require('../../microbot/Pair.js').default\n\nconst flows = require('swap.flows')\nconst Swap = require('swap.swap').default\nconst Orders = app.services.orders\n\nconst crypto = require('crypto')\nconst genSecret = () => crypto.randomBytes(32).toString('hex')\n\nhistory.init(app)\n\nconst until = (_step, swap) =>\n  new Promise(resolve => {\n    setInterval(\n      () => ( swap.flow.state.step >= _step )\n        ? resolve() : null,\n    500)\n\n    swap.on('enter step', (step) => ( step >= _step ) ? resolve() : null)\n  })\n\nconst runSwap = (swap) => {\n  console.log(new Date().toISOString(), 'BEGIN', swap.flow._flowName)\n  console.log(new Date().toISOString(), 'total steps', swap.flow.steps.length)\n\n  swap.on('enter step', (step) => {\n    console.log('enter step', step)\n    switch (swap.flow._flowName) {\n      case \"BTC2ETH\":\n      case \"BCH2ETH\":\n      case \"BTC2NOXON\":\n      case \"BTC2SWAP\":\n      case \"BTC2XSAT\":\n      case \"BTC2HDP\":\n      case \"USDT2NOXON\":\n      case \"USDT2SWAP\":\n\n        if ( step == 2 ) swap.flow.submitSecret(genSecret())\n\n        if ( step + 1 === swap.flow.steps.length ) {\n          console.log(new Date().toISOString(), '[FINISHED] tx', swap.flow.state.ethSwapWithdrawTransactionHash)\n\n          // Orders.remove(swap.id)\n        }\n        return\n\n      case \"ETH2BTC\":\n      case \"ETH2BCH\":\n      case \"NOXON2BTC\":\n      case \"SWAP2BTC\":\n      case \"XSAT2BTC\":\n      case \"HDP2BTC\":\n      case \"NOXON2USDT\":\n      case \"SWAP2USDT\":\n\n        if ( step == 1 ) swap.flow.sign()\n        if ( step == 3 ) swap.flow.verifyBtcScript()\n\n        if ( step + 1 === swap.flow.steps.length ) {\n          console.log(new Date().toISOString(), '[FINISHED] tx', swap.flow.state.btcSwapWithdrawTransactionHash)\n\n          // Orders.remove(swap.id)\n        }\n    }\n  })\n}\n\nconst getSwap = (req, res) => {\n  findSwap(app)(req, res).then((swap) => {\n    res.json(swapView(swap))\n  })\n}\n\nconst getState = (req, res) => {\n  findSwap(app)(req, res).then((swap) => {\n    res.json((swap.flow.state))\n  })\n}\n\nconst goSwap = async (req, res) => {\n  const swap = await findSwap(app)(req, res)\n\n  if ( swap.flow && swap.flow.state.step )\n    return res.json(swapView(swap))\n\n  runSwap(swap)\n\n  res.json(swapView(swap))\n}\n\nconst withSwap = (swapHandler) => async (req, res) => {\n  let swap\n  try {\n    swap = await findSwap(app)(req, res)\n    await swapHandler(swap, req.query)\n    res.json(swapView(swap))\n  } catch (error) {\n    const { code, name, message, stack } = error\n    const info = {\n      code, name, message,\n      step: swap.flow.state.step,\n      type: swap.type, swap: swap.id,\n      stack,\n      state: swap.flow.state,\n      error }\n    console.error(info)\n    res.status(500).json(info)\n  }\n}\n\nconst nextStep = async (swap) => {\n  const currentStep = swap.flow.state.step\n  console.log(new Date().toISOString(), `waiting for step=${currentStep + 1}`)\n\n  await until(currentStep + 1, swap)\n}\n\nconst sign = async (swap) => {\n  // if (swap.flow.state.isMeSigned) throw new Error(`Already signed`)\n\n  await until(1, swap)\n  await swap.flow.sign()\n  await until(2, swap)\n}\n\nconst verifyBtcScript = async (swap) => {\n  if (swap.flow.state.btcScriptVerified) throw new Error(`Already verified`)\n\n  await until(3, swap)\n  await swap.flow.verifyBtcScript()\n  await until(4, swap)\n}\n\nconst submitSecret = async (swap) => {\n  if (swap.flow.state.secret)\n    throw new Error(`Already submit ${swap.flow.state.secretHash}`)\n\n  await until(2, swap)\n  await swap.flow.submitSecret(genSecret())\n  await until(3, swap)\n}\n\nconst syncBalance = async (swap) => {\n  if (swap.flow.state.isBalanceEnough)\n    throw new Error(`Already synced ${swap.flow.state.balance}`)\n\n  await until(3, swap)\n  await swap.flow.syncBalance()\n  await until(4, swap)\n}\n\nconst tryRefund = async (swap) => {\n  try {\n    await swap.flow.tryRefund()\n  } catch (err) {\n    if (err.error == '64: non-final. Code:-26')\n      err.message =\n        `Can't be mined until lockTime = ${swap.flow.state.btcScriptValues.lockTime}, now = ${Date.now()/1000}, secondsLeft = ${Math.ceil(swap.flow.state.btcScriptValues.lockTime - Date.now()/1000)}`\n\n    throw err\n  }\n}\n\nconst refund = (req, res) => {\n  findSwap(app)(req, res).then(async (swap) => {\n\n    if ( !swap.flow || !swap.flow.state || !swap.flow.state.step )\n      return res.status(403).json({ error: 'not started' })\n\n    try {\n      const result = await swap.flow.tryRefund()\n      res.json({ status: 'refund', result })\n    } catch (err) {\n      if (err.error == '64: non-final. Code:-26') {\n        const { usdtScriptValues, btcScriptValues } = swap.flow.state\n        const scriptValues = usdtScriptValues || btcScriptValues\n\n        err.description =\n          `Can't be mined until lockTime = ${scriptValues.lockTime}, now = ${Date.now()/1000}, secondsLeft = ${Math.ceil(scriptValues.lockTime - Date.now()/1000)}`\n      }\n\n      res.status(403).json({\n        result: 'refund error',\n        description: err.description,\n        message: err.message,\n        error: err\n      })\n      throw err\n    }\n\n  })\n\n}\n\nconst tryWithdraw = async (swap, { secret }) => {\n  if (!secret)\n    throw new Error(`You need to provide secret for manual withdrawal`)\n\n  await swap.flow.tryWithdraw(secret)\n}\n\nconst getInProgress = ({ query: { parsed, withFees }}, res) => {\n  const swaps = history\n      .getAllInProgress()\n      .map(id => new Swap(id, app))\n\n  if (!parsed) {\n    return res.json(swaps.map(swapView))\n  }\n\n  const pairs = swaps.map(swap => {\n    const pair = Pair.fromOrder(swap)\n    return { id: swap.id, pair, swap: swapView(swap) }\n  })\n\n  return res.json(pairs)\n}\n\nconst getFinished = ({ query: { parsed, withFees }}, res) => {\n  const swaps = history\n    .getAllFinished()\n    .map(id => new Swap(id, app))\n\n  if (!parsed) {\n    return res.json(swaps.map(swapView))\n  }\n\n  const pairs = swaps.map(swap => {\n    const pair = Pair.fromOrder(swap)\n    return { id: swap.id, pair, swap: swapView(swap) }\n  })\n\n  return res.json(pairs)\n}\n\nmodule.exports = {\n  getSwap,\n  getState,\n  goSwap,\n  refund,\n\n  nextStep,\n  withSwap,\n  sign,\n  submitSecret,\n  verifyBtcScript,\n  syncBalance,\n  tryWithdraw,\n\n  getInProgress,\n  getFinished,\n}\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/homepage/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/homepage\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/homepage/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/homepage/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/homepage",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/homepage",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nvar path = require('path');\n\nconst home = (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n\n    res.sendFile(path.join(__dirname + '/../web/home.html'));\n  });\n\n  return function home(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})();\n\nmodule.exports = home;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbInBhdGgiLCJyZXF1aXJlIiwiaG9tZSIsInJlcSIsInJlcyIsInNlbmRGaWxlIiwiam9pbiIsIl9fZGlybmFtZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFJQSxPQUFPQyxRQUFRLE1BQVIsQ0FBWDs7QUFHQSxNQUFNQztBQUFBLCtCQUFPLFdBQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFvQjs7QUFHL0JBLFFBQUlDLFFBQUosQ0FBYUwsS0FBS00sSUFBTCxDQUFVQyxZQUFZLG1CQUF0QixDQUFiO0FBRUQsR0FMSzs7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFOOztBQVNBQyxPQUFPQyxPQUFQLEdBQWlCUCxJQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9ob21lcGFnZSIsInNvdXJjZXNDb250ZW50IjpbInZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5cbmNvbnN0IGhvbWUgPSBhc3luYyAocmVxLCByZXMpID0+IHtcblxuXG4gIHJlcy5zZW5kRmlsZShwYXRoLmpvaW4oX19kaXJuYW1lICsgJy8uLi93ZWIvaG9tZS5odG1sJykpO1xuXG59XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGhvbWUiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "path",
        "require",
        "home",
        "req",
        "res",
        "sendFile",
        "join",
        "__dirname",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;;AAGA,MAAMC;AAAA,+BAAO,WAAOC,GAAP,EAAYC,GAAZ,EAAoB;;AAG/BA,QAAIC,QAAJ,CAAaL,KAAKM,IAAL,CAAUC,YAAY,mBAAtB,CAAb;AAED,GALK;;AAAA;AAAA;AAAA;AAAA,IAAN;;AASAC,OAAOC,OAAP,GAAiBP,IAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/homepage",
      "sourcesContent": [
        "var path = require('path');\n\n\nconst home = async (req, res) => {\n\n\n  res.sendFile(path.join(__dirname + '/../web/home.html'));\n\n}\n\n\n\nmodule.exports = home"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/kraken/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/kraken\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/kraken/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/kraken/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/kraken",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/kraken",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst kraken = require('../../services/instances/kraken');\n\nconst { Router } = require('express');\nconst router = new Router();\n\nrouter.get('/', (() => {\n  var _ref = _asyncToGenerator(function* (req, res) {\n    yield kraken.getBalance().then(function (r) {\n\n      res.json(Object.entries(r.result));\n    });\n  });\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})());\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImtyYWtlbiIsInJlcXVpcmUiLCJSb3V0ZXIiLCJyb3V0ZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJnZXRCYWxhbmNlIiwidGhlbiIsInIiLCJqc29uIiwiT2JqZWN0IiwiZW50cmllcyIsInJlc3VsdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxNQUFNQSxTQUFTQyxRQUFTLGlDQUFULENBQWY7O0FBRUEsTUFBTSxFQUFFQyxNQUFGLEtBQWFELFFBQVEsU0FBUixDQUFuQjtBQUNBLE1BQU1FLFNBQVMsSUFBSUQsTUFBSixFQUFmOztBQUdBQyxPQUFPQyxHQUFQLENBQVcsR0FBWDtBQUFBLCtCQUFnQixXQUFRQyxHQUFSLEVBQWFDLEdBQWIsRUFBcUI7QUFDbEMsVUFBTU4sT0FBT08sVUFBUCxHQUFvQkMsSUFBcEIsQ0FDSixVQUFDQyxDQUFELEVBQU87O0FBRUxILFVBQUlJLElBQUosQ0FBU0MsT0FBT0MsT0FBUCxDQUFlSCxFQUFFSSxNQUFqQixDQUFUO0FBQ0QsS0FKRyxDQUFOO0FBTUYsR0FQRDs7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFTQUMsT0FBT0MsT0FBUCxHQUFpQlosTUFBakIiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiL2hvbWUvcG0ydXNlci9zd2FwLmJvdC9yb3V0ZXMva3Jha2VuIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qga3Jha2VuID0gcmVxdWlyZSAoJy4uLy4uL3NlcnZpY2VzL2luc3RhbmNlcy9rcmFrZW4nKVxuXG5jb25zdCB7IFJvdXRlciB9ID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKClcblxuXG5yb3V0ZXIuZ2V0KCcvJywgYXN5bmMgIChyZXEsIHJlcykgPT4ge1xuICAgYXdhaXQga3Jha2VuLmdldEJhbGFuY2UoKS50aGVuKFxuICAgICAocikgPT4ge1xuXG4gICAgICAgcmVzLmpzb24oT2JqZWN0LmVudHJpZXMoci5yZXN1bHQpKVxuICAgICB9XG4gICApXG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlciJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "kraken",
        "require",
        "Router",
        "router",
        "get",
        "req",
        "res",
        "getBalance",
        "then",
        "r",
        "json",
        "Object",
        "entries",
        "result",
        "module",
        "exports"
      ],
      "mappings": ";;;;AAAA,MAAMA,SAASC,QAAS,iCAAT,CAAf;;AAEA,MAAM,EAAEC,MAAF,KAAaD,QAAQ,SAAR,CAAnB;AACA,MAAME,SAAS,IAAID,MAAJ,EAAf;;AAGAC,OAAOC,GAAP,CAAW,GAAX;AAAA,+BAAgB,WAAQC,GAAR,EAAaC,GAAb,EAAqB;AAClC,UAAMN,OAAOO,UAAP,GAAoBC,IAApB,CACJ,UAACC,CAAD,EAAO;;AAELH,UAAII,IAAJ,CAASC,OAAOC,OAAP,CAAeH,EAAEI,MAAjB,CAAT;AACD,KAJG,CAAN;AAMF,GAPD;;AAAA;AAAA;AAAA;AAAA;;AASAC,OAAOC,OAAP,GAAiBZ,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/kraken",
      "sourcesContent": [
        "const kraken = require ('../../services/instances/kraken')\n\nconst { Router } = require('express')\nconst router = new Router()\n\n\nrouter.get('/', async  (req, res) => {\n   await kraken.getBalance().then(\n     (r) => {\n\n       res.json(Object.entries(r.result))\n     }\n   )\n})\n\nmodule.exports = router"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/info/index.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes/info\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "asyncToGenerator"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../../app/middlewares/prices",
            "imported": [
              "getPriceByPair",
              "syncPrices"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "getPriceByPair",
                "local": "getPriceByPair"
              },
              {
                "kind": "named",
                "imported": "syncPrices",
                "local": "syncPrices"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/info/index.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/info/index.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "index.js",
      "sourceFileName": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/info",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes/info",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "index"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _prices = require('../../app/middlewares/prices');\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nconst { Router } = require('express');\nconst router = new Router();\n\nrouter.get('/courses', (() => {\n  var _ref = _asyncToGenerator(function* ({ query: { ticker = 'ETH-BTC' } }, res) {\n    const price = yield (0, _prices.getPriceByPair)(ticker);\n\n    res.json(price);\n  });\n\n  return function (_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n})());\n\nrouter.get('/prices', (() => {\n  var _ref2 = _asyncToGenerator(function* (req, res) {\n    const prices = yield (0, _prices.syncPrices)();\n\n    res.json(prices);\n  });\n\n  return function (_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n})());\n\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlJvdXRlciIsInJlcXVpcmUiLCJyb3V0ZXIiLCJnZXQiLCJxdWVyeSIsInRpY2tlciIsInJlcyIsInByaWNlIiwianNvbiIsInJlcSIsInByaWNlcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7QUFFQSxNQUFNLEVBQUVBLE1BQUYsS0FBYUMsUUFBUSxTQUFSLENBQW5CO0FBQ0EsTUFBTUMsU0FBUyxJQUFJRixNQUFKLEVBQWY7O0FBRUFFLE9BQU9DLEdBQVAsQ0FBVyxVQUFYO0FBQUEsK0JBQXVCLFdBQVEsRUFBRUMsT0FBTyxFQUFFQyxTQUFTLFNBQVgsRUFBVCxFQUFSLEVBQTJDQyxHQUEzQyxFQUFtRDtBQUN4RSxVQUFNQyxRQUFRLE1BQU0sNEJBQWVGLE1BQWYsQ0FBcEI7O0FBRUFDLFFBQUlFLElBQUosQ0FBU0QsS0FBVDtBQUNELEdBSkQ7O0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBTUFMLE9BQU9DLEdBQVAsQ0FBVyxTQUFYO0FBQUEsZ0NBQXNCLFdBQU9NLEdBQVAsRUFBWUgsR0FBWixFQUFvQjtBQUN4QyxVQUFNSSxTQUFTLE1BQU0seUJBQXJCOztBQUVBSixRQUFJRSxJQUFKLENBQVNFLE1BQVQ7QUFDRCxHQUpEOztBQUFBO0FBQUE7QUFBQTtBQUFBOztBQU1BQyxPQUFPQyxPQUFQLEdBQWlCVixNQUFqQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9wbTJ1c2VyL3N3YXAuYm90L3JvdXRlcy9pbmZvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0UHJpY2VCeVBhaXIsIHN5bmNQcmljZXMgfSBmcm9tICcuLi8uLi9hcHAvbWlkZGxld2FyZXMvcHJpY2VzJ1xuXG5jb25zdCB7IFJvdXRlciB9ID0gcmVxdWlyZSgnZXhwcmVzcycpXG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKClcblxucm91dGVyLmdldCgnL2NvdXJzZXMnLCBhc3luYyAgKHsgcXVlcnk6IHsgdGlja2VyID0gJ0VUSC1CVEMnIH0gfSwgcmVzKSA9PiB7XG4gIGNvbnN0IHByaWNlID0gYXdhaXQgZ2V0UHJpY2VCeVBhaXIodGlja2VyKVxuXG4gIHJlcy5qc29uKHByaWNlKVxufSlcblxucm91dGVyLmdldCgnL3ByaWNlcycsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBwcmljZXMgPSBhd2FpdCBzeW5jUHJpY2VzKClcblxuICByZXMuanNvbihwcmljZXMpXG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlclxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "Router",
        "require",
        "router",
        "get",
        "query",
        "ticker",
        "res",
        "price",
        "json",
        "req",
        "prices",
        "module",
        "exports"
      ],
      "mappings": ";;AAAA;;;;AAEA,MAAM,EAAEA,MAAF,KAAaC,QAAQ,SAAR,CAAnB;AACA,MAAMC,SAAS,IAAIF,MAAJ,EAAf;;AAEAE,OAAOC,GAAP,CAAW,UAAX;AAAA,+BAAuB,WAAQ,EAAEC,OAAO,EAAEC,SAAS,SAAX,EAAT,EAAR,EAA2CC,GAA3C,EAAmD;AACxE,UAAMC,QAAQ,MAAM,4BAAeF,MAAf,CAApB;;AAEAC,QAAIE,IAAJ,CAASD,KAAT;AACD,GAJD;;AAAA;AAAA;AAAA;AAAA;;AAMAL,OAAOC,GAAP,CAAW,SAAX;AAAA,gCAAsB,WAAOM,GAAP,EAAYH,GAAZ,EAAoB;AACxC,UAAMI,SAAS,MAAM,yBAArB;;AAEAJ,QAAIE,IAAJ,CAASE,MAAT;AACD,GAJD;;AAAA;AAAA;AAAA;AAAA;;AAMAC,OAAOC,OAAP,GAAiBV,MAAjB",
      "file": "index.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes/info",
      "sourcesContent": [
        "import { getPriceByPair, syncPrices } from '../../app/middlewares/prices'\n\nconst { Router } = require('express')\nconst router = new Router()\n\nrouter.get('/courses', async  ({ query: { ticker = 'ETH-BTC' } }, res) => {\n  const price = await getPriceByPair(ticker)\n\n  res.json(price)\n})\n\nrouter.get('/prices', async (req, res) => {\n  const prices = await syncPrices()\n\n  res.json(prices)\n})\n\nmodule.exports = router\n"
      ]
    },
    "mtime": 1571923091190
  },
  "{\"filename\":\"/home/pm2user/swap.bot/routes/auth.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/home/pm2user/swap.bot/routes\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/home/pm2user/swap.bot/routes/auth.js",
      "filenameRelative": "/home/pm2user/swap.bot/routes/auth.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "auth.js",
      "sourceFileName": "auth.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/home/pm2user/swap.bot/routes",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "auth"
    },
    "ignored": false,
    "code": "'use strict';\n\nconst auth = require('basic-auth');\n\nconst password = process.env.API_PASS || 'qwertyasd123';\nconst admin = process.env.API_USER || process.env.SERVER_ID || 'admin';\n\nconst admins = {\n  'admin': { password },\n  [admin]: { password }\n};\n\nmodule.exports = function (request, response, next) {\n  var user = auth(request);\n  if (!user || !admins[user.name] || admins[user.name].password !== user.pass) {\n    response.set('WWW-Authenticate', 'Basic realm=\"example\"');\n    return response.status(401).send();\n  }\n  return next();\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiYXV0aCIsInJlcXVpcmUiLCJwYXNzd29yZCIsInByb2Nlc3MiLCJlbnYiLCJBUElfUEFTUyIsImFkbWluIiwiQVBJX1VTRVIiLCJTRVJWRVJfSUQiLCJhZG1pbnMiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsInVzZXIiLCJuYW1lIiwicGFzcyIsInNldCIsInN0YXR1cyIsInNlbmQiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBT0MsUUFBUSxZQUFSLENBQWI7O0FBRUEsTUFBTUMsV0FBV0MsUUFBUUMsR0FBUixDQUFZQyxRQUFaLElBQXdCLGNBQXpDO0FBQ0EsTUFBTUMsUUFBUUgsUUFBUUMsR0FBUixDQUFZRyxRQUFaLElBQXdCSixRQUFRQyxHQUFSLENBQVlJLFNBQXBDLElBQWlELE9BQS9EOztBQUVBLE1BQU1DLFNBQVM7QUFDYixXQUFTLEVBQUVQLFFBQUYsRUFESTtBQUViLEdBQUNJLEtBQUQsR0FBUyxFQUFFSixRQUFGO0FBRkksQ0FBZjs7QUFLQVEsT0FBT0MsT0FBUCxHQUFpQixVQUFVQyxPQUFWLEVBQW1CQyxRQUFuQixFQUE2QkMsSUFBN0IsRUFBbUM7QUFDbEQsTUFBSUMsT0FBT2YsS0FBS1ksT0FBTCxDQUFYO0FBQ0EsTUFBSSxDQUFDRyxJQUFELElBQVMsQ0FBQ04sT0FBT00sS0FBS0MsSUFBWixDQUFWLElBQStCUCxPQUFPTSxLQUFLQyxJQUFaLEVBQWtCZCxRQUFsQixLQUErQmEsS0FBS0UsSUFBdkUsRUFBNkU7QUFDM0VKLGFBQVNLLEdBQVQsQ0FBYSxrQkFBYixFQUFpQyx1QkFBakM7QUFDQSxXQUFPTCxTQUFTTSxNQUFULENBQWdCLEdBQWhCLEVBQXFCQyxJQUFyQixFQUFQO0FBQ0Q7QUFDRCxTQUFPTixNQUFQO0FBQ0QsQ0FQRCIsImZpbGUiOiJhdXRoLmpzIiwic291cmNlUm9vdCI6Ii9ob21lL3BtMnVzZXIvc3dhcC5ib3Qvcm91dGVzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXV0aCA9IHJlcXVpcmUoJ2Jhc2ljLWF1dGgnKTtcblxuY29uc3QgcGFzc3dvcmQgPSBwcm9jZXNzLmVudi5BUElfUEFTUyB8fCAncXdlcnR5YXNkMTIzJztcbmNvbnN0IGFkbWluID0gcHJvY2Vzcy5lbnYuQVBJX1VTRVIgfHwgcHJvY2Vzcy5lbnYuU0VSVkVSX0lEIHx8ICdhZG1pbic7XG5cbmNvbnN0IGFkbWlucyA9IHtcbiAgJ2FkbWluJzogeyBwYXNzd29yZCB9LFxuICBbYWRtaW5dOiB7IHBhc3N3b3JkIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZXF1ZXN0LCByZXNwb25zZSwgbmV4dCkge1xuICB2YXIgdXNlciA9IGF1dGgocmVxdWVzdCk7XG4gIGlmICghdXNlciB8fCAhYWRtaW5zW3VzZXIubmFtZV0gfHwgYWRtaW5zW3VzZXIubmFtZV0ucGFzc3dvcmQgIT09IHVzZXIucGFzcykge1xuICAgIHJlc3BvbnNlLnNldCgnV1dXLUF1dGhlbnRpY2F0ZScsICdCYXNpYyByZWFsbT1cImV4YW1wbGVcIicpO1xuICAgIHJldHVybiByZXNwb25zZS5zdGF0dXMoNDAxKS5zZW5kKCk7XG4gIH1cbiAgcmV0dXJuIG5leHQoKTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "auth.js"
      ],
      "names": [
        "auth",
        "require",
        "password",
        "process",
        "env",
        "API_PASS",
        "admin",
        "API_USER",
        "SERVER_ID",
        "admins",
        "module",
        "exports",
        "request",
        "response",
        "next",
        "user",
        "name",
        "pass",
        "set",
        "status",
        "send"
      ],
      "mappings": ";;AAAA,MAAMA,OAAOC,QAAQ,YAAR,CAAb;;AAEA,MAAMC,WAAWC,QAAQC,GAAR,CAAYC,QAAZ,IAAwB,cAAzC;AACA,MAAMC,QAAQH,QAAQC,GAAR,CAAYG,QAAZ,IAAwBJ,QAAQC,GAAR,CAAYI,SAApC,IAAiD,OAA/D;;AAEA,MAAMC,SAAS;AACb,WAAS,EAAEP,QAAF,EADI;AAEb,GAACI,KAAD,GAAS,EAAEJ,QAAF;AAFI,CAAf;;AAKAQ,OAAOC,OAAP,GAAiB,UAAUC,OAAV,EAAmBC,QAAnB,EAA6BC,IAA7B,EAAmC;AAClD,MAAIC,OAAOf,KAAKY,OAAL,CAAX;AACA,MAAI,CAACG,IAAD,IAAS,CAACN,OAAOM,KAAKC,IAAZ,CAAV,IAA+BP,OAAOM,KAAKC,IAAZ,EAAkBd,QAAlB,KAA+Ba,KAAKE,IAAvE,EAA6E;AAC3EJ,aAASK,GAAT,CAAa,kBAAb,EAAiC,uBAAjC;AACA,WAAOL,SAASM,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,EAAP;AACD;AACD,SAAON,MAAP;AACD,CAPD",
      "file": "auth.js",
      "sourceRoot": "/home/pm2user/swap.bot/routes",
      "sourcesContent": [
        "const auth = require('basic-auth');\n\nconst password = process.env.API_PASS || 'qwertyasd123';\nconst admin = process.env.API_USER || process.env.SERVER_ID || 'admin';\n\nconst admins = {\n  'admin': { password },\n  [admin]: { password },\n};\n\nmodule.exports = function (request, response, next) {\n  var user = auth(request);\n  if (!user || !admins[user.name] || admins[user.name].password !== user.pass) {\n    response.set('WWW-Authenticate', 'Basic realm=\"example\"');\n    return response.status(401).send();\n  }\n  return next();\n};\n"
      ]
    },
    "mtime": 1571923091190
  }
}